function _typeof2(t){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(t){return typeof t}}else{_typeof2=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof2(t)}var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)};(function(t,o){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module){module.exports=o()}else if("function"==typeof define&&define.amd){define ("tool_opencast/tabulator",o)}else{t.Tabulator=o()}})(this,function(){'use strict';if(!Array.prototype.findIndex){Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this){throw new TypeError("\"this\" is null or not defined")}var l=Object(this),o=l.length>>>0;if("function"!=typeof t){throw new TypeError("predicate must be a function")}var a=arguments[1],n=0;while(n<o){var r=l[n];if(t.call(a,r,n,l)){return n}n++}return-1}})}if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this){throw new TypeError("\"this\" is null or not defined")}var l=Object(this),o=l.length>>>0;if("function"!=typeof t){throw new TypeError("predicate must be a function")}var a=arguments[1],n=0;while(n<o){var r=l[n];if(t.call(a,r,n,l)){return r}n++}}})}if(!String.prototype.includes){String.prototype.includes=function(t,o){if(t instanceof RegExp){throw TypeError("first argument must not be a RegExp")}if(o===void 0){o=0}return-1!==this.indexOf(t,o)}}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function(t,l){if(null==this){throw new TypeError("\"this\" is null or not defined")}var r=Object(this),o=r.length>>>0;if(0===o){return!1}var s=0|l,n=Math.max(0<=s?s:o-Math.abs(s),0);function a(t,o){return t===o||"number"==typeof t&&"number"==typeof o&&isNaN(t)&&isNaN(o)}while(n<o){if(a(r[n],t)){return!0}n++}return!1}})}if("function"!=typeof Object.assign){Object.defineProperty(Object,"assign",{value:function(t){if(null===t||t===void 0){throw new TypeError("Cannot convert undefined or null to object")}for(var o=Object(t),l=1,a;l<arguments.length;l++){a=arguments[l];if(null!==a&&a!==void 0){for(var n in a){if(Object.prototype.hasOwnProperty.call(a,n)){o[n]=a[n]}}}}return o},writable:!0,configurable:!0})}var t=function(t){this.table=t;this.blockHozScrollEvent=!1;this.headersElement=this.createHeadersElement();this.element=this.createHeaderElement();this.rowManager=null;this.columns=[];this.columnsByIndex=[];this.columnsByField={};this.scrollLeft=0;this.element.insertBefore(this.headersElement,this.element.firstChild)};t.prototype.createHeadersElement=function(){var t=document.createElement("div");t.classList.add("tabulator-headers");return t};t.prototype.createHeaderElement=function(){var t=document.createElement("div");t.classList.add("tabulator-header");if(!this.table.options.headerVisible){t.classList.add("tabulator-header-hidden")}return t};t.prototype.initialize=function(){this};t.prototype.setRowManager=function(t){this.rowManager=t};t.prototype.getElement=function(){return this.element};t.prototype.getHeadersElement=function(){return this.headersElement};t.prototype.scrollHorizontal=function(t){var o=0,l=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t;if(t>l){o=t-l;this.element.style.marginLeft=-o+"px"}else{this.element.style.marginLeft=0}this.scrollLeft=t;if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.scrollHorizontal()}};t.prototype.generateColumnsFromRowData=function(t){var o=[],l=this.table.options.autoColumnsDefinitions,a,n;if(t&&t.length){a=t[0];for(var r in a){var s={field:r,title:r},d=a[r];switch("undefined"==typeof d?"undefined":_typeof(d)){case"undefined":n="string";break;case"boolean":n="boolean";break;case"object":if(Array.isArray(d)){n="array"}else{n="string"}break;default:if(!isNaN(d)&&""!==d){n="number"}else{if(d.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){n="alphanum"}else{n="string"}}break;}s.sorter=n;o.push(s)}if(l){switch("undefined"==typeof l?"undefined":_typeof(l)){case"function":this.table.options.columns=l.call(this.table,o);break;case"object":if(Array.isArray(l)){o.forEach(function(t){var o=l.find(function(o){return o.field===t.field});if(o){Object.assign(t,o)}})}else{o.forEach(function(t){if(l[t.field]){Object.assign(t,l[t.field])}})}this.table.options.columns=o;break;}}else{this.table.options.columns=o}this.setColumns(this.table.options.columns)}};t.prototype.setColumns=function(t){var o=this;while(o.headersElement.firstChild){o.headersElement.removeChild(o.headersElement.firstChild)}o.columns=[];o.columnsByIndex=[];o.columnsByField={};if(o.table.modExists("frozenColumns")){o.table.modules.frozenColumns.reset()}t.forEach(function(t){o._addColumn(t)});o._reIndexColumns();if(o.table.options.responsiveLayout&&o.table.modExists("responsiveLayout",!0)){o.table.modules.responsiveLayout.initialize()}if(this.table.options.virtualDomHoz){this.table.vdomHoz.reinitialize(!1,!0)}o.redraw(!0)};t.prototype._addColumn=function(t,o,a){var n=new l(t,this),r=n.getElement(),s=a?this.findColumnIndex(a):a;if(a&&-1<s){var d=this.columns.indexOf(a.getTopColumn()),p=a.getElement();if(o){this.columns.splice(d,0,n);p.parentNode.insertBefore(r,p)}else{this.columns.splice(d+1,0,n);p.parentNode.insertBefore(r,p.nextSibling)}}else{if(o){this.columns.unshift(n);this.headersElement.insertBefore(n.getElement(),this.headersElement.firstChild)}else{this.columns.push(n);this.headersElement.appendChild(n.getElement())}n.columnRendered()}return n};t.prototype.registerColumnField=function(t){if(t.definition.field){this.columnsByField[t.definition.field]=t}};t.prototype.registerColumnPosition=function(t){this.columnsByIndex.push(t)};t.prototype._reIndexColumns=function(){this.columnsByIndex=[];this.columns.forEach(function(t){t.reRegisterPosition()})};t.prototype._verticalAlignHeaders=function(){var t=this,o=0;t.columns.forEach(function(t){var l;t.clearVerticalAlign();l=t.getHeight();if(l>o){o=l}});t.columns.forEach(function(l){l.verticalAlign(t.table.options.columnHeaderVertAlign,o)});t.rowManager.adjustTableSize()};t.prototype.findColumn=function(t){var a=this;if("object"==("undefined"==typeof t?"undefined":_typeof(t))){if(t instanceof l){return t}else if(t instanceof o){return t._getSelf()||!1}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){var n=a.columns.find(function(o){return o.element===t});return n||!1}}else{return this.columnsByField[t]||!1}return!1};t.prototype.getColumnByField=function(t){return this.columnsByField[t]};t.prototype.getColumnsByFieldRoot=function(t){var o=this,l=[];Object.keys(this.columnsByField).forEach(function(a){var n=a.split(".")[0];if(n===t){l.push(o.columnsByField[a])}});return l};t.prototype.getColumnByIndex=function(t){return this.columnsByIndex[t]};t.prototype.getFirstVisibileColumn=function(t){var t=this.columnsByIndex.findIndex(function(t){return t.visible});return-1<t?this.columnsByIndex[t]:!1};t.prototype.getColumns=function(){return this.columns};t.prototype.findColumnIndex=function(t){return this.columnsByIndex.findIndex(function(o){return t===o})};t.prototype.getRealColumns=function(){return this.columnsByIndex};t.prototype.traverse=function(t){var o=this;o.columnsByIndex.forEach(function(o,l){t(o,l)})};t.prototype.getDefinitions=function(t){var o=this,l=[];o.columnsByIndex.forEach(function(o){if(!t||t&&o.visible){l.push(o.getDefinition())}});return l};t.prototype.getDefinitionTree=function(){var t=this,o=[];t.columns.forEach(function(t){o.push(t.getDefinition(!0))});return o};t.prototype.getComponents=function(t){var o=this,l=[],a=t?o.columns:o.columnsByIndex;a.forEach(function(t){l.push(t.getComponent())});return l};t.prototype.getWidth=function(){var t=0;this.columnsByIndex.forEach(function(o){if(o.visible){t+=o.getWidth()}});return t};t.prototype.moveColumn=function(t,o,l){this.moveColumnActual(t,o,l);if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.initialize()}if(this.table.modExists("columnCalcs")){this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)}o.element.parentNode.insertBefore(t.element,o.element);if(l){o.element.parentNode.insertBefore(o.element,t.element)}this._verticalAlignHeaders();this.table.rowManager.reinitialize()};t.prototype.moveColumnActual=function(t,o,l){if(t.parent.isGroup){this._moveColumnInArray(t.parent.columns,t,o,l)}else{this._moveColumnInArray(this.columns,t,o,l)}this._moveColumnInArray(this.columnsByIndex,t,o,l,!0);if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.initialize()}if(this.table.options.virtualDomHoz){this.table.vdomHoz.reinitialize(!0)}if(this.table.options.columnMoved){this.table.options.columnMoved.call(this.table,t.getComponent(),this.table.columnManager.getComponents())}if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns){this.table.modules.persistence.save("columns")}};t.prototype._moveColumnInArray=function(t,o,l,a,n){var r=this,s=t.indexOf(o),d,p=[];if(-1<s){t.splice(s,1);d=t.indexOf(l);if(-1<d){if(a){d=d+1}}else{d=s}t.splice(d,0,o);if(n){if(this.table.options.dataTree&&this.table.modExists("dataTree",!0)){this.table.rowManager.rows.forEach(function(t){p=p.concat(r.table.modules.dataTree.getTreeChildren(t,!1,!0))})}p=p.concat(this.table.rowManager.rows);p.forEach(function(t){if(t.cells.length){var o=t.cells.splice(s,1)[0];t.cells.splice(d,0,o)}})}}};t.prototype.scrollToColumn=function(t,o,l){var a=this,n=0,r=0,s=0,d=t.getElement();return new Promise(function(p,c){if("undefined"==typeof o){o=a.table.options.scrollToColumnPosition}if("undefined"==typeof l){l=a.table.options.scrollToColumnIfVisible}if(t.visible){switch(o){case"middle":case"center":s=-a.element.clientWidth/2;break;case"right":s=d.clientWidth-a.headersElement.clientWidth;break;}if(!l){r=d.offsetLeft;if(0<r&&r+d.offsetWidth<a.element.clientWidth){return!1}}n=d.offsetLeft+s;n=Math.max(Math.min(n,a.table.rowManager.element.scrollWidth-a.table.rowManager.element.clientWidth),0);a.table.rowManager.scrollHorizontal(n);a.scrollHorizontal(n);p()}else{console.warn("Scroll Error - Column not visible");c("Scroll Error - Column not visible")}})};t.prototype.generateCells=function(t){var o=this,l=[];o.columnsByIndex.forEach(function(o){l.push(o.generateCell(t))});return l};t.prototype.getFlexBaseWidth=function(){var t=this,o=t.table.element.clientWidth,l=0;if(t.rowManager.element.scrollHeight>t.rowManager.element.clientHeight){o-=t.rowManager.element.offsetWidth-t.rowManager.element.clientWidth}this.columnsByIndex.forEach(function(a){var n,r,s;if(a.visible){n=a.definition.width||0;r="undefined"==typeof a.minWidth?t.table.options.columnMinWidth:parseInt(a.minWidth);if("string"==typeof n){if(-1<n.indexOf("%")){s=o/100*parseInt(n)}else{s=parseInt(n)}}else{s=n}l+=s>r?s:r}});return l};t.prototype.addColumn=function(t,o,l){var a=this;return new Promise(function(n){var r=a._addColumn(t,o,l);a._reIndexColumns();if(a.table.options.responsiveLayout&&a.table.modExists("responsiveLayout",!0)){a.table.modules.responsiveLayout.initialize()}if(a.table.modExists("columnCalcs")){a.table.modules.columnCalcs.recalc(a.table.rowManager.activeRows)}a.redraw(!0);if("fitColumns"!=a.table.modules.layout.getMode()){r.reinitializeWidth()}a._verticalAlignHeaders();a.table.rowManager.reinitialize();if(a.table.options.virtualDomHoz){a.table.vdomHoz.reinitialize()}n(r)})};t.prototype.deregisterColumn=function(t){var o=t.getField(),l;if(o){delete this.columnsByField[o]}l=this.columnsByIndex.indexOf(t);if(-1<l){this.columnsByIndex.splice(l,1)}l=this.columns.indexOf(t);if(-1<l){this.columns.splice(l,1)}if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.initialize()}this._verticalAlignHeaders();this.redraw()};t.prototype.redraw=function(t){if(t){if(u.prototype.helpers.elVisible(this.element)){this._verticalAlignHeaders()}this.table.rowManager.resetScroll();this.table.rowManager.reinitialize()}if(-1<["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())){this.table.modules.layout.layout()}else{if(t){this.table.modules.layout.layout()}else{if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}}}if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layout()}if(this.table.modExists("columnCalcs")){this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)}if(t){if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns){this.table.modules.persistence.save("columns")}if(this.table.modExists("columnCalcs")){this.table.modules.columnCalcs.redraw()}}this.table.footerManager.redraw()};var o=function(t){this._column=t;this.type="ColumnComponent"};o.prototype.getElement=function(){return this._column.getElement()};o.prototype.getDefinition=function(){return this._column.getDefinition()};o.prototype.getField=function(){return this._column.getField()};o.prototype.getCells=function(){var t=[];this._column.cells.forEach(function(o){t.push(o.getComponent())});return t};o.prototype.getVisibility=function(){console.warn("getVisibility function is deprecated, you should now use the isVisible function");return this._column.visible};o.prototype.isVisible=function(){return this._column.visible};o.prototype.show=function(){if(this._column.isGroup){this._column.columns.forEach(function(t){t.show()})}else{this._column.show()}};o.prototype.hide=function(){if(this._column.isGroup){this._column.columns.forEach(function(t){t.hide()})}else{this._column.hide()}};o.prototype.toggle=function(){if(this._column.visible){this.hide()}else{this.show()}};o.prototype.delete=function(){return this._column.delete()};o.prototype.getSubColumns=function(){var t=[];if(this._column.columns.length){this._column.columns.forEach(function(o){t.push(o.getComponent())})}return t};o.prototype.getParentColumn=function(){return this._column.parent instanceof l?this._column.parent.getComponent():!1};o.prototype._getSelf=function(){return this._column};o.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)};o.prototype.getTable=function(){return this._column.table};o.prototype.headerFilterFocus=function(){if(this._column.table.modExists("filter",!0)){this._column.table.modules.filter.setHeaderFilterFocus(this._column)}};o.prototype.reloadHeaderFilter=function(){if(this._column.table.modExists("filter",!0)){this._column.table.modules.filter.reloadHeaderFilter(this._column)}};o.prototype.getHeaderFilterValue=function(){if(this._column.table.modExists("filter",!0)){return this._column.table.modules.filter.getHeaderFilterValue(this._column)}};o.prototype.setHeaderFilterValue=function(t){if(this._column.table.modExists("filter",!0)){this._column.table.modules.filter.setHeaderFilterValue(this._column,t)}};o.prototype.move=function(t,o){var l=this._column.table.columnManager.findColumn(t);if(l){this._column.table.columnManager.moveColumn(this._column,l,o)}else{console.warn("Move Error - No matching column found:",l)}};o.prototype.getNextColumn=function(){var t=this._column.nextColumn();return t?t.getComponent():!1};o.prototype.getPrevColumn=function(){var t=this._column.prevColumn();return t?t.getComponent():!1};o.prototype.updateDefinition=function(t){return this._column.updateDefinition(t)};o.prototype.getWidth=function(){return this._column.getWidth()};o.prototype.setWidth=function(t){var o;if(!0===t){o=this._column.reinitializeWidth(!0)}else{o=this._column.setWidth(t)}if(this._column.table.options.virtualDomHoz){this._column.table.vdomHoz.reinitialize(!0)}return o};o.prototype.validate=function(){return this._column.validate()};var l=function t(o,l){var a=this;this.table=l.table;this.definition=o;this.parent=l;this.type="column";this.columns=[];this.cells=[];this.element=this.createElement();this.contentElement=!1;this.titleHolderElement=!1;this.titleElement=!1;this.groupElement=this.createGroupElement();this.isGroup=!1;this.tooltip=!1;this.hozAlign="";this.vertAlign="";this.field="";this.fieldStructure="";this.getFieldValue="";this.setFieldValue="";this.titleFormatterRendered=!1;this.setField(this.definition.field);if(this.table.options.invalidOptionWarnings){this.checkDefinition()}this.modules={};this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1};this.width=null;this.widthStyled="";this.maxWidth=null;this.maxWidthStyled="";this.minWidth=null;this.minWidthStyled="";this.widthFixed=!1;this.visible=!0;this.component=null;this._mapDepricatedFunctionality();if(o.columns){this.isGroup=!0;o.columns.forEach(function(o){var l=new t(o,a);a.attachColumn(l)});a.checkColumnVisibility()}else{l.registerColumnField(this)}if(o.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")){this.table.modules.moveRow.setHandle(!0)}this._buildHeader();this.bindModuleColumns()};l.prototype.createElement=function(){var t=document.createElement("div");t.classList.add("tabulator-col");t.setAttribute("role","columnheader");t.setAttribute("aria-sort","none");return t};l.prototype.createGroupElement=function(){var t=document.createElement("div");t.classList.add("tabulator-col-group-cols");return t};l.prototype.checkDefinition=function(){var t=this;Object.keys(this.definition).forEach(function(o){if(-1===t.defaultOptionList.indexOf(o)){console.warn("Invalid column definition option in '"+(t.field||t.definition.title)+"' column:",o)}})};l.prototype.setField=function(t){this.field=t;this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[];this.getFieldValue=1<this.fieldStructure.length?this._getNestedData:this._getFlatData;this.setFieldValue=1<this.fieldStructure.length?this._setNestedData:this._setFlatData};l.prototype.registerColumnPosition=function(t){this.parent.registerColumnPosition(t)};l.prototype.registerColumnField=function(t){this.parent.registerColumnField(t)};l.prototype.reRegisterPosition=function(){if(this.isGroup){this.columns.forEach(function(t){t.reRegisterPosition()})}else{this.registerColumnPosition(this)}};l.prototype._mapDepricatedFunctionality=function(){if("undefined"!=typeof this.definition.hideInHtml){this.definition.htmlOutput=!this.definition.hideInHtml;console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput")}if("undefined"!=typeof this.definition.align){this.definition.hozAlign=this.definition.align;console.warn("align column definition property is deprecated, you should now use hozAlign")}if("undefined"!=typeof this.definition.downloadTitle){this.definition.titleDownload=this.definition.downloadTitle;console.warn("downloadTitle definition property is deprecated, you should now use titleDownload")}};l.prototype.setTooltip=function(){var t=this,o=t.definition,l=o.headerTooltip||!1===o.tooltip?o.headerTooltip:t.table.options.tooltipsHeader;if(l){if(!0===l){if(o.field){t.table.modules.localize.bind("columns|"+o.field,function(l){t.element.setAttribute("title",l||o.title)})}else{t.element.setAttribute("title",o.title)}}else{if("function"==typeof l){l=l(t.getComponent());if(!1===l){l=""}}t.element.setAttribute("title",l)}}else{t.element.setAttribute("title","")}};l.prototype._buildHeader=function(){var t=this,o=t.definition;while(t.element.firstChild){t.element.removeChild(t.element.firstChild)}if(o.headerVertical){t.element.classList.add("tabulator-col-vertical");if("flip"===o.headerVertical){t.element.classList.add("tabulator-col-vertical-flip")}}t.contentElement=t._bindEvents();t.contentElement=t._buildColumnHeaderContent();t.element.appendChild(t.contentElement);if(t.isGroup){t._buildGroupHeader()}else{t._buildColumnHeader()}t.setTooltip();if(t.table.options.resizableColumns&&t.table.modExists("resizeColumns")){t.table.modules.resizeColumns.initializeColumn("header",t,t.element)}if(o.headerFilter&&t.table.modExists("filter")&&t.table.modExists("edit")){if("undefined"!=typeof o.headerFilterPlaceholder&&o.field){t.table.modules.localize.setHeaderFilterColumnPlaceholder(o.field,o.headerFilterPlaceholder)}t.table.modules.filter.initializeColumn(t)}if(t.table.modExists("frozenColumns")){t.table.modules.frozenColumns.initializeColumn(t)}if(t.table.options.movableColumns&&!t.isGroup&&t.table.modExists("moveColumn")){t.table.modules.moveColumn.initializeColumn(t)}if((o.topCalc||o.bottomCalc)&&t.table.modExists("columnCalcs")){t.table.modules.columnCalcs.initializeColumn(t)}if(t.table.modExists("persistence")&&t.table.modules.persistence.config.columns){t.table.modules.persistence.initializeColumn(t)}t.element.addEventListener("mouseenter",function(){t.setTooltip()})};l.prototype._bindEvents=function(){var t=this,o=t.definition,l,a,n;if("function"==typeof o.headerClick){t.element.addEventListener("click",function(l){o.headerClick(l,t.getComponent())})}if("function"==typeof o.headerDblClick){t.element.addEventListener("dblclick",function(l){o.headerDblClick(l,t.getComponent())})}if("function"==typeof o.headerContext){t.element.addEventListener("contextmenu",function(l){o.headerContext(l,t.getComponent())})}if("function"==typeof o.headerTap){n=!1;t.element.addEventListener("touchstart",function(){n=!0},{passive:!0});t.element.addEventListener("touchend",function(l){if(n){o.headerTap(l,t.getComponent())}n=!1})}if("function"==typeof o.headerDblTap){l=null;t.element.addEventListener("touchend",function(a){if(l){clearTimeout(l);l=null;o.headerDblTap(a,t.getComponent())}else{l=setTimeout(function(){clearTimeout(l);l=null},300)}})}if("function"==typeof o.headerTapHold){a=null;t.element.addEventListener("touchstart",function(l){clearTimeout(a);a=setTimeout(function(){clearTimeout(a);a=null;n=!1;o.headerTapHold(l,t.getComponent())},1e3)},{passive:!0});t.element.addEventListener("touchend",function(){clearTimeout(a);a=null})}if("function"==typeof o.cellClick){t.cellEvents.cellClick=o.cellClick}if("function"==typeof o.cellDblClick){t.cellEvents.cellDblClick=o.cellDblClick}if("function"==typeof o.cellContext){t.cellEvents.cellContext=o.cellContext}if("function"==typeof o.cellMouseEnter){t.cellEvents.cellMouseEnter=o.cellMouseEnter}if("function"==typeof o.cellMouseLeave){t.cellEvents.cellMouseLeave=o.cellMouseLeave}if("function"==typeof o.cellMouseOver){t.cellEvents.cellMouseOver=o.cellMouseOver}if("function"==typeof o.cellMouseOut){t.cellEvents.cellMouseOut=o.cellMouseOut}if("function"==typeof o.cellMouseMove){t.cellEvents.cellMouseMove=o.cellMouseMove}if("function"==typeof o.cellTap){t.cellEvents.cellTap=o.cellTap}if("function"==typeof o.cellDblTap){t.cellEvents.cellDblTap=o.cellDblTap}if("function"==typeof o.cellTapHold){t.cellEvents.cellTapHold=o.cellTapHold}if("function"==typeof o.cellEdited){t.cellEvents.cellEdited=o.cellEdited}if("function"==typeof o.cellEditing){t.cellEvents.cellEditing=o.cellEditing}if("function"==typeof o.cellEditCancelled){t.cellEvents.cellEditCancelled=o.cellEditCancelled}};l.prototype._buildColumnHeader=function(){var t=this,o=this.definition,l=this.table;if(l.modExists("sort")){l.modules.sort.initializeColumn(this,this.titleHolderElement)}if((o.headerContextMenu||o.headerClickMenu||o.headerMenu)&&l.modExists("menu")){l.modules.menu.initializeColumnHeader(this)}if(l.modExists("format")){l.modules.format.initializeColumn(this)}if("undefined"!=typeof o.editor&&l.modExists("edit")){l.modules.edit.initializeColumn(this)}if("undefined"!=typeof o.validator&&l.modExists("validate")){l.modules.validate.initializeColumn(this)}if(l.modExists("mutator")){l.modules.mutator.initializeColumn(this)}if(l.modExists("accessor")){l.modules.accessor.initializeColumn(this)}if(_typeof(l.options.responsiveLayout)&&l.modExists("responsiveLayout")){l.modules.responsiveLayout.initializeColumn(this)}if("undefined"!=typeof o.visible){if(o.visible){this.show(!0)}else{this.hide(!0)}}if(o.cssClass){var a=o.cssClass.split(" ");a.forEach(function(o){t.element.classList.add(o)})}if(o.field){this.element.setAttribute("tabulator-field",o.field)}this.setMinWidth("undefined"==typeof o.minWidth?this.table.options.columnMinWidth:parseInt(o.minWidth));if(o.maxWidth||this.table.options.columnMaxWidth){if(!1!==o.maxWidth){this.setMaxWidth("undefined"==typeof o.maxWidth?this.table.options.columnMaxWidth:parseInt(o.maxWidth))}}this.reinitializeWidth();this.tooltip=this.definition.tooltip||!1===this.definition.tooltip?this.definition.tooltip:this.table.options.tooltips;this.hozAlign="undefined"==typeof this.definition.hozAlign?this.table.options.cellHozAlign:this.definition.hozAlign;this.vertAlign="undefined"==typeof this.definition.vertAlign?this.table.options.cellVertAlign:this.definition.vertAlign;this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign};l.prototype._buildColumnHeaderContent=function(){var t=this.definition,o=this.table,l=document.createElement("div");l.classList.add("tabulator-col-content");this.titleHolderElement=document.createElement("div");this.titleHolderElement.classList.add("tabulator-col-title-holder");l.appendChild(this.titleHolderElement);this.titleElement=this._buildColumnHeaderTitle();this.titleHolderElement.appendChild(this.titleElement);return l};l.prototype._buildColumnHeaderTitle=function(){var t=this,o=t.definition,l=t.table,a=document.createElement("div");a.classList.add("tabulator-col-title");if(o.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor");n.addEventListener("click",function(t){t.stopPropagation();n.focus()});n.addEventListener("change",function(){o.title=n.value;l.options.columnTitleChanged.call(t.table,t.getComponent())});a.appendChild(n);if(o.field){l.modules.localize.bind("columns|"+o.field,function(t){n.value=t||o.title||"&nbsp;"})}else{n.value=o.title||"&nbsp;"}}else{if(o.field){l.modules.localize.bind("columns|"+o.field,function(l){t._formatColumnHeaderTitle(a,l||o.title||"&nbsp;")})}else{t._formatColumnHeaderTitle(a,o.title||"&nbsp;")}}return a};l.prototype._formatColumnHeaderTitle=function(t,o){var l=this,a,n,r,s,d;if(this.definition.titleFormatter&&this.table.modExists("format")){a=this.table.modules.format.getFormatter(this.definition.titleFormatter);d=function(t){l.titleFormatterRendered=t};s={getValue:function(){return o},getElement:function(){return t}};r=this.definition.titleFormatterParams||{};r="function"==typeof r?r():r;n=a.call(this.table.modules.format,s,r,d);switch("undefined"==typeof n?"undefined":_typeof(n)){case"object":if(n instanceof Node){t.appendChild(n)}else{t.innerHTML="";console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",n)}break;case"undefined":case"null":t.innerHTML="";break;default:t.innerHTML=n;}}else{t.innerHTML=o}};l.prototype._buildGroupHeader=function(){var t=this;this.element.classList.add("tabulator-col-group");this.element.setAttribute("role","columngroup");this.element.setAttribute("aria-title",this.definition.title);if(this.definition.cssClass){var o=this.definition.cssClass.split(" ");o.forEach(function(o){t.element.classList.add(o)})}if((this.definition.headerContextMenu||this.definition.headerMenu)&&this.table.modExists("menu")){this.table.modules.menu.initializeColumnHeader(this)}this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign;this.element.appendChild(this.groupElement)};l.prototype._getFlatData=function(t){return t[this.field]};l.prototype._getNestedData=function(t){for(var o=t,l=this.fieldStructure,a=l.length,n,r=0;r<a;r++){o=o[l[r]];n=o;if(!o){break}}return n};l.prototype._setFlatData=function(t,o){if(this.field){t[this.field]=o}};l.prototype._setNestedData=function(t,o){for(var l=t,a=this.fieldStructure,n=a.length,r=0;r<n;r++){if(r==n-1){l[a[r]]=o}else{if(!l[a[r]]){if("undefined"!=typeof o){l[a[r]]={}}else{break}}l=l[a[r]]}}};l.prototype.attachColumn=function(t){var o=this;if(o.groupElement){o.columns.push(t);o.groupElement.appendChild(t.getElement())}else{console.warn("Column Warning - Column being attached to another column instead of column group")}};l.prototype.verticalAlign=function(t,o){var l=this.parent.isGroup?this.parent.getGroupElement().clientHeight:o||this.parent.getHeadersElement().clientHeight;this.element.style.height=l+"px";if(this.isGroup){this.groupElement.style.minHeight=l-this.contentElement.offsetHeight+"px"}if(!this.isGroup&&"top"!==t){if("bottom"===t){this.element.style.paddingTop=this.element.clientHeight-this.contentElement.offsetHeight+"px"}else{this.element.style.paddingTop=(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"}}this.columns.forEach(function(o){o.verticalAlign(t)})};l.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="";this.element.style.height="";this.element.style.minHeight="";this.groupElement.style.minHeight="";this.columns.forEach(function(t){t.clearVerticalAlign()})};l.prototype.bindModuleColumns=function(){if("rownum"==this.definition.formatter){this.table.rowManager.rowNumColumn=this}};l.prototype.getElement=function(){return this.element};l.prototype.getGroupElement=function(){return this.groupElement};l.prototype.getField=function(){return this.field};l.prototype.getFirstColumn=function(){if(!this.isGroup){return this}else{if(this.columns.length){return this.columns[0].getFirstColumn()}else{return!1}}};l.prototype.getLastColumn=function(){if(!this.isGroup){return this}else{if(this.columns.length){return this.columns[this.columns.length-1].getLastColumn()}else{return!1}}};l.prototype.getColumns=function(){return this.columns};l.prototype.getCells=function(){return this.cells};l.prototype.getTopColumn=function(){if(this.parent.isGroup){return this.parent.getTopColumn()}else{return this}};l.prototype.getDefinition=function(t){var o=[];if(this.isGroup&&t){this.columns.forEach(function(t){o.push(t.getDefinition(!0))});this.definition.columns=o}return this.definition};l.prototype.checkColumnVisibility=function(){var t=!1;this.columns.forEach(function(o){if(o.visible){t=!0}});if(t){this.show();this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)}else{this.hide()}};l.prototype.show=function(t,o){if(!this.visible){this.visible=!0;this.element.style.display="";if(this.parent.isGroup){this.parent.checkColumnVisibility()}this.cells.forEach(function(t){t.show()});if(!this.isGroup&&null===this.width){this.reinitializeWidth()}this.table.columnManager._verticalAlignHeaders();if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns){this.table.modules.persistence.save("columns")}if(!o&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible)}if(!t){this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0)}if(this.parent.isGroup){this.parent.matchChildWidths()}if(!this.silent&&this.table.options.virtualDomHoz){this.table.vdomHoz.reinitialize()}}};l.prototype.hide=function(t,o){if(this.visible){this.visible=!1;this.element.style.display="none";this.table.columnManager._verticalAlignHeaders();if(this.parent.isGroup){this.parent.checkColumnVisibility()}this.cells.forEach(function(t){t.hide()});if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns){this.table.modules.persistence.save("columns")}if(!o&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible)}if(!t){this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)}if(this.parent.isGroup){this.parent.matchChildWidths()}if(!this.silent&&this.table.options.virtualDomHoz){this.table.vdomHoz.reinitialize()}}};l.prototype.matchChildWidths=function(){var t=0;if(this.contentElement&&this.columns.length){this.columns.forEach(function(o){if(o.visible){t+=o.getWidth()}});this.contentElement.style.maxWidth=t-1+"px";if(this.parent.isGroup){this.parent.matchChildWidths()}}};l.prototype.removeChild=function(t){var o=this.columns.indexOf(t);if(-1<o){this.columns.splice(o,1)}if(!this.columns.length){this.delete()}};l.prototype.setWidth=function(t){this.widthFixed=!0;this.setWidthActual(t)};l.prototype.setWidthActual=function(t){if(isNaN(t)){t=Math.floor(this.table.element.clientWidth/100*parseInt(t))}t=Math.max(this.minWidth,t);if(this.maxWidth){t=Math.min(this.maxWidth,t)}this.width=t;this.widthStyled=t?t+"px":"";this.element.style.width=this.widthStyled;if(!this.isGroup){this.cells.forEach(function(t){t.setWidth()})}if(this.parent.isGroup){this.parent.matchChildWidths()}if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layout()}};l.prototype.checkCellHeights=function(){var t=[];this.cells.forEach(function(o){if(o.row.heightInitialized){if(null!==o.row.getElement().offsetParent){t.push(o.row);o.row.clearCellHeight()}else{o.row.heightInitialized=!1}}});t.forEach(function(t){t.calcHeight()});t.forEach(function(t){t.setCellHeight()})};l.prototype.getWidth=function(){var t=0;if(this.isGroup){this.columns.forEach(function(o){if(o.visible){t+=o.getWidth()}})}else{t=this.width}return t};l.prototype.getHeight=function(){return this.element.offsetHeight};l.prototype.setMinWidth=function(t){this.minWidth=t;this.minWidthStyled=t?t+"px":"";this.element.style.minWidth=this.minWidthStyled;this.cells.forEach(function(t){t.setMinWidth()})};l.prototype.setMaxWidth=function(t){this.maxWidth=t;this.maxWidthStyled=t?t+"px":"";this.element.style.maxWidth=this.maxWidthStyled;this.cells.forEach(function(t){t.setMaxWidth()})};l.prototype.delete=function(){var t=this;return new Promise(function(o){if(t.isGroup){t.columns.forEach(function(t){t.delete()})}if(t.table.modExists("edit")){if(t.table.modules.edit.currentCell.column===t){t.table.modules.edit.cancelEdit()}}for(var l=t.cells.length,a=0;a<l;a++){t.cells[0].delete()}if(t.element.parentNode){t.element.parentNode.removeChild(t.element)}t.element=!1;t.contentElement=!1;t.titleElement=!1;t.groupElement=!1;if(t.parent.isGroup){t.parent.removeChild(t)}t.table.columnManager.deregisterColumn(t);if(t.table.options.virtualDomHoz){t.table.vdomHoz.reinitialize(!0)}o()})};l.prototype.columnRendered=function(){if(this.titleFormatterRendered){this.titleFormatterRendered()}};l.prototype.validate=function(){var t=[];this.cells.forEach(function(o){if(!o.validate()){t.push(o.getComponent())}});return t.length?t:!0};l.prototype.generateCell=function(t){var o=this,l=new p(o,t);this.cells.push(l);return l};l.prototype.nextColumn=function(){var t=this.table.columnManager.findColumnIndex(this);return-1<t?this._nextVisibleColumn(t+1):!1};l.prototype._nextVisibleColumn=function(t){var o=this.table.columnManager.getColumnByIndex(t);return!o||o.visible?o:this._nextVisibleColumn(t+1)};l.prototype.prevColumn=function(){var t=this.table.columnManager.findColumnIndex(this);return-1<t?this._prevVisibleColumn(t-1):!1};l.prototype._prevVisibleColumn=function(t){var o=this.table.columnManager.getColumnByIndex(t);return!o||o.visible?o:this._prevVisibleColumn(t-1)};l.prototype.reinitializeWidth=function(t){this.widthFixed=!1;if("undefined"!=typeof this.definition.width&&!t){this.setWidth(this.definition.width)}if(this.table.modExists("filter")){this.table.modules.filter.hideHeaderFilterElements()}this.fitToData();if(this.table.modExists("filter")){this.table.modules.filter.showHeaderFilterElements()}};l.prototype.fitToData=function(){var t=this;if(!this.widthFixed){this.element.style.width="";t.cells.forEach(function(t){t.clearWidth()})}var o=this.element.offsetWidth;if(!t.width||!this.widthFixed){t.cells.forEach(function(t){var l=t.getWidth();if(l>o){o=l}});if(o){t.setWidthActual(o+1)}}};l.prototype.updateDefinition=function(t){var o=this;return new Promise(function(l,a){var n;if(!o.isGroup){if(!o.parent.isGroup){n=Object.assign({},o.getDefinition());n=Object.assign(n,t);o.table.columnManager.addColumn(n,!1,o).then(function(t){if(n.field==o.field){o.field=!1}o.delete().then(function(){l(t.getComponent())}).catch(function(t){a(t)})}).catch(function(t){a(t)})}else{console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns");a("Column Update Error - The updateDefinition function is only available on columns, not column groups")}}else{console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns");a("Column Update Error - The updateDefinition function is only available on columns, not column groups")}})};l.prototype.deleteCell=function(t){var o=this.cells.indexOf(t);if(-1<o){this.cells.splice(o,1)}};l.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","maxWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","headerHozAlign","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","clickMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams","titlePrint","titleClipboard","titleHtmlOutput","titleDownload"];l.prototype.getComponent=function(){if(!this.component){this.component=new o(this)}return this.component};var a=function(t){this.table=t;this.element=this.createHolderElement();this.tableElement=this.createTableElement();this.heightFixer=this.createTableElement();this.columnManager=null;this.height=0;this.firstRender=!1;this.renderMode="virtual";this.fixedHeight=!1;this.rows=[];this.activeRows=[];this.activeRowsCount=0;this.displayRows=[];this.displayRowsCount=0;this.scrollTop=0;this.scrollLeft=0;this.vDomRowHeight=20;this.vDomTop=0;this.vDomBottom=0;this.vDomScrollPosTop=0;this.vDomScrollPosBottom=0;this.vDomTopPad=0;this.vDomBottomPad=0;this.vDomMaxRenderChain=90;this.vDomWindowBuffer=0;this.vDomWindowMinTotalRows=20;this.vDomWindowMinMarginRows=5;this.vDomTopNewRows=[];this.vDomBottomNewRows=[];this.rowNumColumn=!1;this.redrawBlock=!1;this.redrawBlockRestoreConfig=!1;this.redrawBlockRederInPosition=!1};a.prototype.createHolderElement=function(){var t=document.createElement("div");t.classList.add("tabulator-tableHolder");t.setAttribute("tabindex",0);return t};a.prototype.createTableElement=function(){var t=document.createElement("div");t.classList.add("tabulator-table");return t};a.prototype.getElement=function(){return this.element};a.prototype.getTableElement=function(){return this.tableElement};a.prototype.getRowPosition=function(t,o){if(o){return this.activeRows.indexOf(t)}else{return this.rows.indexOf(t)}};a.prototype.setColumnManager=function(t){this.columnManager=t};a.prototype.initialize=function(){var t=this;t.setRenderMode();t.element.appendChild(t.tableElement);t.firstRender=!0;t.element.addEventListener("scroll",function(){var o=t.element.scrollLeft;if(t.scrollLeft!=o){t.columnManager.scrollHorizontal(o);if(t.table.options.groupBy){t.table.modules.groupRows.scrollHeaders(o)}if(t.table.modExists("columnCalcs")){t.table.modules.columnCalcs.scrollHorizontal(o)}t.table.options.scrollHorizontal(o)}t.scrollLeft=o});if("virtual"===this.renderMode){t.element.addEventListener("scroll",function(){var o=t.element.scrollTop,l=t.scrollTop>o;if(t.scrollTop!=o){t.scrollTop=o;t.scrollVertical(l);if("scroll"==t.table.options.ajaxProgressiveLoad){t.table.modules.ajax.nextPage(t.element.scrollHeight-t.element.clientHeight-o)}t.table.options.scrollVertical(o)}else{t.scrollTop=o}})}};a.prototype.findRow=function(t){var o=this;if("object"==("undefined"==typeof t?"undefined":_typeof(t))){if(t instanceof s){return t}else if(t instanceof r){return t._getSelf()||!1}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){var l=o.rows.find(function(o){return o.getElement()===t});return l||!1}}else if("undefined"==typeof t||null===t){return!1}else{var a=o.rows.find(function(l){return l.data[o.table.options.index]==t});return a||!1}return!1};a.prototype.getRowFromDataObject=function(t){var o=this.rows.find(function(o){return o.data===t});return o||!1};a.prototype.getRowFromPosition=function(t,o){if(o){return this.activeRows[t]}else{return this.rows[t]}};a.prototype.scrollToRow=function(t,o,l){var a=this,n=this.getDisplayRows().indexOf(t),r=t.getElement(),s,d=0;return new Promise(function(t,p){if(-1<n){if("undefined"==typeof o){o=a.table.options.scrollToRowPosition}if("undefined"==typeof l){l=a.table.options.scrollToRowIfVisible}if("nearest"===o){switch(a.renderMode){case"classic":s=u.prototype.helpers.elOffset(r).top;o=Math.abs(a.element.scrollTop-s)>Math.abs(a.element.scrollTop+a.element.clientHeight-s)?"bottom":"top";break;case"virtual":o=Math.abs(a.vDomTop-n)>Math.abs(a.vDomBottom-n)?"bottom":"top";break;}}if(!l){if(u.prototype.helpers.elVisible(r)){d=u.prototype.helpers.elOffset(r).top-u.prototype.helpers.elOffset(a.element).top;if(0<d&&d<a.element.clientHeight-r.offsetHeight){return!1}}}switch(a.renderMode){case"classic":a.element.scrollTop=u.prototype.helpers.elOffset(r).top-u.prototype.helpers.elOffset(a.element).top+a.element.scrollTop;break;case"virtual":a._virtualRenderFill(n,!0);break;}switch(o){case"middle":case"center":if(a.element.scrollHeight-a.element.scrollTop==a.element.clientHeight){a.element.scrollTop=a.element.scrollTop+(r.offsetTop-a.element.scrollTop)-(a.element.scrollHeight-r.offsetTop)/2}else{a.element.scrollTop=a.element.scrollTop-a.element.clientHeight/2}break;case"bottom":if(a.element.scrollHeight-a.element.scrollTop==a.element.clientHeight){a.element.scrollTop=a.element.scrollTop-(a.element.scrollHeight-r.offsetTop)+r.offsetHeight}else{a.element.scrollTop=a.element.scrollTop-a.element.clientHeight+r.offsetHeight}break;}t()}else{console.warn("Scroll Error - Row not visible");p("Scroll Error - Row not visible")}})};a.prototype.setData=function(t,o,l){var a=this,n=this;return new Promise(function(r){if(o&&a.getDisplayRows().length){if(n.table.options.pagination){n._setDataActual(t,!0)}else{a.reRenderInPosition(function(){n._setDataActual(t)})}}else{if(a.table.options.autoColumns&&l){a.table.columnManager.generateColumnsFromRowData(t)}a.resetScroll();a._setDataActual(t)}r()})};a.prototype._setDataActual=function(t,o){var l=this;l.table.options.dataLoading.call(this.table,t);this._wipeElements();if(this.table.options.history&&this.table.modExists("history")){this.table.modules.history.clear()}if(Array.isArray(t)){if(this.table.modExists("selectRow")){this.table.modules.selectRow.clearSelectionData()}if(this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)){this.table.modules.reactiveData.watchData(t)}t.forEach(function(t){if(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){var o=new s(t,l);l.rows.push(o)}else{console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)}});l.refreshActiveData(!1,!1,o);l.table.options.dataLoaded.call(this.table,t)}else{console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ","undefined"==typeof t?"undefined":_typeof(t),"\nData:     ",t)}};a.prototype._wipeElements=function(){this.rows.forEach(function(t){t.wipe()});if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.wipe()}this.rows=[];this.activeRows=[];this.activeRowsCount=0;this.displayRows=[];this.displayRowsCount=0;this.adjustTableSize()};a.prototype.deleteRow=function(t,o){var l=this.rows.indexOf(t),a=this.activeRows.indexOf(t);if(-1<a){this.activeRows.splice(a,1)}if(-1<l){this.rows.splice(l,1)}this.setActiveRows(this.activeRows);this.displayRowIterator(function(o){var l=o.indexOf(t);if(-1<l){o.splice(l,1)}});if(!o){this.reRenderInPosition()}this.regenerateRowNumbers();this.table.options.rowDeleted.call(this.table,t.getComponent());if(this.table.options.dataChanged){this.table.options.dataChanged.call(this.table,this.getData())}if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(!0)}else if(this.table.options.pagination&&this.table.modExists("page")){this.refreshActiveData(!1,!1,!0)}else{if(this.table.options.pagination&&this.table.modExists("page")){this.refreshActiveData("page")}}};a.prototype.addRow=function(t,o,l,a){var n=this.addRowActual(t,o,l,a);if(this.table.options.history&&this.table.modExists("history")){this.table.modules.history.action("rowAdd",n,{data:t,pos:o,index:l})}return n};a.prototype.addRows=function(t,o,l){var a=this,n=this,r=[];return new Promise(function(s){o=a.findAddRowPos(o);if(!Array.isArray(t)){t=[t]}t.length-1;if("undefined"==typeof l&&o||"undefined"!=typeof l&&!o){t.reverse()}t.forEach(function(t){var a=n.addRow(t,o,l,!0);r.push(a)});if(a.table.options.groupBy&&a.table.modExists("groupRows")){a.table.modules.groupRows.updateGroupRows(!0)}else if(a.table.options.pagination&&a.table.modExists("page")){a.refreshActiveData(!1,!1,!0)}else{a.reRenderInPosition()}if(a.table.modExists("columnCalcs")){a.table.modules.columnCalcs.recalc(a.table.rowManager.activeRows)}a.regenerateRowNumbers();s(r)})};a.prototype.findAddRowPos=function(t){if("undefined"==typeof t){t=this.table.options.addRowPos}if("pos"===t){t=!0}if("bottom"===t){t=!1}return t};a.prototype.addRowActual=function(t,o,l,a){var n=t instanceof s?t:new s(t||{},this),r=this.findAddRowPos(o),d=-1,p,c;if(!l&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow){c=this.getDisplayRows();if(r){if(c.length){l=c[0]}else{if(this.activeRows.length){l=this.activeRows[this.activeRows.length-1];r=!1}}}else{if(c.length){l=c[c.length-1];r=c.length<this.table.modules.page.getPageSize()?!1:!0}}}if("undefined"!=typeof l){l=this.findRow(l)}if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(n);var u=n.getGroup().rows;if(1<u.length){if(!l||l&&-1==u.indexOf(l)){if(r){if(u[0]!==n){l=u[0];this._moveRowInArray(n.getGroup().rows,n,l,!r)}}else{if(u[u.length-1]!==n){l=u[u.length-1];this._moveRowInArray(n.getGroup().rows,n,l,!r)}}}else{this._moveRowInArray(n.getGroup().rows,n,l,!r)}}}if(l){d=this.rows.indexOf(l)}if(l&&-1<d){p=this.activeRows.indexOf(l);this.displayRowIterator(function(t){var o=t.indexOf(l);if(-1<o){t.splice(r?o:o+1,0,n)}});if(-1<p){this.activeRows.splice(r?p:p+1,0,n)}this.rows.splice(r?d:d+1,0,n)}else{if(r){this.displayRowIterator(function(t){t.unshift(n)});this.activeRows.unshift(n);this.rows.unshift(n)}else{this.displayRowIterator(function(t){t.push(n)});this.activeRows.push(n);this.rows.push(n)}}this.setActiveRows(this.activeRows);this.table.options.rowAdded.call(this.table,n.getComponent());if(this.table.options.dataChanged){this.table.options.dataChanged.call(this.table,this.getData())}if(!a){this.reRenderInPosition()}return n};a.prototype.moveRow=function(t,o,l){if(this.table.options.history&&this.table.modExists("history")){this.table.modules.history.action("rowMove",t,{posFrom:this.getRowPosition(t),posTo:this.getRowPosition(o),to:o,after:l})}this.moveRowActual(t,o,l);this.regenerateRowNumbers();this.table.options.rowMoved.call(this.table,t.getComponent())};a.prototype.moveRowActual=function(t,o,l){var a=this;this._moveRowInArray(this.rows,t,o,l);this._moveRowInArray(this.activeRows,t,o,l);this.displayRowIterator(function(n){a._moveRowInArray(n,t,o,l)});if(this.table.options.groupBy&&this.table.modExists("groupRows")){if(!l&&o instanceof S){o=this.table.rowManager.prevDisplayRow(t)||o}var n=o.getGroup(),r=t.getGroup();if(n===r){this._moveRowInArray(n.rows,t,o,l)}else{if(r){r.removeRow(t)}n.insertRow(t,o,l)}}};a.prototype._moveRowInArray=function(t,o,l,a){var n,r,s,d;if(o!==l){n=t.indexOf(o);if(-1<n){t.splice(n,1);r=t.indexOf(l);if(-1<r){if(a){t.splice(r+1,0,o)}else{t.splice(r,0,o)}}else{t.splice(n,0,o)}}if(t===this.getDisplayRows()){s=n<r?n:r;d=r>n?r:n+1;for(var p=s;p<=d;p++){if(t[p]){this.styleRow(t[p],p)}}}}};a.prototype.clearData=function(){this.setData([])};a.prototype.getRowIndex=function(t){return this.findRowIndex(t,this.rows)};a.prototype.getDisplayRowIndex=function(t){var o=this.getDisplayRows().indexOf(t);return-1<o?o:!1};a.prototype.nextDisplayRow=function(t,o){var l=this.getDisplayRowIndex(t),a=!1;if(!1!==l&&l<this.displayRowsCount-1){a=this.getDisplayRows()[l+1]}if(a&&(!(a instanceof s)||"row"!=a.type)){return this.nextDisplayRow(a,o)}return a};a.prototype.prevDisplayRow=function(t,o){var l=this.getDisplayRowIndex(t),a=!1;if(l){a=this.getDisplayRows()[l-1]}if(o&&a&&(!(a instanceof s)||"row"!=a.type)){return this.prevDisplayRow(a,o)}return a};a.prototype.findRowIndex=function(t,o){var l;t=this.findRow(t);if(t){l=o.indexOf(t);if(-1<l){return l}}return!1};a.prototype.getData=function(t,o){var l=[],a=this.getRows(t);a.forEach(function(t){if("row"==t.type){l.push(t.getData(o||"data"))}});return l};a.prototype.getComponents=function(t){var o=[],l=this.getRows(t);l.forEach(function(t){o.push(t.getComponent())});return o};a.prototype.getDataCount=function(t){var o=this.getRows(t);return o.length};a.prototype._genRemoteRequest=function(){var t=this,o=this.table,l=o.options,a={};if(o.modExists("page")){if(l.ajaxSorting){var n=this.table.modules.sort.getSort();n.forEach(function(t){delete t.column});a[this.table.modules.page.paginationDataSentNames.sorters]=n}if(l.ajaxFiltering){var r=this.table.modules.filter.getFilters(!0,!0);a[this.table.modules.page.paginationDataSentNames.filters]=r}this.table.modules.ajax.setParams(a,!0)}o.modules.ajax.sendRequest().then(function(o){t._setDataActual(o,!0)}).catch(function(){})};a.prototype.filterRefresh=function(){var t=this.table,o=t.options,l=this.scrollLeft;if(o.ajaxFiltering){if("remote"==o.pagination&&t.modExists("page")){t.modules.page.reset(!0);t.modules.page.setPage(1).then(function(){}).catch(function(){})}else if(o.ajaxProgressiveLoad){t.modules.ajax.loadData().then(function(){}).catch(function(){})}else{this._genRemoteRequest()}}else{this.refreshActiveData("filter")}this.scrollHorizontal(l)};a.prototype.sorterRefresh=function(t){var o=this.table,l=this.table.options,a=this.scrollLeft;if(l.ajaxSorting){if(("remote"==l.pagination||l.progressiveLoad)&&o.modExists("page")){o.modules.page.reset(!0);o.modules.page.setPage(1).then(function(){}).catch(function(){})}else if(l.ajaxProgressiveLoad){o.modules.ajax.loadData().then(function(){}).catch(function(){})}else{this._genRemoteRequest()}}else{this.refreshActiveData(t?"filter":"sort")}this.scrollHorizontal(a)};a.prototype.scrollHorizontal=function(t){this.scrollLeft=t;this.element.scrollLeft=t;if(this.table.options.groupBy){this.table.modules.groupRows.scrollHeaders(t)}if(this.table.modExists("columnCalcs")){this.table.modules.columnCalcs.scrollHorizontal(t)}};a.prototype.refreshActiveData=function(t,o,l){var a=this,n=this.table,r=["all","filter","sort","display","freeze","group","tree","page"],s;if(this.redrawBlock){if(!this.redrawBlockRestoreConfig||r.indexOf(t)<r.indexOf(this.redrawBlockRestoreConfig.stage)){this.redrawBlockRestoreConfig={stage:t,skipStage:o,renderInPosition:l}}}else{if(a.table.modExists("edit")){a.table.modules.edit.cancelEdit()}if(!t){t="all"}if(n.options.selectable&&!n.options.selectablePersistence&&n.modExists("selectRow")){n.modules.selectRow.deselectRows()}switch(t){case"all":case"filter":if(!o){if(n.modExists("filter")){a.setActiveRows(n.modules.filter.filter(a.rows))}else{a.setActiveRows(a.rows.slice(0))}}else{o=!1}case"sort":if(!o){if(n.modExists("sort")){n.modules.sort.sort(this.activeRows)}}else{o=!1}this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":if(!o){if(this.table.modExists("frozenRows")){if(n.modules.frozenRows.isFrozen()){if(!n.modules.frozenRows.getDisplayIndex()){n.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex())}s=n.modules.frozenRows.getDisplayIndex();s=a.setDisplayRows(n.modules.frozenRows.getRows(this.getDisplayRows(s-1)),s);if(!0!==s){n.modules.frozenRows.setDisplayIndex(s)}}}}else{o=!1}case"group":if(!o){if(n.options.groupBy&&n.modExists("groupRows")){if(!n.modules.groupRows.getDisplayIndex()){n.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex())}s=n.modules.groupRows.getDisplayIndex();s=a.setDisplayRows(n.modules.groupRows.getRows(this.getDisplayRows(s-1)),s);if(!0!==s){n.modules.groupRows.setDisplayIndex(s)}}}else{o=!1}case"tree":if(!o){if(n.options.dataTree&&n.modExists("dataTree")){if(!n.modules.dataTree.getDisplayIndex()){n.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex())}s=n.modules.dataTree.getDisplayIndex();s=a.setDisplayRows(n.modules.dataTree.getRows(this.getDisplayRows(s-1)),s);if(!0!==s){n.modules.dataTree.setDisplayIndex(s)}}}else{o=!1}if(n.options.pagination&&n.modExists("page")&&!l){if("local"==n.modules.page.getMode()){n.modules.page.reset()}}case"page":if(!o){if(n.options.pagination&&n.modExists("page")){if(!n.modules.page.getDisplayIndex()){n.modules.page.setDisplayIndex(this.getNextDisplayIndex())}s=n.modules.page.getDisplayIndex();if("local"==n.modules.page.getMode()){n.modules.page.setMaxRows(this.getDisplayRows(s-1).length)}s=a.setDisplayRows(n.modules.page.getRows(this.getDisplayRows(s-1)),s);if(!0!==s){n.modules.page.setDisplayIndex(s)}}}else{o=!1}}if(u.prototype.helpers.elVisible(a.element)){if(l){a.reRenderInPosition()}else{if("all"===t&&this.table.options.virtualDomHoz){this.table.vdomHoz.dataChange()}a.renderTable();if(n.options.layoutColumnsOnNewData){a.table.columnManager.redraw(!0)}}}if(n.modExists("columnCalcs")){n.modules.columnCalcs.recalc(this.activeRows)}}};a.prototype.regenerateRowNumbers=function(){var t=this;if(this.rowNumColumn){this.activeRows.forEach(function(o){var l=o.getCell(t.rowNumColumn);if(l){l._generateContents()}})}};a.prototype.setActiveRows=function(t){this.activeRows=t;this.activeRowsCount=this.activeRows.length};a.prototype.resetDisplayRows=function(){this.displayRows=[];this.displayRows.push(this.activeRows.slice(0));this.displayRowsCount=this.displayRows[0].length;if(this.table.modExists("frozenRows")){this.table.modules.frozenRows.setDisplayIndex(0)}if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.setDisplayIndex(0)}if(this.table.options.pagination&&this.table.modExists("page")){this.table.modules.page.setDisplayIndex(0)}};a.prototype.getNextDisplayIndex=function(){return this.displayRows.length};a.prototype.setDisplayRows=function(t,o){var l=!0;if(o&&"undefined"!=typeof this.displayRows[o]){this.displayRows[o]=t;l=!0}else{this.displayRows.push(t);l=o=this.displayRows.length-1}if(o==this.displayRows.length-1){this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}return l};a.prototype.getDisplayRows=function(t){if("undefined"==typeof t){return this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]}else{return this.displayRows[t]||[]}};a.prototype.getVisibleRows=function(t){var o=this.element.scrollTop,l=this.element.clientHeight+o,a=!1,n=0,r=0,s=this.getDisplayRows();if(t){this.getDisplayRows();for(var d=this.vDomTop;d<=this.vDomBottom;d++){if(s[d]){if(!a){if(0<=o-s[d].getElement().offsetTop){n=d}else{a=!0;if(0<=l-s[d].getElement().offsetTop){r=d}else{break}}}else{if(0<=l-s[d].getElement().offsetTop){r=d}else{break}}}}}else{n=this.vDomTop;r=this.vDomBottom}return s.slice(n,r+1)};a.prototype.displayRowIterator=function(t){this.displayRows.forEach(t);this.displayRowsCount=this.displayRows[this.displayRows.length-1].length};a.prototype.getRows=function(t){var o;switch(t){case"active":o=this.activeRows;break;case"display":o=this.table.rowManager.getDisplayRows();break;case"visible":o=this.getVisibleRows(!0);break;case"selected":o=this.table.modules.selectRow.selectedRows;break;default:o=this.rows;}return o};a.prototype.reRenderInPosition=function(t){if("virtual"==this.getRenderMode()){if(this.redrawBlock){if(t){t()}else{this.redrawBlockRederInPosition=!0}}else{for(var o=this.element.scrollTop,l=!1,a=!1,n=this.scrollLeft,r=this.getDisplayRows(),s=this.vDomTop;s<=this.vDomBottom;s++){if(r[s]){var d=o-r[s].getElement().offsetTop;if(!1===a||Math.abs(d)<a){a=d;l=s}else{break}}}if(t){t()}this._virtualRenderFill(!1===l?this.displayRowsCount-1:l,!0,a||0);this.scrollHorizontal(n)}}else{this.renderTable();if(t){t()}}};a.prototype.setRenderMode=function(){if(this.table.options.virtualDom){this.renderMode="virtual";if(this.table.element.clientHeight||this.table.options.height){this.fixedHeight=!0}else{this.fixedHeight=!1}}else{this.renderMode="classic"}};a.prototype.getRenderMode=function(){return this.renderMode};a.prototype.renderTable=function(){this.table.options.renderStarted.call(this.table);this.element.scrollTop=0;switch(this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill();break;}if(this.firstRender){if(this.displayRowsCount){this.firstRender=!1;this.table.modules.layout.layout()}else{this.renderEmptyScroll()}}if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layout()}if(!this.displayRowsCount){if(this.table.options.placeholder){this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode);this.getElement().appendChild(this.table.options.placeholder);this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"}}this.table.options.renderComplete.call(this.table)};a.prototype._simpleRender=function(){this._clearVirtualDom();if(this.displayRowsCount){this.checkClassicModeGroupHeaderWidth()}else{this.renderEmptyScroll()}};a.prototype.checkClassicModeGroupHeaderWidth=function(){var t=this,o=this.tableElement,l=!0;t.getDisplayRows().forEach(function(a,n){t.styleRow(a,n);o.appendChild(a.getElement());a.initialize(!0);if("group"!==a.type){l=!1}});if(l){o.style.minWidth=t.table.columnManager.getWidth()+"px"}else{o.style.minWidth=""}};a.prototype.renderEmptyScroll=function(){if(this.table.options.placeholder){this.tableElement.style.display="none"}else{this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}};a.prototype._clearVirtualDom=function(){var t=this.tableElement;if(this.table.options.placeholder&&this.table.options.placeholder.parentNode){this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}while(t.firstChild){t.removeChild(t.firstChild)}t.style.paddingTop="";t.style.paddingBottom="";t.style.minWidth="";t.style.minHeight="";t.style.display="";t.style.visibility="";this.scrollTop=0;this.scrollLeft=0;this.vDomTop=0;this.vDomBottom=0;this.vDomTopPad=0;this.vDomBottomPad=0};a.prototype.styleRow=function(t,o){var l=t.getElement();if(o%2){l.classList.add("tabulator-row-even");l.classList.remove("tabulator-row-odd")}else{l.classList.add("tabulator-row-odd");l.classList.remove("tabulator-row-even")}};a.prototype._virtualRenderFill=function(t,o,l){var a=this,n=a.tableElement,r=a.element,s=0,d=0,p=0,c=0,m=!0,g=a.getDisplayRows();t=t||0;l=l||0;if(!t){a._clearVirtualDom()}else{while(n.firstChild){n.removeChild(n.firstChild)}var h=(a.displayRowsCount-t+1)*a.vDomRowHeight;if(h<a.height){t-=Math.ceil((a.height-h)/a.vDomRowHeight);if(0>t){t=0}}s=Math.min(Math.max(Math.floor(a.vDomWindowBuffer/a.vDomRowHeight),a.vDomWindowMinMarginRows),t);t-=s}if(a.displayRowsCount&&u.prototype.helpers.elVisible(a.element)){a.vDomTop=t;a.vDomBottom=t-1;while((d<=a.height+a.vDomWindowBuffer||c<a.vDomWindowMinTotalRows)&&a.vDomBottom<a.displayRowsCount-1){var b=a.vDomBottom+1,f=g[b],y=0;a.styleRow(f,b);n.appendChild(f.getElement());f.initialize();if(!f.heightInitialized){f.normalizeHeight(!0)}y=f.getHeight();if(c<s){p+=y}else{d+=y}if(y>this.vDomWindowBuffer){this.vDomWindowBuffer=2*y}if("group"!==f.type){m=!1}a.vDomBottom++;c++}if(!t){this.vDomTopPad=0;a.vDomRowHeight=Math.floor((d+p)/c);a.vDomBottomPad=a.vDomRowHeight*(a.displayRowsCount-a.vDomBottom-1);a.vDomScrollHeight=p+d+a.vDomBottomPad-a.height}else{a.vDomTopPad=!o?a.scrollTop-p:a.vDomRowHeight*this.vDomTop+l;a.vDomBottomPad=a.vDomBottom==a.displayRowsCount-1?0:Math.max(a.vDomScrollHeight-a.vDomTopPad-d-p,0)}n.style.paddingTop=a.vDomTopPad+"px";n.style.paddingBottom=a.vDomBottomPad+"px";if(o){this.scrollTop=a.vDomTopPad+p+l-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)}this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height);if(this.element.scrollWidth>this.element.offsetWidth&&o){this.scrollTop+=this.element.offsetHeight-this.element.clientHeight}this.vDomScrollPosTop=this.scrollTop;this.vDomScrollPosBottom=this.scrollTop;r.scrollTop=this.scrollTop;n.style.minWidth=m?a.table.columnManager.getWidth()+"px":"";if(a.table.options.groupBy){if("fitDataFill"!=a.table.modules.layout.getMode()&&a.displayRowsCount==a.table.modules.groupRows.countGroups()){a.tableElement.style.minWidth=a.table.columnManager.getWidth()}}}else{this.renderEmptyScroll()}if(!this.fixedHeight){this.adjustTableSize()}};a.prototype.scrollVertical=function(t){var o=this.scrollTop-this.vDomScrollPosTop,l=this.scrollTop-this.vDomScrollPosBottom,a=2*this.vDomWindowBuffer;if(-o>a||l>a){var n=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount));this.scrollHorizontal(n)}else{if(t){if(0>o){this._addTopRow(-o)}if(0>l){if(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer){this._removeBottomRow(-l)}else{this.vDomScrollPosBottom=this.scrollTop}}}else{if(0<=o){if(this.scrollTop>this.vDomWindowBuffer){this._removeTopRow(o)}else{this.vDomScrollPosTop=this.scrollTop}}if(0<=l){this._addBottomRow(l)}}}};a.prototype._addTopRow=function(t){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,l=this.tableElement,a=this.getDisplayRows();if(this.vDomTop){var n=this.vDomTop-1,r=a[n],s=r.getHeight()||this.vDomRowHeight;if(t>=s){this.styleRow(r,n);l.insertBefore(r.getElement(),l.firstChild);if(!r.initialized||!r.heightInitialized){this.vDomTopNewRows.push(r);if(!r.heightInitialized){r.clearCellHeight()}}r.initialize();this.vDomTopPad-=s;if(0>this.vDomTopPad){this.vDomTopPad=n*this.vDomRowHeight}if(!n){this.vDomTopPad=0}l.style.paddingTop=this.vDomTopPad+"px";this.vDomScrollPosTop-=s;this.vDomTop--}t=-(this.scrollTop-this.vDomScrollPosTop);if(r.getHeight()>this.vDomWindowBuffer){this.vDomWindowBuffer=2*r.getHeight()}if(o<this.vDomMaxRenderChain&&this.vDomTop&&t>=(a[this.vDomTop-1].getHeight()||this.vDomRowHeight)){this._addTopRow(t,o+1)}else{this._quickNormalizeRowHeight(this.vDomTopNewRows)}}};a.prototype._removeTopRow=function(t){var o=this.tableElement,l=this.getDisplayRows()[this.vDomTop],a=l.getHeight()||this.vDomRowHeight;if(t>=a){var n=l.getElement();n.parentNode.removeChild(n);this.vDomTopPad+=a;o.style.paddingTop=this.vDomTopPad+"px";this.vDomScrollPosTop+=this.vDomTop?a:a+this.vDomWindowBuffer;this.vDomTop++;t=this.scrollTop-this.vDomScrollPosTop;this._removeTopRow(t)}};a.prototype._addBottomRow=function(t){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,l=this.tableElement,a=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var n=this.vDomBottom+1,r=a[n],s=r.getHeight()||this.vDomRowHeight;if(t>=s){this.styleRow(r,n);l.appendChild(r.getElement());if(!r.initialized||!r.heightInitialized){this.vDomBottomNewRows.push(r);if(!r.heightInitialized){r.clearCellHeight()}}r.initialize();this.vDomBottomPad-=s;if(0>this.vDomBottomPad||n==this.displayRowsCount-1){this.vDomBottomPad=0}l.style.paddingBottom=this.vDomBottomPad+"px";this.vDomScrollPosBottom+=s;this.vDomBottom++}t=this.scrollTop-this.vDomScrollPosBottom;if(r.getHeight()>this.vDomWindowBuffer){this.vDomWindowBuffer=2*r.getHeight()}if(o<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&t>=(a[this.vDomBottom+1].getHeight()||this.vDomRowHeight)){this._addBottomRow(t,o+1)}else{this._quickNormalizeRowHeight(this.vDomBottomNewRows)}}};a.prototype._removeBottomRow=function(t){var o=this.tableElement,l=this.getDisplayRows()[this.vDomBottom],a=l.getHeight()||this.vDomRowHeight;if(t>=a){var n=l.getElement();if(n.parentNode){n.parentNode.removeChild(n)}this.vDomBottomPad+=a;if(0>this.vDomBottomPad){this.vDomBottomPad=0}o.style.paddingBottom=this.vDomBottomPad+"px";this.vDomScrollPosBottom-=a;this.vDomBottom--;t=-(this.scrollTop-this.vDomScrollPosBottom);this._removeBottomRow(t)}};a.prototype._quickNormalizeRowHeight=function(t){t.forEach(function(t){t.calcHeight()});t.forEach(function(t){t.setCellHeight()});t.length=0};a.prototype.normalizeHeight=function(){this.activeRows.forEach(function(t){t.normalizeHeight()})};a.prototype.adjustTableSize=function(){var t=this.element.clientHeight,o;if("virtual"===this.renderMode){var l=Math.floor(this.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){this.element.style.minHeight="calc(100% - "+l+"px)";this.element.style.height="calc(100% - "+l+"px)";this.element.style.maxHeight="calc(100% - "+l+"px)"}else{this.element.style.height="";this.element.style.height=this.table.element.clientHeight-l+"px";this.element.scrollTop=this.scrollTop}this.height=this.element.clientHeight;this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height;if(!this.fixedHeight&&t!=this.element.clientHeight){o=this.table.modExists("resizeTable");if(o&&!this.table.modules.resizeTable.autoResize||!o){this.redraw()}}}};a.prototype.reinitialize=function(){this.rows.forEach(function(t){t.reinitialize(!0)})};a.prototype.blockRedraw=function(){this.redrawBlock=!0;this.redrawBlockRestoreConfig=!1};a.prototype.restoreRedraw=function(){this.redrawBlock=!1;if(this.redrawBlockRestoreConfig){this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition);this.redrawBlockRestoreConfig=!1}else{if(this.redrawBlockRederInPosition){this.reRenderInPosition()}}this.redrawBlockRederInPosition=!1};a.prototype.redraw=function(t){var o=this.scrollLeft;this.adjustTableSize();this.table.tableWidth=this.table.element.clientWidth;if(!t){if("classic"==this.renderMode){if(this.table.options.groupBy){this.refreshActiveData("group",!1,!1)}else{this._simpleRender()}}else{this.reRenderInPosition();this.scrollHorizontal(o)}if(!this.displayRowsCount){if(this.table.options.placeholder){this.getElement().appendChild(this.table.options.placeholder)}}}else{this.renderTable()}};a.prototype.resetScroll=function(){this.element.scrollLeft=0;this.element.scrollTop=0;if("ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0);this.element.dispatchEvent(t)}else{this.element.dispatchEvent(new Event("scroll"))}};var n=function(t){this.table=t;this.element=this.table.rowManager.tableElement;this.holderEl=this.table.rowManager.element;this.leftCol=0;this.rightCol=0;this.scrollLeft=0;this.vDomScrollPosLeft=0;this.vDomScrollPosRight=0;this.vDomPadLeft=0;this.vDomPadRight=0;this.fitDataColAvg=0;this.window=200;this.initialized=!1;this.columns=[];if(this.compatabilityCheck()){this.initialize()}};n.prototype.compatabilityCheck=function(){var t=this.table.options,o=!1,l=!0;if("fitDataTable"==t.layout){console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode");l=!1}if(t.responsiveLayout){console.warn("Horizontal Vitrual DOM is not compatible with responsive columns");l=!1}if(this.table.rtl){console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction");l=!1}if(t.columns){o=t.columns.find(function(t){return t.frozen});if(o){console.warn("Horizontal Vitrual DOM is not compatible with frozen columns");l=!1}}if(!l){t.virtualDomHoz=!1}return l};n.prototype.initialize=function(){var t=this;this.holderEl.addEventListener("scroll",function(){var o=t.holderEl.scrollLeft;if(t.scrollLeft!=o){t.scrollLeft=o;t.scroll(o-(t.vDomScrollPosLeft+t.window))}})};n.prototype.deinitialize=function(){this.initialized=!1};n.prototype.clear=function(){this.columns=[];this.leftCol=-1;this.rightCol=0;this.vDomScrollPosLeft=0;this.vDomScrollPosRight=0;this.vDomPadLeft=0;this.vDomPadRight=0};n.prototype.dataChange=function(){var t=!1,o=0,l=0,a,n,r;if("fitData"===this.table.options.layout){this.table.columnManager.columnsByIndex.forEach(function(o){if(!o.definition.width&&o.visible){t=!0}});if(t){if(t&&this.table.rowManager.getDisplayRows().length){this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window;if(this.table.options.groupBy){a=this.table.modules.groupRows.getGroups(!1)[0];n=a.getRows(!1)[0]}else{n=this.table.rowManager.getDisplayRows()[0]}if(n){r=n.getElement();n.generateCells();this.element.appendChild(r);for(var l=0,s;l<n.cells.length;l++){s=n.cells[l];r.appendChild(s.getElement());s.column.reinitializeWidth();o+=s.column.getWidth();if(o>this.vDomScrollPosRight){break}}r.parentNode.removeChild(r);this.fitDataColAvg=Math.floor(o/(l+1));for(l;l<this.table.columnManager.columnsByIndex.length;l++){this.table.columnManager.columnsByIndex[l].setWidth(this.fitDataColAvg)}this.reinitialize(!1,!0)}}}}else{if("fitColumns"===this.table.options.layout){this.table.modules.layout.layout();this.table.vdomHoz.reinitialize(!1,!0)}}};n.prototype.fitDataLayoutOverride=function(){for(var t=this.leftCol;t<=this.rightCol;t++){this.columns[t].reinitializeWidth()}};n.prototype.reinitialize=function(t,o){var l=this,a={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(t&&!this.initialized){return}this.clear();this.scrollLeft=this.holderEl.scrollLeft;this.vDomScrollPosLeft=this.scrollLeft-this.window;this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window;var n=0;this.table.columnManager.columnsByIndex.forEach(function(t){var o={};if(t.visible){var a=t.getWidth();o.leftPos=n;o.rightPos=n+a;if(n+a>l.vDomScrollPosLeft&&n<l.vDomScrollPosRight){if(-1==l.leftCol){l.leftCol=l.columns.length;l.vDomPadLeft=n}l.rightCol=l.columns.length}else{if(-1!==l.leftCol){l.vDomPadRight+=a}}l.columns.push(t);t.modules.vdomHoz=o;n+=a}});this.element.style.paddingLeft=this.vDomPadLeft+"px";this.element.style.paddingRight=this.vDomPadRight+"px";this.initialized=!0;if(!o){if(!t||this.reinitChanged(a)){this.renitializeRows()}}this.holderEl.scrollLeft=this.scrollLeft};n.prototype.reinitChanged=function(t){var o=this,l=!0;if(t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol){return!0}t.cols.forEach(function(t,a){if(t!==o.columns[a]){l=!1}});return!l};n.prototype.renitializeRows=function(){var t=this,o=this.table.rowManager.getVisibleRows();o.forEach(function(o){t.reinitializeRow(o,!0)})};n.prototype.scroll=function(t){this.vDomScrollPosLeft+=t;this.vDomScrollPosRight+=t;if(t>.8*this.holderEl.clientWidth){this.reinitialize()}else{if(0<t){this.addColRight();this.removeColLeft()}else{this.addColLeft();this.removeColRight()}}};n.prototype.colPositionAdjust=function(t,o,l){for(var a=t,n;a<o;a++){n=this.columns[a];n.modules.vdomHoz.leftPos-=l;n.modules.vdomHoz.rightPos-=l}};n.prototype.addColRight=function(){var t=this.columns[this.rightCol+1],o,l,a;if(t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight){o=this.table.rowManager.getVisibleRows();o.forEach(function(o){if("group"!==o.type){var l=o.getCell(t);o.getElement().appendChild(l.getElement());l.cellRendered()}});if(this.fitDataColAvg){l=t.getWidth();if(l===this.fitDataColAvg){t.reinitializeWidth();a=l-t.getWidth();if(a){t.modules.vdomHoz.rightPos-=a;this.colPositionAdjust(this.rightCol+1,this.columns.length,a)}}}this.rightCol++;if(this.rightCol>=this.columns.length-1){this.vDomPadRight=0}else{this.vDomPadRight-=t.getWidth()}this.element.style.paddingRight=this.vDomPadRight+"px";this.addColRight()}};n.prototype.addColLeft=function(){var t=this.columns[this.leftCol-1],o;if(t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){var o=this.table.rowManager.getVisibleRows();o.forEach(function(o){if("group"!==o.type){var l=o.getCell(t);o.getElement().prepend(l.getElement());l.cellRendered()}});if(!this.leftCol){this.vDomPadLeft=0}else{this.vDomPadLeft-=t.getWidth()}this.element.style.paddingLeft=this.vDomPadLeft+"px";this.leftCol--;this.addColLeft()}};n.prototype.removeColRight=function(t){var t=this.columns[this.rightCol],o;if(t&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight){o=this.table.rowManager.getVisibleRows();t.modules.vdomHoz.visible=!1;o.forEach(function(o){if("group"!==o.type){var l=o.getCell(t);o.getElement().removeChild(l.getElement())}});this.vDomPadRight+=t.getWidth();this.element.style.paddingRight=this.vDomPadRight+"px";this.rightCol--;this.removeColRight()}};n.prototype.removeColLeft=function(){var t=this.columns[this.leftCol],o;if(t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft){o=this.table.rowManager.getVisibleRows();o.forEach(function(o){if("group"!==o.type){var l=o.getCell(t);o.getElement().removeChild(l.getElement())}});this.vDomPadLeft+=t.getWidth();this.element.style.paddingLeft=this.vDomPadLeft+"px";this.leftCol++;this.removeColLeft()}};n.prototype.initializeRow=function(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(var o=this.leftCol,l;o<=this.rightCol;o++){l=this.columns[o];if(l&&l.visible){var a=t.getCell(l);t.getElement().appendChild(a.getElement());a.cellRendered()}}}};n.prototype.reinitializeRow=function(t,o){if("group"!==t.type){if(o||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol){var l=t.getElement();while(l.firstChild){l.removeChild(l.firstChild)}this.initializeRow(t)}}};var r=function(t){this._row=t};r.prototype.getData=function(t){return this._row.getData(t)};r.prototype.getElement=function(){return this._row.getElement()};r.prototype.getCells=function(){var t=[];this._row.getCells().forEach(function(o){t.push(o.getComponent())});return t};r.prototype.getCell=function(t){var o=this._row.getCell(t);return o?o.getComponent():!1};r.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]};r.prototype.getPosition=function(t){return this._row.table.rowManager.getRowPosition(this._row,t)};r.prototype.delete=function(){return this._row.delete()};r.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)};r.prototype.pageTo=function(){if(this._row.table.modExists("page",!0)){return this._row.table.modules.page.setPageToRow(this._row)}};r.prototype.move=function(t,o){this._row.moveToRow(t,o)};r.prototype.update=function(t){return this._row.updateData(t)};r.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)};r.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)};r.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)};r.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)};r.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)};r.prototype._getSelf=function(){return this._row};r.prototype.validate=function(){return this._row.validate()};r.prototype.freeze=function(){if(this._row.table.modExists("frozenRows",!0)){this._row.table.modules.frozenRows.freezeRow(this._row)}};r.prototype.unfreeze=function(){if(this._row.table.modExists("frozenRows",!0)){this._row.table.modules.frozenRows.unfreezeRow(this._row)}};r.prototype.isFrozen=function(){if(this._row.table.modExists("frozenRows",!0)){var t=this._row.table.modules.frozenRows.rows.indexOf(this._row);return-1<t}return!1};r.prototype.treeCollapse=function(){if(this._row.table.modExists("dataTree",!0)){this._row.table.modules.dataTree.collapseRow(this._row)}};r.prototype.treeExpand=function(){if(this._row.table.modExists("dataTree",!0)){this._row.table.modules.dataTree.expandRow(this._row)}};r.prototype.treeToggle=function(){if(this._row.table.modExists("dataTree",!0)){this._row.table.modules.dataTree.toggleRow(this._row)}};r.prototype.getTreeParent=function(){if(this._row.table.modExists("dataTree",!0)){return this._row.table.modules.dataTree.getTreeParent(this._row)}return!1};r.prototype.getTreeChildren=function(){if(this._row.table.modExists("dataTree",!0)){return this._row.table.modules.dataTree.getTreeChildren(this._row,!0)}return!1};r.prototype.addTreeChild=function(t,o,l){if(this._row.table.modExists("dataTree",!0)){return this._row.table.modules.dataTree.addTreeChildRow(this._row,t,o,l)}return!1};r.prototype.reformat=function(){return this._row.reinitialize()};r.prototype.getGroup=function(){return this._row.getGroup().getComponent()};r.prototype.getTable=function(){return this._row.table};r.prototype.getNextRow=function(){var t=this._row.nextRow();return t?t.getComponent():t};r.prototype.getPrevRow=function(){var t=this._row.prevRow();return t?t.getComponent():t};var s=function(t,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"row";this.table=o.table;this.parent=o;this.data={};this.type=l;this.element=!1;this.modules={};this.cells=[];this.height=0;this.heightStyled="";this.manualHeight=!1;this.outerHeight=0;this.initialized=!1;this.heightInitialized=!1;this.component=null;this.created=!1;this.setData(t)};s.prototype.create=function(){if(!this.created){this.created=!0;this.generateElement()}};s.prototype.createElement=function(){var t=document.createElement("div");t.classList.add("tabulator-row");t.setAttribute("role","row");this.element=t};s.prototype.getElement=function(){this.create();return this.element};s.prototype.detachElement=function(){if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}};s.prototype.generateElement=function(){var t=this,o,l,a;this.createElement();if(!1!==t.table.options.selectable&&t.table.modExists("selectRow")){t.table.modules.selectRow.initializeRow(this)}if(!1!==t.table.options.movableRows&&t.table.modExists("moveRow")){t.table.modules.moveRow.initializeRow(this)}if(!1!==t.table.options.dataTree&&t.table.modExists("dataTree")){t.table.modules.dataTree.initializeRow(this)}if("collapse"===t.table.options.responsiveLayout&&t.table.modExists("responsiveLayout")){t.table.modules.responsiveLayout.initializeRow(this)}if((t.table.options.rowContextMenu||t.table.options.rowClickMenu)&&this.table.modExists("menu")){t.table.modules.menu.initializeRow(this)}if(t.table.options.rowClick){t.element.addEventListener("click",function(o){t.table.options.rowClick(o,t.getComponent())})}if(t.table.options.rowDblClick){t.element.addEventListener("dblclick",function(o){t.table.options.rowDblClick(o,t.getComponent())})}if(t.table.options.rowContext){t.element.addEventListener("contextmenu",function(o){t.table.options.rowContext(o,t.getComponent())})}if(t.table.options.rowMouseEnter){t.element.addEventListener("mouseenter",function(o){t.table.options.rowMouseEnter(o,t.getComponent())})}if(t.table.options.rowMouseLeave){t.element.addEventListener("mouseleave",function(o){t.table.options.rowMouseLeave(o,t.getComponent())})}if(t.table.options.rowMouseOver){t.element.addEventListener("mouseover",function(o){t.table.options.rowMouseOver(o,t.getComponent())})}if(t.table.options.rowMouseOut){t.element.addEventListener("mouseout",function(o){t.table.options.rowMouseOut(o,t.getComponent())})}if(t.table.options.rowMouseMove){t.element.addEventListener("mousemove",function(o){t.table.options.rowMouseMove(o,t.getComponent())})}if(t.table.options.rowTap){a=!1;t.element.addEventListener("touchstart",function(){a=!0},{passive:!0});t.element.addEventListener("touchend",function(o){if(a){t.table.options.rowTap(o,t.getComponent())}a=!1})}if(t.table.options.rowDblTap){o=null;t.element.addEventListener("touchend",function(l){if(o){clearTimeout(o);o=null;t.table.options.rowDblTap(l,t.getComponent())}else{o=setTimeout(function(){clearTimeout(o);o=null},300)}})}if(t.table.options.rowTapHold){l=null;t.element.addEventListener("touchstart",function(o){clearTimeout(l);l=setTimeout(function(){clearTimeout(l);l=null;a=!1;t.table.options.rowTapHold(o,t.getComponent())},1e3)},{passive:!0});t.element.addEventListener("touchend",function(){clearTimeout(l);l=null})}};s.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)};s.prototype.initialize=function(t){var o=this;this.create();if(!this.initialized||t){this.deleteCells();while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layoutRow(this)}this.generateCells();if(this.table.options.virtualDomHoz&&this.table.vdomHoz.initialized){this.table.vdomHoz.initializeRow(this)}else{this.cells.forEach(function(t){o.element.appendChild(t.getElement());t.cellRendered()})}if(t){this.normalizeHeight()}if(this.table.options.dataTree&&this.table.modExists("dataTree")){this.table.modules.dataTree.layoutRow(this)}if("collapse"===this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout")){this.table.modules.responsiveLayout.layoutRow(this)}if(this.table.options.rowFormatter){this.table.options.rowFormatter(this.getComponent())}if(this.table.options.resizableRows&&this.table.modExists("resizeRows")){this.table.modules.resizeRows.initializeRow(this)}this.initialized=!0}else{if(this.table.options.virtualDomHoz){this.table.vdomHoz.reinitializeRow(this)}}};s.prototype.reinitializeHeight=function(){this.heightInitialized=!1;if(this.element&&null!==this.element.offsetParent){this.normalizeHeight(!0)}};s.prototype.reinitialize=function(){this.initialized=!1;this.heightInitialized=!1;if(!this.manualHeight){this.height=0;this.heightStyled=""}if(this.element&&null!==this.element.offsetParent){this.initialize(!0)}if(this.table.options.dataTree&&this.table.modExists("dataTree",!0)){this.table.modules.dataTree.getTreeChildren(this,!1,!0).forEach(function(t){t.reinitialize(!0)})}};s.prototype.calcHeight=function(t){var o=0,l=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(t){var l=t.getHeight();if(l>o){o=l}});if(t){this.height=Math.max(o,l)}else{this.height=this.manualHeight?this.height:Math.max(o,l)}this.heightStyled=this.height?this.height+"px":"";this.outerHeight=this.element.offsetHeight};s.prototype.setCellHeight=function(){this.cells.forEach(function(t){t.setHeight()});this.heightInitialized=!0};s.prototype.clearCellHeight=function(){this.cells.forEach(function(t){t.clearHeight()})};s.prototype.normalizeHeight=function(t){if(t){this.clearCellHeight()}this.calcHeight(t);this.setCellHeight()};s.prototype.setHeight=function(t,o){if(this.height!=t||o){this.manualHeight=!0;this.height=t;this.heightStyled=t?t+"px":"";this.setCellHeight();this.outerHeight=this.element.offsetHeight}};s.prototype.getHeight=function(){return this.outerHeight};s.prototype.getWidth=function(){return this.element.offsetWidth};s.prototype.deleteCell=function(t){var o=this.cells.indexOf(t);if(-1<o){this.cells.splice(o,1)}};s.prototype.setData=function(t){if(this.table.modExists("mutator")){t=this.table.modules.mutator.transformRow(t,"data")}this.data=t;if(this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)){this.table.modules.reactiveData.watchRow(this)}};s.prototype.updateData=function(t){var o=this,l=this.element&&u.prototype.helpers.elVisible(this.element),a={},n;return new Promise(function(r){if("string"==typeof t){t=JSON.parse(t)}if(o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)){o.table.modules.reactiveData.block()}if(o.table.modExists("mutator")){a=Object.assign(a,o.data);a=Object.assign(a,t);n=o.table.modules.mutator.transformRow(a,"data",t)}else{n=t}for(var s in n){o.data[s]=n[s]}if(o.table.options.reactiveData&&o.table.modExists("reactiveData",!0)){o.table.modules.reactiveData.unblock()}for(var s in t){var d=o.table.columnManager.getColumnsByFieldRoot(s);d.forEach(function(t){var a=o.getCell(t.getField());if(a){var r=t.getFieldValue(n);if(a.getValue()!=r){a.setValueProcessData(r);if(l){a.cellRendered()}}}})}if(o.table.options.groupUpdateOnCellEdit&&o.table.options.groupBy&&o.table.modExists("groupRows")){o.table.modules.groupRows.reassignRowToGroup(o.row)}if(l){o.normalizeHeight(!0);if(o.table.options.rowFormatter){o.table.options.rowFormatter(o.getComponent())}}else{o.initialized=!1;o.height=0;o.heightStyled=""}if(!1!==o.table.options.dataTree&&o.table.modExists("dataTree")&&o.table.modules.dataTree.redrawNeeded(t)){o.table.modules.dataTree.initializeRow(o);if(l){o.table.modules.dataTree.layoutRow(o);o.table.rowManager.refreshActiveData("tree",!1,!0)}}o.table.options.rowUpdated.call(o.table,o.getComponent());if(o.table.options.dataChanged){o.table.options.dataChanged.call(o.table,o.table.rowManager.getData())}r()})};s.prototype.getData=function(t){if(t){if(this.table.modExists("accessor")){return this.table.modules.accessor.transformRow(this,t)}}return this.data};s.prototype.getCell=function(t){var o=!1;t=this.table.columnManager.findColumn(t);o=this.cells.find(function(o){return o.column===t});return o};s.prototype.getCellIndex=function(t){return this.cells.findIndex(function(o){return o===t})};s.prototype.findNextEditableCell=function(t){var o=!1;if(t<this.cells.length-1){for(var l=t+1,a;l<this.cells.length;l++){a=this.cells[l];if(a.column.modules.edit&&u.prototype.helpers.elVisible(a.getElement())){var n=!0;if("function"==typeof a.column.modules.edit.check){n=a.column.modules.edit.check(a.getComponent())}if(n){o=a;break}}}}return o};s.prototype.findPrevEditableCell=function(t){var o=!1;if(0<t){for(var l=t-1;0<=l;l--){var a=this.cells[l],n=!0;if(a.column.modules.edit&&u.prototype.helpers.elVisible(a.getElement())){if("function"==typeof a.column.modules.edit.check){n=a.column.modules.edit.check(a.getComponent())}if(n){o=a;break}}}}return o};s.prototype.getCells=function(){return this.cells};s.prototype.nextRow=function(){var t=this.table.rowManager.nextDisplayRow(this,!0);return t||!1};s.prototype.prevRow=function(){var t=this.table.rowManager.prevDisplayRow(this,!0);return t||!1};s.prototype.moveToRow=function(t,o){var l=this.table.rowManager.findRow(t);if(l){this.table.rowManager.moveRowActual(this,l,!o);this.table.rowManager.refreshActiveData("display",!1,!0)}else{console.warn("Move Error - No matching row found:",t)}};s.prototype.validate=function(){var t=[];this.cells.forEach(function(o){if(!o.validate()){t.push(o.getComponent())}});return t.length?t:!0};s.prototype.delete=function(){var t=this;return new Promise(function(o){var l,a;if(t.table.options.history&&t.table.modExists("history")){if(t.table.options.groupBy&&t.table.modExists("groupRows")){a=t.getGroup().rows;l=a.indexOf(t);if(l){l=a[l-1]}}else{l=t.table.rowManager.getRowIndex(t);if(l){l=t.table.rowManager.rows[l-1]}}t.table.modules.history.action("rowDelete",t,{data:t.getData(),pos:!l,index:l})}t.deleteActual();o()})};s.prototype.deleteActual=function(t){this.table.rowManager.getRowIndex(this);this.detatchModules();if(this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)){}if(this.modules.group){this.modules.group.removeRow(this)}this.table.rowManager.deleteRow(this,t);this.deleteCells();this.initialized=!1;this.heightInitialized=!1;this.element=!1;if(this.table.options.dataTree&&this.table.modExists("dataTree",!0)){this.table.modules.dataTree.rowDelete(this)}if(this.table.modExists("columnCalcs")){if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.columnCalcs.recalcRowGroup(this)}else{this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)}}};s.prototype.detatchModules=function(){if(this.table.modExists("selectRow")){this.table.modules.selectRow._deselectRow(this,!0)}if(this.table.modExists("edit")){if(this.table.modules.edit.currentCell.row===this){this.table.modules.edit.cancelEdit()}}if(this.table.modExists("frozenRows")){this.table.modules.frozenRows.detachRow(this)}};s.prototype.deleteCells=function(){for(var t=this.cells.length,o=0;o<t;o++){this.cells[0].delete()}};s.prototype.wipe=function(){this.detatchModules();this.deleteCells();if(this.element){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}}this.element=!1;this.modules={}};s.prototype.getGroup=function(){return this.modules.group||!1};s.prototype.getComponent=function(){if(!this.component){this.component=new r(this)}return this.component};var d=function(t){this._cell=t};d.prototype.getValue=function(){return this._cell.getValue()};d.prototype.getOldValue=function(){return this._cell.getOldValue()};d.prototype.getInitialValue=function(){return this._cell.initialValue};d.prototype.getElement=function(){return this._cell.getElement()};d.prototype.getRow=function(){return this._cell.row.getComponent()};d.prototype.getData=function(){return this._cell.row.getData()};d.prototype.getField=function(){return this._cell.column.getField()};d.prototype.getColumn=function(){return this._cell.column.getComponent()};d.prototype.setValue=function(t,o){if("undefined"==typeof o){o=!0}this._cell.setValue(t,o)};d.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())};d.prototype.restoreInitialValue=function(){this._cell.setValueActual(this._cell.initialValue)};d.prototype.edit=function(t){return this._cell.edit(t)};d.prototype.cancelEdit=function(){this._cell.cancelEdit()};d.prototype.isEdited=function(){return!!this._cell.modules.edit&&this._cell.modules.edit.edited};d.prototype.clearEdited=function(){if(self.table.modExists("edit",!0)){this._cell.table.modules.edit.clearEdited(this._cell)}};d.prototype.isValid=function(){return this._cell.modules.validate?!this._cell.modules.validate.invalid:!0};d.prototype.validate=function(){return this._cell.validate()};d.prototype.clearValidation=function(){if(this._cell.table.modExists("validate",!0)){this._cell.table.modules.validate.clearValidation(this._cell)}};d.prototype.nav=function(){return this._cell.nav()};d.prototype.checkHeight=function(){this._cell.checkHeight()};d.prototype.getTable=function(){return this._cell.table};d.prototype._getSelf=function(){return this._cell};var p=function(t,o){this.table=t.table;this.column=t;this.row=o;this.element=null;this.value=null;this.initialValue;this.oldValue=null;this.modules={};this.height=null;this.width=null;this.minWidth=null;this.component=null;this.loaded=!1;this.build()};p.prototype.build=function(){this.generateElement();this.setWidth();this._configureCell();this.setValueActual(this.column.getFieldValue(this.row.data));this.initialValue=this.value};p.prototype.generateElement=function(){this.element=document.createElement("div");this.element.className="tabulator-cell";this.element.setAttribute("role","gridcell");this.element=this.element};p.prototype._configureCell=function(){var t=this,o=t.column.cellEvents,l=t.element,a=this.column.getField();l.style.textAlign=t.column.hozAlign;if(t.column.vertAlign){l.style.display="inline-flex";l.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[t.column.vertAlign]||"";if(t.column.hozAlign){l.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[t.column.hozAlign]||""}}if(a){l.setAttribute("tabulator-field",a)}if(t.column.definition.cssClass){var n=t.column.definition.cssClass.split(" ");n.forEach(function(t){l.classList.add(t)})}if("hover"===this.table.options.tooltipGenerationMode){l.addEventListener("mouseenter",function(){t._generateTooltip()})}t._bindClickEvents(o);t._bindTouchEvents(o);t._bindMouseEvents(o);if(t.column.modules.edit){t.table.modules.edit.bindEditor(t)}if(t.column.definition.rowHandle&&!1!==t.table.options.movableRows&&t.table.modExists("moveRow")){t.table.modules.moveRow.initializeCell(t)}if(!t.column.visible){t.hide()}};p.prototype._bindClickEvents=function(t){var o=this,l=o.element;if(t.cellClick||o.table.options.cellClick){l.addEventListener("click",function(l){var a=o.getComponent();if(t.cellClick){t.cellClick.call(o.table,l,a)}if(o.table.options.cellClick){o.table.options.cellClick.call(o.table,l,a)}})}if(t.cellDblClick||this.table.options.cellDblClick){l.addEventListener("dblclick",function(l){var a=o.getComponent();if(t.cellDblClick){t.cellDblClick.call(o.table,l,a)}if(o.table.options.cellDblClick){o.table.options.cellDblClick.call(o.table,l,a)}})}else{l.addEventListener("dblclick",function(t){if(o.table.modExists("edit")){if(o.table.modules.edit.currentCell===o){return}}t.preventDefault();try{if(document.selection){var l=document.body.createTextRange();l.moveToElementText(o.element);l.select()}else if(window.getSelection){var l=document.createRange();l.selectNode(o.element);window.getSelection().removeAllRanges();window.getSelection().addRange(l)}}catch(t){}})}if(t.cellContext||this.table.options.cellContext){l.addEventListener("contextmenu",function(l){var a=o.getComponent();if(t.cellContext){t.cellContext.call(o.table,l,a)}if(o.table.options.cellContext){o.table.options.cellContext.call(o.table,l,a)}})}};p.prototype._bindMouseEvents=function(t){var o=this,l=o.element;if(t.cellMouseEnter||o.table.options.cellMouseEnter){l.addEventListener("mouseenter",function(l){var a=o.getComponent();if(t.cellMouseEnter){t.cellMouseEnter.call(o.table,l,a)}if(o.table.options.cellMouseEnter){o.table.options.cellMouseEnter.call(o.table,l,a)}})}if(t.cellMouseLeave||o.table.options.cellMouseLeave){l.addEventListener("mouseleave",function(l){var a=o.getComponent();if(t.cellMouseLeave){t.cellMouseLeave.call(o.table,l,a)}if(o.table.options.cellMouseLeave){o.table.options.cellMouseLeave.call(o.table,l,a)}})}if(t.cellMouseOver||o.table.options.cellMouseOver){l.addEventListener("mouseover",function(l){var a=o.getComponent();if(t.cellMouseOver){t.cellMouseOver.call(o.table,l,a)}if(o.table.options.cellMouseOver){o.table.options.cellMouseOver.call(o.table,l,a)}})}if(t.cellMouseOut||o.table.options.cellMouseOut){l.addEventListener("mouseout",function(l){var a=o.getComponent();if(t.cellMouseOut){t.cellMouseOut.call(o.table,l,a)}if(o.table.options.cellMouseOut){o.table.options.cellMouseOut.call(o.table,l,a)}})}if(t.cellMouseMove||o.table.options.cellMouseMove){l.addEventListener("mousemove",function(l){var a=o.getComponent();if(t.cellMouseMove){t.cellMouseMove.call(o.table,l,a)}if(o.table.options.cellMouseMove){o.table.options.cellMouseMove.call(o.table,l,a)}})}};p.prototype._bindTouchEvents=function(t){var o=this,l=o.element,a,n,r;if(t.cellTap||this.table.options.cellTap){r=!1;l.addEventListener("touchstart",function(){r=!0},{passive:!0});l.addEventListener("touchend",function(l){if(r){var a=o.getComponent();if(t.cellTap){t.cellTap.call(o.table,l,a)}if(o.table.options.cellTap){o.table.options.cellTap.call(o.table,l,a)}}r=!1})}if(t.cellDblTap||this.table.options.cellDblTap){a=null;l.addEventListener("touchend",function(l){if(a){clearTimeout(a);a=null;var n=o.getComponent();if(t.cellDblTap){t.cellDblTap.call(o.table,l,n)}if(o.table.options.cellDblTap){o.table.options.cellDblTap.call(o.table,l,n)}}else{a=setTimeout(function(){clearTimeout(a);a=null},300)}})}if(t.cellTapHold||this.table.options.cellTapHold){n=null;l.addEventListener("touchstart",function(l){clearTimeout(n);n=setTimeout(function(){clearTimeout(n);n=null;r=!1;var a=o.getComponent();if(t.cellTapHold){t.cellTapHold.call(o.table,l,a)}if(o.table.options.cellTapHold){o.table.options.cellTapHold.call(o.table,l,a)}},1e3)},{passive:!0});l.addEventListener("touchend",function(){clearTimeout(n);n=null})}};p.prototype._generateContents=function(){var t;if(this.table.modExists("format")){t=this.table.modules.format.formatValue(this)}else{t=this.element.innerHTML=this.value}switch("undefined"==typeof t?"undefined":_typeof(t)){case"object":if(t instanceof Node){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.element.appendChild(t)}else{this.element.innerHTML="";if(null!=t){console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t)}}break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t;}};p.prototype.cellRendered=function(){if(this.table.modExists("format")&&this.table.modules.format.cellRendered){this.table.modules.format.cellRendered(this)}};p.prototype._generateTooltip=function(){var t=this.column.tooltip;if(t){if(!0===t){t=this.value}else if("function"==typeof t){t=t(this.getComponent());if(!1===t){t=""}}if("undefined"==typeof t){t=""}this.element.setAttribute("title",t)}else{this.element.setAttribute("title","")}};p.prototype.getElement=function(t){if(!this.loaded){this.loaded=!0;if(!t){this.layoutElement()}}return this.element};p.prototype.getValue=function(){return this.value};p.prototype.getOldValue=function(){return this.oldValue};p.prototype.setValue=function(t,o){var l=this.setValueProcessData(t,o),a;if(l){if(this.table.options.history&&this.table.modExists("history")){this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value})}a=this.getComponent();if(this.column.cellEvents.cellEdited){this.column.cellEvents.cellEdited.call(this.table,a)}if(this.table.options.groupUpdateOnCellEdit&&this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.reassignRowToGroup(this.row)}this.cellRendered();this.table.options.cellEdited.call(this.table,a);if(this.table.options.dataChanged){this.table.options.dataChanged.call(this.table,this.table.rowManager.getData())}}};p.prototype.setValueProcessData=function(t,o){var l=!1;if(this.value!=t){l=!0;if(o){if(this.column.modules.mutate){t=this.table.modules.mutator.transformCell(this,t)}}}this.setValueActual(t);if(l&&this.table.modExists("columnCalcs")){if(this.column.definition.topCalc||this.column.definition.bottomCalc){if(this.table.options.groupBy&&this.table.modExists("groupRows")){if("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs){this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)}if("table"!=this.table.options.columnCalcs){this.table.modules.columnCalcs.recalcRowGroup(this.row)}}else{this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)}}}return l};p.prototype.setValueActual=function(t){this.oldValue=this.value;this.value=t;if(this.table.options.reactiveData&&this.table.modExists("reactiveData")){this.table.modules.reactiveData.block()}this.column.setFieldValue(this.row.data,t);if(this.table.options.reactiveData&&this.table.modExists("reactiveData")){this.table.modules.reactiveData.unblock()}if(this.loaded){this.layoutElement()}};p.prototype.layoutElement=function(){this._generateContents();this._generateTooltip();if(this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&"row"===this.row.type){this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element)}if((this.column.definition.contextMenu||this.column.definition.clickMenu)&&this.table.modExists("menu")){this.table.modules.menu.initializeCell(this)}if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layoutElement(this.element,this.column)}};p.prototype.setWidth=function(){this.width=this.column.width;this.element.style.width=this.column.widthStyled};p.prototype.clearWidth=function(){this.width="";this.element.style.width=""};p.prototype.getWidth=function(){return this.width||this.element.offsetWidth};p.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth;this.element.style.minWidth=this.column.minWidthStyled};p.prototype.setMaxWidth=function(){this.maxWidth=this.column.maxWidth;this.element.style.maxWidth=this.column.maxWidthStyled};p.prototype.checkHeight=function(){this.row.reinitializeHeight()};p.prototype.clearHeight=function(){this.element.style.height="";this.height=null};p.prototype.setHeight=function(){this.height=this.row.height;this.element.style.height=this.row.heightStyled};p.prototype.getHeight=function(){return this.height||this.element.offsetHeight};p.prototype.show=function(){this.element.style.display=this.column.vertAlign?"inline-flex":""};p.prototype.hide=function(){this.element.style.display="none"};p.prototype.edit=function(t){if(this.table.modExists("edit",!0)){return this.table.modules.edit.editCell(this,t)}};p.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var t=this.table.modules.edit.getCurrentCell();if(t&&t._getSelf()===this){this.table.modules.edit.cancelEdit()}else{console.warn("Cancel Editor Error - This cell is not currently being edited ")}}};p.prototype.validate=function(){if(this.column.modules.validate&&this.table.modExists("validate",!0)){var t=this.table.modules.validate.validate(this.column.modules.validate,this,this.getValue());return!0===t}else{return!0}};p.prototype.delete=function(){if(!this.table.rowManager.redrawBlock&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}if(this.modules.validate&&this.modules.validate.invalid){this.table.modules.validate.clearValidation(this)}if(this.modules.edit&&this.modules.edit.edited){this.table.modules.edit.clearEdited(this)}if(this.table.options.history){this.table.modules.history.clearComponentHistory(this)}this.element=!1;this.column.deleteCell(this);this.row.deleteCell(this);this.calcs={}};p.prototype.nav=function(){var t=this,o=!1,l=this.row.getCellIndex(this);return{next:function(){var o=this.right(),l;if(!o){l=t.table.rowManager.nextDisplayRow(t.row,!0);if(l){o=l.findNextEditableCell(-1);if(o){o.edit();return!0}}}else{return!0}return!1},prev:function(){var o=this.left(),l;if(!o){l=t.table.rowManager.prevDisplayRow(t.row,!0);if(l){o=l.findPrevEditableCell(l.cells.length);if(o){o.edit();return!0}}}else{return!0}return!1},left:function(){o=t.row.findPrevEditableCell(l);if(o){o.edit();return!0}else{return!1}},right:function(){o=t.row.findNextEditableCell(l);if(o){o.edit();return!0}else{return!1}},up:function(){var o=t.table.rowManager.prevDisplayRow(t.row,!0);if(o){o.cells[l].edit()}},down:function(){var o=t.table.rowManager.nextDisplayRow(t.row,!0);if(o){o.cells[l].edit()}}}};p.prototype.getIndex=function(){this.row.getCellIndex(this)};p.prototype.getComponent=function(){if(!this.component){this.component=new d(this)}return this.component};var c=function(t){this.table=t;this.active=!1;this.element=this.createElement();this.external=!1;this.links=[];this._initialize()};c.prototype.createElement=function(){var t=document.createElement("div");t.classList.add("tabulator-footer");return t};c.prototype._initialize=function(){if(this.table.options.footerElement){switch(_typeof(this.table.options.footerElement)){case"string":if("<"===this.table.options.footerElement[0]){this.element.innerHTML=this.table.options.footerElement}else{this.external=!0;this.element=document.querySelector(this.table.options.footerElement)}break;default:this.element=this.table.options.footerElement;break;}}};c.prototype.getElement=function(){return this.element};c.prototype.append=function(t,o){this.activate(o);this.element.appendChild(t);this.table.rowManager.adjustTableSize()};c.prototype.prepend=function(t,o){this.activate(o);this.element.insertBefore(t,this.element.firstChild);this.table.rowManager.adjustTableSize()};c.prototype.remove=function(t){t.parentNode.removeChild(t);this.deactivate()};c.prototype.deactivate=function(t){if(!this.element.firstChild||t){if(!this.external){this.element.parentNode.removeChild(this.element)}this.active=!1}};c.prototype.activate=function(t){if(!this.active){this.active=!0;if(!this.external){this.table.element.appendChild(this.getElement());this.table.element.style.display=""}}if(t){this.links.push(t)}};c.prototype.redraw=function(){this.links.forEach(function(t){t.footerRedraw()})};var u=function t(o,l){this.options={};this.columnManager=null;this.rowManager=null;this.footerManager=null;this.vdomHoz=null;this.browser="";this.browserSlow=!1;this.browserMobile=!1;this.rtl=!1;this.modules={};if(this.initializeElement(o)){this.initializeOptions(l||{});this._create()}t.prototype.comms.register(this)};u.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnMaxWidth:!1,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",headerHozAlign:"",data:[],autoColumns:!1,autoColumnsDefinitions:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,headerSortElement:"<div class='tabulator-arrow'></div>",footerElement:!1,index:"id",textDirection:"auto",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(t,o){return o},downloadComplete:!1,downloadConfig:{},downloadRowRange:"active",dataTree:!1,dataTreeFilter:!0,dataTreeSort:!0,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,virtualDomHoz:!1,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupUpdateOnCellEdit:!1,groupHeader:!1,groupHeaderPrint:null,groupHeaderClipboard:null,groupHeaderHtmlOutput:null,groupHeaderDownload:null,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsConnectedElements:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},movableRowsElementDrop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowClickMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:!1,dataChanged:!1,ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupContextMenu:!1,groupClickMenu:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationMode:"blocking",validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}};u.prototype.initializeOptions=function(t){if(!1!==t.invalidOptionWarnings){for(var o in t){if("undefined"==typeof this.defaultOptions[o]){console.warn("Invalid table constructor option:",o)}}}for(var o in this.defaultOptions){if(o in t){this.options[o]=t[o]}else{if(Array.isArray(this.defaultOptions[o])){this.options[o]=Object.assign([],this.defaultOptions[o])}else if("object"===_typeof(this.defaultOptions[o])&&null!==this.defaultOptions[o]){this.options[o]=Object.assign({},this.defaultOptions[o])}else{this.options[o]=this.defaultOptions[o]}}}};u.prototype.initializeElement=function(t){if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){this.element=t;return!0}else if("string"==typeof t){this.element=document.querySelector(t);if(this.element){return!0}else{console.error("Tabulator Creation Error - no element found matching selector: ",t);return!1}}else{console.error("Tabulator Creation Error - Invalid element provided:",t);return!1}};u.prototype.rtlCheck=function(){var t=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==t.direction){break};case"rtl":this.element.classList.add("tabulator-rtl");this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1;}};u.prototype._mapDepricatedFunctionality=function(){if(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter){if(!this.options.persistence){this.options.persistence={}}}if(this.options.dataEdited){console.warn("DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead");this.options.dataChanged=this.options.dataEdited}if(this.options.downloadDataFormatter){console.warn("DEPRECATION WARNING - downloadDataFormatter option has been deprecated")}if("undefined"!=typeof this.options.clipboardCopyHeader){this.options.columnHeaders=this.options.clipboardCopyHeader;console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")}if(!0!==this.options.printVisibleRows){console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option");this.options.persistence.printRowRange="active"}if(!0!==this.options.printCopyStyle){console.warn("printCopyStyle option is deprecated, you should now use the printStyled option");this.options.persistence.printStyled=this.options.printCopyStyle}if(this.options.persistentLayout){console.warn("persistentLayout option is deprecated, you should now use the persistence option");if(!0!==this.options.persistence&&"undefined"==typeof this.options.persistence.columns){this.options.persistence.columns=!0}}if(this.options.persistentSort){console.warn("persistentSort option is deprecated, you should now use the persistence option");if(!0!==this.options.persistence&&"undefined"==typeof this.options.persistence.sort){this.options.persistence.sort=!0}}if(this.options.persistentFilter){console.warn("persistentFilter option is deprecated, you should now use the persistence option");if(!0!==this.options.persistence&&"undefined"==typeof this.options.persistence.filter){this.options.persistence.filter=!0}}if(this.options.columnVertAlign){console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option");this.options.columnHeaderVertAlign=this.options.columnVertAlign}};u.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select");if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}else if(document.selection){document.selection.empty()}this.element.classList.remove("tabulator-block-select")};u.prototype._create=function(){this._clearObjectPointers();this._mapDepricatedFunctionality();this.bindModules();this.rtlCheck();if("TABLE"===this.element.tagName){if(this.modExists("htmlTableImport",!0)){this.modules.htmlTableImport.parseTable()}}this.columnManager=new t(this);this.rowManager=new a(this);this.footerManager=new c(this);this.columnManager.setRowManager(this.rowManager);this.rowManager.setColumnManager(this.columnManager);if(this.options.virtualDomHoz){this.vdomHoz=new n(this)}this._buildElement();this._loadInitialData()};u.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0);if(!this.options.reactiveData){this.options.data=this.options.data.slice(0)}};u.prototype._buildElement=function(){var t=this,o=this.element,l=this.modules,a=this.options;a.tableBuilding.call(this);o.classList.add("tabulator");o.setAttribute("role","grid");while(o.firstChild){o.removeChild(o.firstChild)}if(a.height){a.height=isNaN(a.height)?a.height:a.height+"px";o.style.height=a.height}if(!1!==a.minHeight){a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px";o.style.minHeight=a.minHeight}if(!1!==a.maxHeight){a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px";o.style.maxHeight=a.maxHeight}this.columnManager.initialize();this.rowManager.initialize();this._detectBrowser();if(this.modExists("layout",!0)){l.layout.initialize(a.layout)}l.localize.initialize();if(!1!==a.headerFilterPlaceholder){l.localize.setHeaderFilterPlaceholder(a.headerFilterPlaceholder)}for(var n in a.langs){l.localize.installLang(n,a.langs[n])}l.localize.setLocale(a.locale);if("string"==typeof a.placeholder){var r=document.createElement("div");r.classList.add("tabulator-placeholder");var s=document.createElement("span");s.innerHTML=a.placeholder;r.appendChild(s);a.placeholder=r}o.appendChild(this.columnManager.getElement());o.appendChild(this.rowManager.getElement());if(a.footerElement){this.footerManager.activate()}if(a.persistence&&this.modExists("persistence",!0)){l.persistence.initialize()}if(a.movableRows&&this.modExists("moveRow")){l.moveRow.initialize()}if(a.autoColumns&&this.options.data){this.columnManager.generateColumnsFromRowData(this.options.data)}if(this.modExists("columnCalcs")){l.columnCalcs.initialize()}this.columnManager.setColumns(a.columns);if(a.dataTree&&this.modExists("dataTree",!0)){l.dataTree.initialize()}if(this.modExists("frozenRows")){this.modules.frozenRows.initialize()}if((a.persistence&&this.modExists("persistence",!0)&&l.persistence.config.sort||a.initialSort)&&this.modExists("sort",!0)){var d=[];if(a.persistence&&this.modExists("persistence",!0)&&l.persistence.config.sort){d=l.persistence.load("sort");if(!1===d&&a.initialSort){d=a.initialSort}}else if(a.initialSort){d=a.initialSort}l.sort.setSort(d)}if((a.persistence&&this.modExists("persistence",!0)&&l.persistence.config.filter||a.initialFilter)&&this.modExists("filter",!0)){var p=[];if(a.persistence&&this.modExists("persistence",!0)&&l.persistence.config.filter){p=l.persistence.load("filter");if(!1===p&&a.initialFilter){p=a.initialFilter}}else if(a.initialFilter){p=a.initialFilter}l.filter.setFilter(p)}if(a.initialHeaderFilter&&this.modExists("filter",!0)){a.initialHeaderFilter.forEach(function(o){var a=t.columnManager.findColumn(o.field);if(a){l.filter.setHeaderFilterValue(a,o.value)}else{console.warn("Column Filter Error - No matching column found:",o.field);return!1}})}if(this.modExists("ajax")){l.ajax.initialize()}if(a.pagination&&this.modExists("page",!0)){l.page.initialize()}if(a.groupBy&&this.modExists("groupRows",!0)){l.groupRows.initialize()}if(this.modExists("keybindings")){l.keybindings.initialize()}if(this.modExists("selectRow")){l.selectRow.clearSelectionData(!0)}if(a.autoResize&&this.modExists("resizeTable")){l.resizeTable.initialize()}if(this.modExists("clipboard")){l.clipboard.initialize()}if(a.printAsHtml&&this.modExists("print")){l.print.initialize()}a.tableBuilt.call(this)};u.prototype._loadInitialData=function(){var t=this;if(t.options.pagination&&t.modExists("page")){t.modules.page.reset(!0,!0);if("local"==t.options.pagination){if(t.options.data.length){t.rowManager.setData(t.options.data,!1,!0)}else{if((t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax")){t.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){if(t.options.paginationInitialPage){t.modules.page.setPage(t.options.paginationInitialPage)}});return}else{t.rowManager.setData(t.options.data,!1,!0)}}if(t.options.paginationInitialPage){t.modules.page.setPage(t.options.paginationInitialPage)}}else{if(t.options.ajaxURL){t.modules.page.setPage(t.options.paginationInitialPage).then(function(){}).catch(function(){})}else{t.rowManager.setData([],!1,!0)}}}else{if(t.options.data.length){t.rowManager.setData(t.options.data)}else{if((t.options.ajaxURL||t.options.ajaxURLGenerator)&&t.modExists("ajax")){t.modules.ajax.loadData(!1,!0).then(function(){}).catch(function(){})}else{t.rowManager.setData(t.options.data,!1,!0)}}}};u.prototype.destroy=function(){var t=this.element;u.prototype.comms.deregister(this);if(this.options.reactiveData&&this.modExists("reactiveData",!0)){this.modules.reactiveData.unwatchData()}this.rowManager.rows.forEach(function(t){t.wipe()});this.rowManager.rows=[];this.rowManager.activeRows=[];this.rowManager.displayRows=[];if(this.options.autoResize&&this.modExists("resizeTable")){this.modules.resizeTable.clearBindings()}if(this.modExists("keybindings")){this.modules.keybindings.clearBindings()}while(t.firstChild){t.removeChild(t.firstChild)}t.classList.remove("tabulator")};u.prototype._detectBrowser=function(){var t=navigator.userAgent||navigator.vendor||window.opera;if(-1<t.indexOf("Trident")){this.browser="ie";this.browserSlow=!0}else if(-1<t.indexOf("Edge")){this.browser="edge";this.browserSlow=!0}else if(-1<t.indexOf("Firefox")){this.browser="firefox";this.browserSlow=!1}else{this.browser="other";this.browserSlow=!1}this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))};u.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()};u.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()};u.prototype.setDataFromLocalFile=function(t){var o=this;return new Promise(function(l,a){var n=document.createElement("input");n.type="file";n.accept=t||".json,application/json";n.addEventListener("change",function(){var t=n.files[0],r=new FileReader,s;r.readAsText(t);r.onload=function(){try{s=JSON.parse(r.result)}catch(t){console.warn("File Load Error - File contents is invalid JSON",t);a(t);return}o.setData(s).then(function(t){l(t)}).catch(function(t){l(t)})};r.onerror=function(){console.warn("File Load Error - Unable to read file");a()}});n.click()})};u.prototype.setData=function(t,o,l){if(this.modExists("ajax")){this.modules.ajax.blockActiveRequest()}return this._setData(t,o,l,!1,!0)};u.prototype._setData=function(t,o,l,a,n){var r=this;if("string"==typeof t){if(0==t.indexOf("{")||0==t.indexOf("[")){return r.rowManager.setData(JSON.parse(t),a,n)}else{if(r.modExists("ajax",!0)){if(o){r.modules.ajax.setParams(o)}if(l){r.modules.ajax.setConfig(l)}r.modules.ajax.setUrl(t);if("remote"==r.options.pagination&&r.modExists("page",!0)){r.modules.page.reset(!0,!0);return r.modules.page.setPage(1)}else{return r.modules.ajax.loadData(a,n)}}}}else{if(t){return r.rowManager.setData(t,a,n)}else{if(r.modExists("ajax")&&(r.modules.ajax.getUrl||r.options.ajaxURLGenerator)){if("remote"==r.options.pagination&&r.modExists("page",!0)){r.modules.page.reset(!0,!0);return r.modules.page.setPage(1)}else{return r.modules.ajax.loadData(a,n)}}else{return r.rowManager.setData([],a,n)}}}};u.prototype.clearData=function(){if(this.modExists("ajax")){this.modules.ajax.blockActiveRequest()}this.rowManager.clearData()};u.prototype.getData=function(t){if(!0===t){console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'");t="active"}return this.rowManager.getData(t)};u.prototype.getDataCount=function(t){if(!0===t){console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'");t="active"}return this.rowManager.getDataCount(t)};u.prototype.searchRows=function(t,o,l){if(this.modExists("filter",!0)){return this.modules.filter.search("rows",t,o,l)}};u.prototype.searchData=function(t,o,l){if(this.modExists("filter",!0)){return this.modules.filter.search("data",t,o,l)}};u.prototype.getHtml=function(t,o,l){if(this.modExists("export",!0)){return this.modules.export.getHtml(t,o,l)}};u.prototype.print=function(t,o,l){if(this.modExists("print",!0)){return this.modules.print.printFullscreen(t,o,l)}};u.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0)){return this.modules.ajax.getUrl()}};u.prototype.replaceData=function(t,o,l){if(this.modExists("ajax")){this.modules.ajax.blockActiveRequest()}return this._setData(t,o,l,!0)};u.prototype.updateData=function(t){var o=this,l=this,a=0;return new Promise(function(n,r){if(o.modExists("ajax")){o.modules.ajax.blockActiveRequest()}if("string"==typeof t){t=JSON.parse(t)}if(t){t.forEach(function(t){var o=l.rowManager.findRow(t[l.options.index]);if(o){a++;o.updateData(t).then(function(){a--;if(!a){n()}})}})}else{console.warn("Update Error - No data provided");r("Update Error - No data provided")}})};u.prototype.addData=function(t,o,l){var a=this;return new Promise(function(n,r){if(a.modExists("ajax")){a.modules.ajax.blockActiveRequest()}if("string"==typeof t){t=JSON.parse(t)}if(t){a.rowManager.addRows(t,o,l).then(function(t){var o=[];t.forEach(function(t){o.push(t.getComponent())});n(o)})}else{console.warn("Update Error - No data provided");r("Update Error - No data provided")}})};u.prototype.updateOrAddData=function(t){var o=this,l=this,a=[],n=0;return new Promise(function(r,s){if(o.modExists("ajax")){o.modules.ajax.blockActiveRequest()}if("string"==typeof t){t=JSON.parse(t)}if(t){t.forEach(function(t){var o=l.rowManager.findRow(t[l.options.index]);n++;if(o){o.updateData(t).then(function(){n--;a.push(o.getComponent());if(!n){r(a)}})}else{l.rowManager.addRows(t).then(function(t){n--;a.push(t[0].getComponent());if(!n){r(a)}})}})}else{console.warn("Update Error - No data provided");s("Update Error - No data provided")}})};u.prototype.getRow=function(t){var o=this.rowManager.findRow(t);if(o){return o.getComponent()}else{console.warn("Find Error - No matching row found:",t);return!1}};u.prototype.getRowFromPosition=function(t,o){var l=this.rowManager.getRowFromPosition(t,o);if(l){return l.getComponent()}else{console.warn("Find Error - No matching row found:",t);return!1}};u.prototype.deleteRow=function(t){var o=this;return new Promise(function(l,a){var r=0,s=0,d=[];function n(){r++;if(r==t.length){if(s){o.rowManager.reRenderInPosition();l()}}}if(!Array.isArray(t)){t=[t]}t.forEach(function(t){var l=o.rowManager.findRow(t,!0);if(l){d.push(l)}else{console.warn("Delete Error - No matching row found:",t);a("Delete Error - No matching row found");n()}});d.sort(function(t,l){return o.rowManager.rows.indexOf(t)>o.rowManager.rows.indexOf(l)?1:-1});d.forEach(function(t){t.delete().then(function(){s++;n()}).catch(function(t){n();a(t)})})})};u.prototype.addRow=function(t,o,l){var a=this;return new Promise(function(n){if("string"==typeof t){t=JSON.parse(t)}a.rowManager.addRows(t,o,l).then(function(t){if(a.modExists("columnCalcs")){a.modules.columnCalcs.recalc(a.rowManager.activeRows)}n(t[0].getComponent())})})};u.prototype.updateOrAddRow=function(t,o){var l=this;return new Promise(function(a,n){var r=l.rowManager.findRow(t);if("string"==typeof o){o=JSON.parse(o)}if(r){r.updateData(o).then(function(){if(l.modExists("columnCalcs")){l.modules.columnCalcs.recalc(l.rowManager.activeRows)}a(r.getComponent())}).catch(function(t){n(t)})}else{r=l.rowManager.addRows(o).then(function(t){if(l.modExists("columnCalcs")){l.modules.columnCalcs.recalc(l.rowManager.activeRows)}a(t[0].getComponent())}).catch(function(t){n(t)})}})};u.prototype.updateRow=function(t,o){var l=this;return new Promise(function(a,n){var r=l.rowManager.findRow(t);if("string"==typeof o){o=JSON.parse(o)}if(r){r.updateData(o).then(function(){a(r.getComponent())}).catch(function(t){n(t)})}else{console.warn("Update Error - No matching row found:",t);n("Update Error - No matching row found")}})};u.prototype.scrollToRow=function(t,o,l){var a=this;return new Promise(function(n,r){var s=a.rowManager.findRow(t);if(s){a.rowManager.scrollToRow(s,o,l).then(function(){n()}).catch(function(t){r(t)})}else{console.warn("Scroll Error - No matching row found:",t);r("Scroll Error - No matching row found")}})};u.prototype.moveRow=function(t,o,l){var a=this.rowManager.findRow(t);if(a){a.moveToRow(o,l)}else{console.warn("Move Error - No matching row found:",t)}};u.prototype.getRows=function(t){if(!0===t){console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'");t="active"}return this.rowManager.getComponents(t)};u.prototype.getRowPosition=function(t,o){var l=this.rowManager.findRow(t);if(l){return this.rowManager.getRowPosition(l,o)}else{console.warn("Position Error - No matching row found:",t);return!1}};u.prototype.copyToClipboard=function(t){if(this.modExists("clipboard",!0)){this.modules.clipboard.copy(t)}};u.prototype.setColumns=function(t){this.columnManager.setColumns(t)};u.prototype.getColumns=function(t){return this.columnManager.getComponents(t)};u.prototype.getColumn=function(t){var o=this.columnManager.findColumn(t);if(o){return o.getComponent()}else{console.warn("Find Error - No matching column found:",t);return!1}};u.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()};u.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0)){return this.modules.persistence.parseColumns(this.columnManager.getColumns())}};u.prototype.setColumnLayout=function(t){if(this.modExists("persistence",!0)){this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,t));return!0}return!1};u.prototype.showColumn=function(t){var o=this.columnManager.findColumn(t);if(o){o.show();if(this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)){this.modules.responsiveLayout.update()}}else{console.warn("Column Show Error - No matching column found:",t);return!1}};u.prototype.hideColumn=function(t){var o=this.columnManager.findColumn(t);if(o){o.hide();if(this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)){this.modules.responsiveLayout.update()}}else{console.warn("Column Hide Error - No matching column found:",t);return!1}};u.prototype.toggleColumn=function(t){var o=this.columnManager.findColumn(t);if(o){if(o.visible){o.hide()}else{o.show()}}else{console.warn("Column Visibility Toggle Error - No matching column found:",t);return!1}};u.prototype.addColumn=function(t,o,l){var a=this;return new Promise(function(n,r){var s=a.columnManager.findColumn(l);a.columnManager.addColumn(t,o,s).then(function(t){n(t.getComponent())}).catch(function(t){r(t)})})};u.prototype.deleteColumn=function(t){var o=this;return new Promise(function(l,a){var n=o.columnManager.findColumn(t);if(n){n.delete().then(function(){l()}).catch(function(t){a(t)})}else{console.warn("Column Delete Error - No matching column found:",t);a()}})};u.prototype.updateColumnDefinition=function(t,o){var l=this;return new Promise(function(a,n){var r=l.columnManager.findColumn(t);if(r){r.updateDefinition(o).then(function(t){a(t)}).catch(function(t){n(t)})}else{console.warn("Column Update Error - No matching column found:",t);n()}})};u.prototype.moveColumn=function(t,o,l){var a=this.columnManager.findColumn(t),n=this.columnManager.findColumn(o);if(a){if(n){this.columnManager.moveColumn(a,n,l)}else{console.warn("Move Error - No matching column found:",n)}}else{console.warn("Move Error - No matching column found:",t)}};u.prototype.scrollToColumn=function(t,o,l){var a=this;return new Promise(function(n,r){var s=a.columnManager.findColumn(t);if(s){a.columnManager.scrollToColumn(s,o,l).then(function(){n()}).catch(function(t){r(t)})}else{console.warn("Scroll Error - No matching column found:",t);r("Scroll Error - No matching column found")}})};u.prototype.setLocale=function(t){this.modules.localize.setLocale(t)};u.prototype.getLocale=function(){return this.modules.localize.getLocale()};u.prototype.getLang=function(t){return this.modules.localize.getLang(t)};u.prototype.redraw=function(t){this.columnManager.redraw(t);this.rowManager.redraw(t)};u.prototype.setHeight=function(t){if("classic"!==this.rowManager.renderMode){this.options.height=isNaN(t)?t:t+"px";this.element.style.height=this.options.height;this.rowManager.setRenderMode();this.rowManager.redraw()}else{console.warn("setHeight function is not available in classic render mode")}};u.prototype.setSort=function(t,o){if(this.modExists("sort",!0)){this.modules.sort.setSort(t,o);this.rowManager.sorterRefresh()}};u.prototype.getSorters=function(){if(this.modExists("sort",!0)){return this.modules.sort.getSort()}};u.prototype.clearSort=function(){if(this.modExists("sort",!0)){this.modules.sort.clear();this.rowManager.sorterRefresh()}};u.prototype.setFilter=function(t,o,l,a){if(this.modExists("filter",!0)){this.modules.filter.setFilter(t,o,l,a);this.rowManager.filterRefresh()}};u.prototype.refreshFilter=function(){if(this.modExists("filter",!0)){this.rowManager.filterRefresh()}};u.prototype.addFilter=function(t,o,l,a){if(this.modExists("filter",!0)){this.modules.filter.addFilter(t,o,l,a);this.rowManager.filterRefresh()}};u.prototype.getFilters=function(t){if(this.modExists("filter",!0)){return this.modules.filter.getFilters(t)}};u.prototype.setHeaderFilterFocus=function(t){if(this.modExists("filter",!0)){var o=this.columnManager.findColumn(t);if(o){this.modules.filter.setHeaderFilterFocus(o)}else{console.warn("Column Filter Focus Error - No matching column found:",t);return!1}}};u.prototype.getHeaderFilterValue=function(t){if(this.modExists("filter",!0)){var o=this.columnManager.findColumn(t);if(o){return this.modules.filter.getHeaderFilterValue(o)}else{console.warn("Column Filter Error - No matching column found:",t)}}};u.prototype.setHeaderFilterValue=function(t,o){if(this.modExists("filter",!0)){var l=this.columnManager.findColumn(t);if(l){this.modules.filter.setHeaderFilterValue(l,o)}else{console.warn("Column Filter Error - No matching column found:",t);return!1}}};u.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0)){return this.modules.filter.getHeaderFilters()}};u.prototype.removeFilter=function(t,o,l){if(this.modExists("filter",!0)){this.modules.filter.removeFilter(t,o,l);this.rowManager.filterRefresh()}};u.prototype.clearFilter=function(t){if(this.modExists("filter",!0)){this.modules.filter.clearFilter(t);this.rowManager.filterRefresh()}};u.prototype.clearHeaderFilter=function(){if(this.modExists("filter",!0)){this.modules.filter.clearHeaderFilter();this.rowManager.filterRefresh()}};u.prototype.selectRow=function(t){if(this.modExists("selectRow",!0)){if(!0===t){console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'");t="active"}this.modules.selectRow.selectRows(t)}};u.prototype.deselectRow=function(t){if(this.modExists("selectRow",!0)){this.modules.selectRow.deselectRows(t)}};u.prototype.toggleSelectRow=function(t){if(this.modExists("selectRow",!0)){this.modules.selectRow.toggleRow(t)}};u.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0)){return this.modules.selectRow.getSelectedRows()}};u.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0)){return this.modules.selectRow.getSelectedData()}};u.prototype.getInvalidCells=function(){if(this.modExists("validate",!0)){return this.modules.validate.getInvalidCells()}};u.prototype.clearCellValidation=function(t){var o=this;if(this.modExists("validate",!0)){if(!t){t=this.modules.validate.getInvalidCells()}if(!Array.isArray(t)){t=[t]}t.forEach(function(t){o.modules.validate.clearValidation(t._getSelf())})}};u.prototype.validate=function(){var t=[];this.rowManager.rows.forEach(function(o){var l=o.validate();if(!0!==l){t=t.concat(l)}});return t.length?t:!0};u.prototype.setMaxPage=function(t){if(this.options.pagination&&this.modExists("page")){this.modules.page.setMaxPage(t)}else{return!1}};u.prototype.setPage=function(t){if(this.options.pagination&&this.modExists("page")){return this.modules.page.setPage(t)}else{return new Promise(function(t,o){o()})}};u.prototype.setPageToRow=function(t){var o=this;return new Promise(function(l,a){if(o.options.pagination&&o.modExists("page")){t=o.rowManager.findRow(t);if(t){o.modules.page.setPageToRow(t).then(function(){l()}).catch(function(){a()})}else{a()}}else{a()}})};u.prototype.setPageSize=function(t){if(this.options.pagination&&this.modExists("page")){this.modules.page.setPageSize(t);this.modules.page.setPage(1).then(function(){}).catch(function(){})}else{return!1}};u.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0)){return this.modules.page.getPageSize()}};u.prototype.previousPage=function(){if(this.options.pagination&&this.modExists("page")){this.modules.page.previousPage()}else{return!1}};u.prototype.nextPage=function(){if(this.options.pagination&&this.modExists("page")){this.modules.page.nextPage()}else{return!1}};u.prototype.getPage=function(){if(this.options.pagination&&this.modExists("page")){return this.modules.page.getPage()}else{return!1}};u.prototype.getPageMax=function(){if(this.options.pagination&&this.modExists("page")){return this.modules.page.getPageMax()}else{return!1}};u.prototype.setGroupBy=function(t){if(this.modExists("groupRows",!0)){this.options.groupBy=t;this.modules.groupRows.initialize();this.rowManager.refreshActiveData("display");if(this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group){this.modules.persistence.save("group")}}else{return!1}};u.prototype.setGroupValues=function(t){if(this.modExists("groupRows",!0)){this.options.groupValues=t;this.modules.groupRows.initialize();this.rowManager.refreshActiveData("display");if(this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group){this.modules.persistence.save("group")}}else{return!1}};u.prototype.setGroupStartOpen=function(t){if(this.modExists("groupRows",!0)){this.options.groupStartOpen=t;this.modules.groupRows.initialize();if(this.options.groupBy){this.rowManager.refreshActiveData("group");if(this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group){this.modules.persistence.save("group")}}else{console.warn("Grouping Update - cant refresh view, no groups have been set")}}else{return!1}};u.prototype.setGroupHeader=function(t){if(this.modExists("groupRows",!0)){this.options.groupHeader=t;this.modules.groupRows.initialize();if(this.options.groupBy){this.rowManager.refreshActiveData("group");if(this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group){this.modules.persistence.save("group")}}else{console.warn("Grouping Update - cant refresh view, no groups have been set")}}else{return!1}};u.prototype.getGroups=function(){if(this.modExists("groupRows",!0)){return this.modules.groupRows.getGroups(!0)}else{return!1}};u.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0)){return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()}};u.prototype.getEditedCells=function(){if(this.modExists("edit",!0)){return this.modules.edit.getEditedCells()}};u.prototype.clearCellEdited=function(t){var o=this;if(this.modExists("edit",!0)){if(!t){t=this.modules.edit.getEditedCells()}if(!Array.isArray(t)){t=[t]}t.forEach(function(t){o.modules.edit.clearEdited(t._getSelf())})}};u.prototype.getCalcResults=function(){if(this.modExists("columnCalcs",!0)){return this.modules.columnCalcs.getResults()}else{return!1}};u.prototype.recalc=function(){if(this.modExists("columnCalcs",!0)){this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)}};u.prototype.navigatePrev=function(){var t=!1;if(this.modExists("edit",!0)){t=this.modules.edit.currentCell;if(t){return t.nav().prev()}}return!1};u.prototype.navigateNext=function(){var t=!1;if(this.modExists("edit",!0)){t=this.modules.edit.currentCell;if(t){return t.nav().next()}}return!1};u.prototype.navigateLeft=function(){var t=!1;if(this.modExists("edit",!0)){t=this.modules.edit.currentCell;if(t){e.preventDefault();return t.nav().left()}}return!1};u.prototype.navigateRight=function(){var t=!1;if(this.modExists("edit",!0)){t=this.modules.edit.currentCell;if(t){e.preventDefault();return t.nav().right()}}return!1};u.prototype.navigateUp=function(){var t=!1;if(this.modExists("edit",!0)){t=this.modules.edit.currentCell;if(t){e.preventDefault();return t.nav().up()}}return!1};u.prototype.navigateDown=function(){var t=!1;if(this.modExists("edit",!0)){t=this.modules.edit.currentCell;if(t){e.preventDefault();return t.nav().down()}}return!1};u.prototype.undo=function(){if(this.options.history&&this.modExists("history",!0)){return this.modules.history.undo()}else{return!1}};u.prototype.redo=function(){if(this.options.history&&this.modExists("history",!0)){return this.modules.history.redo()}else{return!1}};u.prototype.getHistoryUndoSize=function(){if(this.options.history&&this.modExists("history",!0)){return this.modules.history.getHistoryUndoSize()}else{return!1}};u.prototype.getHistoryRedoSize=function(){if(this.options.history&&this.modExists("history",!0)){return this.modules.history.getHistoryRedoSize()}else{return!1}};u.prototype.clearHistory=function(){if(this.options.history&&this.modExists("history",!0)){return this.modules.history.clear()}else{return!1}};u.prototype.download=function(t,o,l,a){if(this.modExists("download",!0)){this.modules.download.download(t,o,l,a)}};u.prototype.downloadToTab=function(t,o,l,a){if(this.modExists("download",!0)){this.modules.download.download(t,o,l,a,!0)}};u.prototype.tableComms=function(t,o,l,a){this.modules.comms.receive(t,o,l,a)};u.prototype.moduleBindings={};u.prototype.extendModule=function(t,o,l){if(u.prototype.moduleBindings[t]){var a=u.prototype.moduleBindings[t].prototype[o];if(a){if("object"==("undefined"==typeof l?"undefined":_typeof(l))){for(var n in l){a[n]=l[n]}}else{console.warn("Module Error - Invalid value type, it must be an object")}}else{console.warn("Module Error - property does not exist:",o)}}else{console.warn("Module Error - module does not exist:",t)}};u.prototype.registerModule=function(t,o){this;u.prototype.moduleBindings[t]=o};u.prototype.bindModules=function(){this.modules={};for(var t in u.prototype.moduleBindings){this.modules[t]=new u.prototype.moduleBindings[t](this)}};u.prototype.modExists=function(t,o){if(this.modules[t]){return!0}else{if(o){console.error("Tabulator Module Not Installed: "+t)}return!1}};u.prototype.helpers={elVisible:function(t){return!(0>=t.offsetWidth&&0>=t.offsetHeight)},elOffset:function(t){var o=t.getBoundingClientRect();return{top:o.top+window.pageYOffset-document.documentElement.clientTop,left:o.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(t){var o=Object.assign(Array.isArray(t)?[]:{},t);for(var l in t){if(null!=t[l]&&"object"===_typeof(t[l])){if(t[l]instanceof Date){o[l]=new Date(t[l])}else{o[l]=this.deepClone(t[l])}}}return o}};u.prototype.comms={tables:[],register:function(t){u.prototype.comms.tables.push(t)},deregister:function(t){var o=u.prototype.comms.tables.indexOf(t);if(-1<o){u.prototype.comms.tables.splice(o,1)}},lookupTable:function(t,o){var l=[],a,n;if("string"==typeof t){a=document.querySelectorAll(t);if(a.length){for(var r=0;r<a.length;r++){n=u.prototype.comms.matchElement(a[r]);if(n){l.push(n)}}}}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement||t instanceof u){n=u.prototype.comms.matchElement(t);if(n){l.push(n)}}else if(Array.isArray(t)){t.forEach(function(t){l=l.concat(u.prototype.comms.lookupTable(t))})}else{if(!o){console.warn("Table Connection Error - Invalid Selector",t)}}return l},matchElement:function(t){return u.prototype.comms.tables.find(function(o){return t instanceof u?o===t:o.element===t})}};u.prototype.findTable=function(t){var o=u.prototype.comms.lookupTable(t,!0);return Array.isArray(o)&&!o.length?!1:o};var m=function(t){this.table=t;this.mode=null};m.prototype.initialize=function(t){if(this.modes[t]){this.mode=t}else{console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t);this.mode="fitData"}this.table.element.setAttribute("tabulator-layout",this.mode)};m.prototype.getMode=function(){return this.mode};m.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex);if(0===this.mode.indexOf("fitData")&&this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns){this.table.modules.persistence.save("columns")}};m.prototype.modes={fitData:function(t){if(this.table.options.virtualDomHoz){this.table.vdomHoz.fitDataLayoutOverride()}else{t.forEach(function(t){t.reinitializeWidth()})}if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}},fitDataFill:function(t){t.forEach(function(t){t.reinitializeWidth()});if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}},fitDataTable:function(t){t.forEach(function(t){t.reinitializeWidth()});if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}},fitDataStretch:function(t){var o=this,l=0,a=this.table.rowManager.element.clientWidth,n=0,r=!1;t.forEach(function(t){if(!t.widthFixed){t.reinitializeWidth()}if(o.table.options.responsiveLayout?t.modules.responsive.visible:t.visible){r=t}if(t.visible){l+=t.getWidth()}});if(r){n=a-l+r.getWidth();if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){r.setWidth(0);this.table.modules.responsiveLayout.update()}if(0<n){r.setWidth(n)}else{r.reinitializeWidth()}}else{if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}}},fitColumns:function(t){var a=this,n=a.table.element.clientWidth,r=0,s=0,d=0,p=0,c=[],u=[],m=0,g=0,h=0;function o(t){var o;if("string"==typeof t){if(-1<t.indexOf("%")){o=n/100*parseInt(t)}else{o=parseInt(t)}}else{o=t}return o}function l(t,a,n,r){var c=[],u=0,m=0,g=0,h=d,b=0,f=0,y=[];function s(t){return n*(t.column.definition.widthGrow||1)}function p(t){return o(t.width)-n*(t.column.definition.widthShrink||0)}t.forEach(function(t){var o=r?p(t):s(t);if(t.column.minWidth>=o){c.push(t)}else{if(t.column.maxWidth&&t.column.maxWidth<o){t.width=t.column.maxWidth;a-=t.column.maxWidth;h-=r?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1;if(h){n=Math.floor(a/h)}}else{y.push(t);f+=r?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1}}});if(c.length){c.forEach(function(t){u+=r?t.width-t.column.minWidth:t.column.minWidth;t.width=t.column.minWidth});m=a-u;g=f?Math.floor(m/f):m;b=m-g*f;b+=l(y,m,g,r)}else{b=f?a-Math.floor(a/f)*f:a;y.forEach(function(t){t.width=r?p(t):s(t)})}return b}if(this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)){this.table.modules.responsiveLayout.update()}if(this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight){n-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth}t.forEach(function(t){var l,a,n;if(t.visible){l=t.definition.width;a=parseInt(t.minWidth);if(l){n=o(l);r+=n>a?n:a;if(t.definition.widthShrink){u.push({column:t,width:n>a?n:a});m+=t.definition.widthShrink}}else{c.push({column:t,width:0});d+=t.definition.widthGrow||1}}});s=n-r;p=Math.floor(s/d);var h=l(c,s,p,!1);if(c.length&&0<h){c[c.length-1].width+=+h}c.forEach(function(t){s-=t.width});g=Math.abs(h)+s;if(0<g&&m){h=l(u,g,Math.floor(g/m),!0)}if(u.length){u[u.length-1].width-=h}c.forEach(function(t){t.column.setWidth(t.width)});u.forEach(function(t){t.column.setWidth(t.width)})}};u.prototype.registerModule("layout",m);var g=function(t){this.table=t;this.locale="default";this.lang=!1;this.bindings={};this.langList={}};g.prototype.initialize=function(){this.langList=u.prototype.helpers.deepClone(this.langs)};g.prototype.setHeaderFilterPlaceholder=function(t){this.langList.default.headerFilters.default=t};g.prototype.setHeaderFilterColumnPlaceholder=function(t,o){this.langList.default.headerFilters.columns[t]=o;if(this.lang&&!this.lang.headerFilters.columns[t]){this.lang.headerFilters.columns[t]=o}};g.prototype.installLang=function(t,o){if(this.langList[t]){this._setLangProp(this.langList[t],o)}else{this.langList[t]=o}};g.prototype._setLangProp=function(t,o){for(var l in o){if(t[l]&&"object"==_typeof(t[l])){this._setLangProp(t[l],o[l])}else{t[l]=o[l]}}};g.prototype.setLocale=function(t){var l=this;t=t||"default";function o(t,l){for(var a in t){if("object"==_typeof(t[a])){if(!l[a]){l[a]={}}o(t[a],l[a])}else{l[a]=t[a]}}}if(!0===t&&navigator.language){t=navigator.language.toLowerCase()}if(t){if(!l.langList[t]){var a=t.split("-")[0];if(l.langList[a]){console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,a);t=a}else{console.warn("Localization Error - Matching locale not found, using default: ",t);t="default"}}}l.locale=t;l.lang=u.prototype.helpers.deepClone(l.langList.default||{});if("default"!=t){o(l.langList[t],l.lang)}l.table.options.localized.call(l.table,l.locale,l.lang);l._executeBindings()};g.prototype.getLocale=function(){return self.locale};g.prototype.getLang=function(t){return t?this.langList[t]:this.lang};g.prototype.getText=function(t,o){var t=o?t+"|"+o:t,l=t.split("|"),a=this._getLangElement(l,this.locale);return a||""};g.prototype._getLangElement=function(t){var o=this,l=o.lang;t.forEach(function(t){var o;if(l){o=l[t];if("undefined"!=typeof o){l=o}else{l=!1}}});return l};g.prototype.bind=function(t,o){if(!this.bindings[t]){this.bindings[t]=[]}this.bindings[t].push(o);o(this.getText(t),this.lang)};g.prototype._executeBindings=function(){var t=this,o=function(o){t.bindings[o].forEach(function(l){l(t.getText(o),t.lang)})};for(var l in t.bindings){o(l)}};g.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}};u.prototype.registerModule("localize",g);var h=function(t){this.table=t};h.prototype.getConnections=function(t){var o=this,l=[],a;a=u.prototype.comms.lookupTable(t);a.forEach(function(t){if(o.table!==t){l.push(t)}});return l};h.prototype.send=function(t,o,l,a){var n=this,r=this.getConnections(t);r.forEach(function(t){t.tableComms(n.table.element,o,l,a)});if(!r.length&&t){console.warn("Table Connection Error - No tables matching selector found",t)}};h.prototype.receive=function(t,o,l,a){if(this.table.modExists(o)){return this.table.modules[o].commsReceived(t,l,a)}else{console.warn("Inter-table Comms Error - no such module:",o)}};u.prototype.registerModule("comms",h);var b=function(t){this.table=t;this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]};b.prototype.initializeColumn=function(t){var o=this,l=!1,a={};this.allowedTypes.forEach(function(n){var r="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),s;if(t.definition[r]){s=o.lookupAccessor(t.definition[r]);if(s){l=!0;a[r]={accessor:s,params:t.definition[r+"Params"]||{}}}}});if(l){t.modules.accessor=a}};b.prototype.lookupAccessor=function(t){var o=!1;switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":if(this.accessors[t]){o=this.accessors[t]}else{console.warn("Accessor Error - No such accessor found, ignoring: ",t)}break;case"function":o=t;break;}return o};b.prototype.transformRow=function(t,o){var l="accessor"+(o.charAt(0).toUpperCase()+o.slice(1)),a=t.getComponent(),n=u.prototype.helpers.deepClone(t.data||{});this.table.columnManager.traverse(function(t){var r,s,d,p;if(t.modules.accessor){s=t.modules.accessor[l]||t.modules.accessor.accessor||!1;if(s){r=t.getFieldValue(n);if("undefined"!=r){p=t.getComponent();d="function"==typeof s.params?s.params(r,n,o,p,a):s.params;t.setFieldValue(n,s.accessor(r,n,o,d,p,a))}}}});return n},b.prototype.accessors={};u.prototype.registerModule("accessor",b);var f=function(t){this.table=t;this.config=!1;this.url="";this.urlGenerator=!1;this.params=!1;this.loaderElement=this.createLoaderElement();this.msgElement=this.createMsgElement();this.loadingElement=!1;this.errorElement=!1;this.loaderPromise=!1;this.progressiveLoad=!1;this.loading=!1;this.requestOrder=0};f.prototype.initialize=function(){var t;this.loaderElement.appendChild(this.msgElement);if(this.table.options.ajaxLoaderLoading){if("string"==typeof this.table.options.ajaxLoaderLoading){t=document.createElement("template");t.innerHTML=this.table.options.ajaxLoaderLoading.trim();this.loadingElement=t.content.firstChild}else{this.loadingElement=this.table.options.ajaxLoaderLoading}}this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise;this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator;if(this.table.options.ajaxLoaderError){if("string"==typeof this.table.options.ajaxLoaderError){t=document.createElement("template");t.innerHTML=this.table.options.ajaxLoaderError.trim();this.errorElement=t.content.firstChild}else{this.errorElement=this.table.options.ajaxLoaderError}}if(this.table.options.ajaxParams){this.setParams(this.table.options.ajaxParams)}if(this.table.options.ajaxConfig){this.setConfig(this.table.options.ajaxConfig)}if(this.table.options.ajaxURL){this.setUrl(this.table.options.ajaxURL)}if(this.table.options.ajaxProgressiveLoad){if(this.table.options.pagination){this.progressiveLoad=!1;console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")}else{if(this.table.modExists("page")){this.progressiveLoad=this.table.options.ajaxProgressiveLoad;this.table.modules.page.initializeProgressive(this.progressiveLoad)}else{console.error("Pagination plugin is required for progressive ajax loading")}}}};f.prototype.createLoaderElement=function(){var t=document.createElement("div");t.classList.add("tabulator-loader");return t};f.prototype.createMsgElement=function(){var t=document.createElement("div");t.classList.add("tabulator-loader-msg");t.setAttribute("role","alert");return t};f.prototype.setParams=function(t,o){if(o){this.params=this.params||{};for(var l in t){this.params[l]=t[l]}}else{this.params=t}};f.prototype.getParams=function(){return this.params||{}};f.prototype.setConfig=function(t){this._loadDefaultConfig();if("string"==typeof t){this.config.method=t}else{for(var o in t){this.config[o]=t[o]}}};f.prototype._loadDefaultConfig=function(t){var o=this;if(!o.config||t){o.config={};for(var l in o.defaultConfig){o.config[l]=o.defaultConfig[l]}}};f.prototype.setUrl=function(t){this.url=t};f.prototype.getUrl=function(){return this.url};f.prototype.loadData=function(t,o){this;if(this.progressiveLoad){return this._loadDataProgressive()}else{return this._loadDataStandard(t,o)}};f.prototype.nextPage=function(t){var o;if(!this.loading){o=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight;if(t<o){this.table.modules.page.nextPage().then(function(){}).catch(function(){})}}};f.prototype.blockActiveRequest=function(){this.requestOrder++};f.prototype._loadDataProgressive=function(){this.table.rowManager.setData([]);return this.table.modules.page.setPage(1)};f.prototype._loadDataStandard=function(t,o){var l=this;return new Promise(function(a,n){l.sendRequest(t).then(function(r){l.table.rowManager.setData(r,t,o).then(function(){a()}).catch(function(t){n(t)})}).catch(function(t){n(t)})})};f.prototype.generateParamsList=function(t,o){var l=this,a=[];o=o||"";if(Array.isArray(t)){t.forEach(function(t,n){a=a.concat(l.generateParamsList(t,o?o+"["+n+"]":n))})}else if("object"===("undefined"==typeof t?"undefined":_typeof(t))){for(var n in t){a=a.concat(l.generateParamsList(t[n],o?o+"["+n+"]":n))}}else{a.push({key:o,value:t})}return a};f.prototype.serializeParams=function(t){var o=this.generateParamsList(t),l=[];o.forEach(function(t){l.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))});return l.join("&")};f.prototype.sendRequest=function(t){var o=this,l=this,a=l.url,n;l.requestOrder++;n=l.requestOrder;l._loadDefaultConfig();return new Promise(function(r,s){if(!1!==l.table.options.ajaxRequesting.call(o.table,l.url,l.params)){l.loading=!0;if(!t){l.showLoader()}o.loaderPromise(a,l.config,l.params).then(function(t){if(n===l.requestOrder){if(l.table.options.ajaxResponse){t=l.table.options.ajaxResponse.call(l.table,l.url,l.params,t)}r(t);l.hideLoader();l.loading=!1}else{console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")}}).catch(function(t){console.error("Ajax Load Error: ",t);l.table.options.ajaxError.call(l.table,t);l.showError();setTimeout(function(){l.hideLoader()},3e3);l.loading=!1;s(t)})}else{s()}})};f.prototype.showLoader=function(){var t="function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader;if(t){this.hideLoader();while(this.msgElement.firstChild){this.msgElement.removeChild(this.msgElement.firstChild)}this.msgElement.classList.remove("tabulator-error");this.msgElement.classList.add("tabulator-loading");if(this.loadingElement){this.msgElement.appendChild(this.loadingElement)}else{this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading")}this.table.element.appendChild(this.loaderElement)}};f.prototype.showError=function(){this.hideLoader();while(this.msgElement.firstChild){this.msgElement.removeChild(this.msgElement.firstChild)}this.msgElement.classList.remove("tabulator-loading");this.msgElement.classList.add("tabulator-error");if(this.errorElement){this.msgElement.appendChild(this.errorElement)}else{this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error")}this.table.element.appendChild(this.loaderElement)};f.prototype.hideLoader=function(){if(this.loaderElement.parentNode){this.loaderElement.parentNode.removeChild(this.loaderElement)}};f.prototype.defaultConfig={method:"GET"};f.prototype.defaultURLGenerator=function(t,o,l){if(t){if(l&&Object.keys(l).length){if(!o.method||"get"==o.method.toLowerCase()){o.method="get";t+=(t.includes("?")?"&":"?")+this.modules.ajax.serializeParams(l)}}}return t};f.prototype.defaultLoaderPromise=function(t,o,l){var a=this,n;return new Promise(function(r,s){t=a.urlGenerator.call(a.table,t,o,l);if("GET"!=o.method.toUpperCase()){n="object"===_typeof(a.table.options.ajaxContentType)?a.table.options.ajaxContentType:a.contentTypeFormatters[a.table.options.ajaxContentType];if(n){for(var d in n.headers){if(!o.headers){o.headers={}}if("undefined"==typeof o.headers[d]){o.headers[d]=n.headers[d]}}o.body=n.body.call(a,t,o,l)}else{console.warn("Ajax Error - Invalid ajaxContentType value:",a.table.options.ajaxContentType)}}if(t){if("undefined"==typeof o.headers){o.headers={}}if("undefined"==typeof o.headers.Accept){o.headers.Accept="application/json"}if("undefined"==typeof o.headers["X-Requested-With"]){o.headers["X-Requested-With"]="XMLHttpRequest"}if("undefined"==typeof o.mode){o.mode="cors"}if("cors"==o.mode){if("undefined"==typeof o.headers["Access-Control-Allow-Origin"]){o.headers["Access-Control-Allow-Origin"]=window.location.origin}if("undefined"==typeof o.credentials){o.credentials="same-origin"}}else{if("undefined"==typeof o.credentials){o.credentials="include"}}fetch(t,o).then(function(t){if(t.ok){t.json().then(function(t){r(t)}).catch(function(t){s(t);console.warn("Ajax Load Error - Invalid JSON returned",t)})}else{console.error("Ajax Load Error - Connection Error: "+t.status,t.statusText);s(t)}}).catch(function(t){console.error("Ajax Load Error - Connection Error: ",t);s(t)})}else{console.warn("Ajax Load Error - No URL Set");r([])}})};f.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(t,o,l){return JSON.stringify(l)}},form:{headers:{},body:function(t,o,l){var a=this.generateParamsList(l),n=new FormData;a.forEach(function(t){n.append(t.key,t.value)});return n}}};u.prototype.registerModule("ajax",f);var y=function(t){this._row=t};y.prototype.getData=function(t){return this._row.getData(t)};y.prototype.getElement=function(){return this._row.getElement()};y.prototype.getTable=function(){return this._row.table};y.prototype.getCells=function(){var t=[];this._row.getCells().forEach(function(o){t.push(o.getComponent())});return t};y.prototype.getCell=function(t){var o=this._row.getCell(t);return o?o.getComponent():!1};y.prototype._getSelf=function(){return this._row};var w=function(t){this.table=t;this.topCalcs=[];this.botCalcs=[];this.genColumn=!1;this.topElement=this.createElement();this.botElement=this.createElement();this.topRow=!1;this.botRow=!1;this.topInitialized=!1;this.botInitialized=!1;this.initialize()};w.prototype.createElement=function(){var t=document.createElement("div");t.classList.add("tabulator-calcs-holder");return t};w.prototype.initialize=function(){this.genColumn=new l({field:"value"},this)};w.prototype.registerColumnField=function(){};w.prototype.initializeColumn=function(t){var o=t.definition,l={topCalcParams:o.topCalcParams||{},botCalcParams:o.bottomCalcParams||{}};if(o.topCalc){switch(_typeof(o.topCalc)){case"string":if(this.calculations[o.topCalc]){l.topCalc=this.calculations[o.topCalc]}else{console.warn("Column Calc Error - No such calculation found, ignoring: ",o.topCalc)}break;case"function":l.topCalc=o.topCalc;break;}if(l.topCalc){t.modules.columnCalcs=l;this.topCalcs.push(t);if("group"!=this.table.options.columnCalcs){this.initializeTopRow()}}}if(o.bottomCalc){switch(_typeof(o.bottomCalc)){case"string":if(this.calculations[o.bottomCalc]){l.botCalc=this.calculations[o.bottomCalc]}else{console.warn("Column Calc Error - No such calculation found, ignoring: ",o.bottomCalc)}break;case"function":l.botCalc=o.bottomCalc;break;}if(l.botCalc){t.modules.columnCalcs=l;this.botCalcs.push(t);if("group"!=this.table.options.columnCalcs){this.initializeBottomRow()}}}};w.prototype.removeCalcs=function(){var t=!1;if(this.topInitialized){this.topInitialized=!1;this.topElement.parentNode.removeChild(this.topElement);t=!0}if(this.botInitialized){this.botInitialized=!1;this.table.footerManager.remove(this.botElement);t=!0}if(t){this.table.rowManager.adjustTableSize()}};w.prototype.initializeTopRow=function(){if(!this.topInitialized){this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling);this.topInitialized=!0}};w.prototype.initializeBottomRow=function(){if(!this.botInitialized){this.table.footerManager.prepend(this.botElement);this.botInitialized=!0}};w.prototype.scrollHorizontal=function(t){if(this.botInitialized&&this.botRow){this.botRow.getElement().style.marginLeft=-t+"px"}};w.prototype.recalc=function(t){var o;if(this.topInitialized||this.botInitialized){this.rowsToData(t);if(this.topInitialized){if(this.topRow){this.topRow.deleteCells()}o=this.generateRow("top",this.rowsToData(t));this.topRow=o;while(this.topElement.firstChild){this.topElement.removeChild(this.topElement.firstChild)}this.topElement.appendChild(o.getElement());o.initialize(!0)}if(this.botInitialized){if(this.botRow){this.botRow.deleteCells()}o=this.generateRow("bottom",this.rowsToData(t));this.botRow=o;while(this.botElement.firstChild){this.botElement.removeChild(this.botElement.firstChild)}this.botElement.appendChild(o.getElement());o.initialize(!0)}this.table.rowManager.adjustTableSize();if(this.table.modExists("frozenColumns")){this.table.modules.frozenColumns.layout()}}};w.prototype.recalcRowGroup=function(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))};w.prototype.recalcAll=function(){var t=this;if(this.topCalcs.length||this.botCalcs.length){if("group"!==this.table.options.columnCalcs){this.recalc(this.table.rowManager.activeRows)}if(this.table.options.groupBy&&"table"!==this.table.options.columnCalcs){var o=table.modules.groupRows.getChildGroups();o.forEach(function(o){t.recalcGroup(o)})}}};w.prototype.recalcGroup=function(t){var o,l;if(t){if(t.calcs){if(t.calcs.bottom){o=this.rowsToData(t.rows);l=this.generateRowData("bottom",o);t.calcs.bottom.updateData(l);t.calcs.bottom.reinitialize()}if(t.calcs.top){o=this.rowsToData(t.rows);l=this.generateRowData("top",o);t.calcs.top.updateData(l);t.calcs.top.reinitialize()}}}};w.prototype.generateTopRow=function(t){return this.generateRow("top",this.rowsToData(t))};w.prototype.generateBottomRow=function(t){return this.generateRow("bottom",this.rowsToData(t))};w.prototype.rowsToData=function(t){var o=this,l=[];t.forEach(function(t){l.push(t.getData());if(o.table.options.dataTree&&o.table.options.dataTreeChildColumnCalcs){if(t.modules.dataTree.open){var a=o.rowsToData(o.table.modules.dataTree.getFilteredTreeChildren(t));l=l.concat(a)}}});return l};w.prototype.generateRow=function(t,o){var l=this,a=this.generateRowData(t,o),n;if(l.table.modExists("mutator")){l.table.modules.mutator.disable()}n=new s(a,this,"calc");if(l.table.modExists("mutator")){l.table.modules.mutator.enable()}n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+t);n.component=!1;n.getComponent=function(){if(!this.component){this.component=new y(this)}return this.component};n.generateCells=function(){var o=[];l.table.columnManager.columnsByIndex.forEach(function(a){l.genColumn.setField(a.getField());l.genColumn.hozAlign=a.hozAlign;if(a.definition[t+"CalcFormatter"]&&l.table.modExists("format")){l.genColumn.modules.format={formatter:l.table.modules.format.getFormatter(a.definition[t+"CalcFormatter"]),params:a.definition[t+"CalcFormatterParams"]||{}}}else{l.genColumn.modules.format={formatter:l.table.modules.format.getFormatter("plaintext"),params:{}}}l.genColumn.definition.cssClass=a.definition.cssClass;var r=new p(l.genColumn,n);r.getElement();r.column=a;r.setWidth();a.cells.push(r);o.push(r);if(!a.visible){r.hide()}});this.cells=o};return n};w.prototype.generateRowData=function(t,o){var l={},a="top"==t?this.topCalcs:this.botCalcs,n="top"==t?"topCalc":"botCalc",r,s;a.forEach(function(t){var a=[];if(t.modules.columnCalcs&&t.modules.columnCalcs[n]){o.forEach(function(o){a.push(t.getFieldValue(o))});s=n+"Params";r="function"==typeof t.modules.columnCalcs[s]?t.modules.columnCalcs[s](a,o):t.modules.columnCalcs[s];t.setFieldValue(l,t.modules.columnCalcs[n](a,o,r))}});return l};w.prototype.hasTopCalcs=function(){return!!this.topCalcs.length};w.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length};w.prototype.redraw=function(){if(this.topRow){this.topRow.normalizeHeight(!0)}if(this.botRow){this.botRow.normalizeHeight(!0)}};w.prototype.getResults=function(){var t=this,o={},l;if(this.table.options.groupBy&&this.table.modExists("groupRows")){l=this.table.modules.groupRows.getGroups(!0);l.forEach(function(l){o[l.getKey()]=t.getGroupResults(l)})}else{o={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}}}return o};w.prototype.getGroupResults=function(t){var o=this,l=t._getSelf(),a=t.getSubGroups(),n={},r={};a.forEach(function(t){n[t.getKey()]=o.getGroupResults(t)});r={top:l.calcs.top?l.calcs.top.getData():{},bottom:l.calcs.bottom?l.calcs.bottom.getData():{},groups:n};return r};w.prototype.calculations={avg:function(t,o,l){var a=0,n="undefined"!=typeof l.precision?l.precision:2;if(t.length){a=t.reduce(function(t,o){return+t+ +o});a=a/t.length;a=!1!==n?a.toFixed(n):a}return parseFloat(a).toString()},max:function(t,o,l){var a=null,n="undefined"!=typeof l.precision?l.precision:!1;t.forEach(function(t){t=+t;if(t>a||null===a){a=t}});return null!==a?!1!==n?a.toFixed(n):a:""},min:function(t,o,l){var a=null,n="undefined"!=typeof l.precision?l.precision:!1;t.forEach(function(t){t=+t;if(t<a||null===a){a=t}});return null!==a?!1!==n?a.toFixed(n):a:""},sum:function(t,o,l){var a=0,n="undefined"!=typeof l.precision?l.precision:!1;if(t.length){t.forEach(function(t){t=+t;a+=!isNaN(t)?+t:0})}return!1!==n?a.toFixed(n):a},concat:function(t){var o=0;if(t.length){o=t.reduce(function(t,o){return t+""+(o+"")})}return o},count:function(t){var o=0;if(t.length){t.forEach(function(t){if(t){o++}})}return o}};u.prototype.registerModule("columnCalcs",w);var v=function(t){this.table=t;this.mode=!0;this.pasteParser=function(){};this.pasteAction=function(){};this.customSelection=!1;this.rowRange=!1;this.blocked=!0};v.prototype.initialize=function(){var t=this;this.mode=this.table.options.clipboard;this.rowRange=this.table.options.clipboardCopyRowRange;if(!0===this.mode||"copy"===this.mode){this.table.element.addEventListener("copy",function(o){var l,a,n;if(!t.blocked){o.preventDefault();if(t.customSelection){l=t.customSelection;if(t.table.options.clipboardCopyFormatter){l=t.table.options.clipboardCopyFormatter("plain",l)}}else{var n=t.table.modules.export.generateExportList(t.table.options.clipboardCopyConfig,t.table.options.clipboardCopyStyled,t.rowRange,"clipboard");a=t.table.modules.export.genereateHTMLTable(n);l=a?t.generatePlainContent(n):"";if(t.table.options.clipboardCopyFormatter){l=t.table.options.clipboardCopyFormatter("plain",l);a=t.table.options.clipboardCopyFormatter("html",a)}}if(window.clipboardData&&window.clipboardData.setData){window.clipboardData.setData("Text",l)}else if(o.clipboardData&&o.clipboardData.setData){o.clipboardData.setData("text/plain",l);if(a){o.clipboardData.setData("text/html",a)}}else if(o.originalEvent&&o.originalEvent.clipboardData.setData){o.originalEvent.clipboardData.setData("text/plain",l);if(a){o.originalEvent.clipboardData.setData("text/html",a)}}t.table.options.clipboardCopied.call(t.table,l,a);t.reset()}})}if(!0===this.mode||"paste"===this.mode){this.table.element.addEventListener("paste",function(o){t.paste(o)})}this.setPasteParser(this.table.options.clipboardPasteParser);this.setPasteAction(this.table.options.clipboardPasteAction)};v.prototype.reset=function(){this.blocked=!0;this.customSelection=!1};v.prototype.generatePlainContent=function(t){var o=[];t.forEach(function(t){var l=[];t.columns.forEach(function(o){var a="";if(o){if("group"===t.type){o.value=o.component.getKey()}if(null===o.value){a=""}else{switch(_typeof(o.value)){case"object":a=JSON.stringify(o.value);break;case"undefined":a="";break;default:a=o.value;}}}l.push(a)});o.push(l.join("\t"))});return o.join("\n")};v.prototype.copy=function(t,o){var t,l,a;this.blocked=!1;this.customSelection=!1;if(!0===this.mode||"copy"===this.mode){this.rowRange=t||this.table.options.clipboardCopyRowRange;if("undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){t=document.createRange();t.selectNodeContents(this.table.element);l=window.getSelection();if(l.toString()&&o){this.customSelection=l.toString()}l.removeAllRanges();l.addRange(t)}else if("undefined"!=typeof document.selection&&"undefined"!=typeof document.body.createTextRange){a=document.body.createTextRange();a.moveToElementText(this.table.element);a.select()}document.execCommand("copy");if(l){l.removeAllRanges()}}};v.prototype.setPasteAction=function(t){switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":this.pasteAction=this.pasteActions[t];if(!this.pasteAction){console.warn("Clipboard Error - No such paste action found:",t)}break;case"function":this.pasteAction=t;break;}};v.prototype.setPasteParser=function(t){switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":this.pasteParser=this.pasteParsers[t];if(!this.pasteParser){console.warn("Clipboard Error - No such paste parser found:",t)}break;case"function":this.pasteParser=t;break;}};v.prototype.paste=function(t){var o,l,a;if(this.checkPaseOrigin(t)){o=this.getPasteData(t);l=this.pasteParser.call(this,o);if(l){t.preventDefault();if(this.table.modExists("mutator")){l=this.mutateData(l)}a=this.pasteAction.call(this,l);this.table.options.clipboardPasted.call(this.table,o,l,a)}else{this.table.options.clipboardPasteError.call(this.table,o)}}};v.prototype.mutateData=function(t){var o=this,l=[];if(Array.isArray(t)){t.forEach(function(t){l.push(o.table.modules.mutator.transformRow(t,"clipboard"))})}else{l=t}return l};v.prototype.checkPaseOrigin=function(t){var o=!0;if("DIV"!=t.target.tagName||this.table.modules.edit.currentCell){o=!1}return o};v.prototype.getPasteData=function(t){var o;if(window.clipboardData&&window.clipboardData.getData){o=window.clipboardData.getData("Text")}else if(t.clipboardData&&t.clipboardData.getData){o=t.clipboardData.getData("text/plain")}else if(t.originalEvent&&t.originalEvent.clipboardData.getData){o=t.originalEvent.clipboardData.getData("text/plain")}return o};v.prototype.pasteParsers={table:function(t){var o=[],l=!0,a=this.table.columnManager.columns,n=[],r=[];t=t.split("\n");t.forEach(function(t){o.push(t.split("\t"))});if(o.length&&!(1===o.length&&2>o[0].length)){o[0].forEach(function(t){var o=a.find(function(o){return t&&o.definition.title&&t.trim()&&o.definition.title.trim()===t.trim()});if(o){n.push(o)}else{l=!1}});if(!l){l=!0;n=[];o[0].forEach(function(t){var o=a.find(function(o){return t&&o.field&&t.trim()&&o.field.trim()===t.trim()});if(o){n.push(o)}else{l=!1}});if(!l){n=this.table.columnManager.columnsByIndex}}if(l){o.shift()}o.forEach(function(t){var o={};t.forEach(function(t,l){if(n[l]){o[n[l].field]=t}});r.push(o)});return r}else{return!1}}};v.prototype.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}};u.prototype.registerModule("clipboard",v);var E=function(t){this.table=t;this.indent=10;this.field="";this.collapseEl=null;this.expandEl=null;this.branchEl=null;this.elementField=!1;this.startOpen=function(){};this.displayIndex=0};E.prototype.initialize=function(){var t=null,o=this.table.columnManager.getFirstVisibileColumn(),l=this.table.options;this.field=l.dataTreeChildField;this.indent=l.dataTreeChildIndent;this.elementField=l.dataTreeElementColumn||(o?o.field:!1);if(l.dataTreeBranchElement){if(!0===l.dataTreeBranchElement){this.branchEl=document.createElement("div");this.branchEl.classList.add("tabulator-data-tree-branch")}else{if("string"==typeof l.dataTreeBranchElement){t=document.createElement("div");t.innerHTML=l.dataTreeBranchElement;this.branchEl=t.firstChild}else{this.branchEl=l.dataTreeBranchElement}}}if(l.dataTreeCollapseElement){if("string"==typeof l.dataTreeCollapseElement){t=document.createElement("div");t.innerHTML=l.dataTreeCollapseElement;this.collapseEl=t.firstChild}else{this.collapseEl=l.dataTreeCollapseElement}}else{this.collapseEl=document.createElement("div");this.collapseEl.classList.add("tabulator-data-tree-control");this.collapseEl.tabIndex=0;this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"}if(l.dataTreeExpandElement){if("string"==typeof l.dataTreeExpandElement){t=document.createElement("div");t.innerHTML=l.dataTreeExpandElement;this.expandEl=t.firstChild}else{this.expandEl=l.dataTreeExpandElement}}else{this.expandEl=document.createElement("div");this.expandEl.classList.add("tabulator-data-tree-control");this.expandEl.tabIndex=0;this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"}switch(_typeof(l.dataTreeStartExpanded)){case"boolean":this.startOpen=function(){return l.dataTreeStartExpanded};break;case"function":this.startOpen=l.dataTreeStartExpanded;break;default:this.startOpen=function(t,o){return l.dataTreeStartExpanded[o]};break;}};E.prototype.initializeRow=function(t){var o=t.getData()[this.field],l=Array.isArray(o),a=l||!l&&"object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o;if(!a&&t.modules.dataTree&&t.modules.dataTree.branchEl){t.modules.dataTree.branchEl.parentNode.removeChild(t.modules.dataTree.branchEl)}if(!a&&t.modules.dataTree&&t.modules.dataTree.controlEl){t.modules.dataTree.controlEl.parentNode.removeChild(t.modules.dataTree.controlEl)}t.modules.dataTree={index:t.modules.dataTree?t.modules.dataTree.index:0,open:a?t.modules.dataTree?t.modules.dataTree.open:this.startOpen(t.getComponent(),0):!1,controlEl:t.modules.dataTree&&a?t.modules.dataTree.controlEl:!1,branchEl:t.modules.dataTree&&a?t.modules.dataTree.branchEl:!1,parent:t.modules.dataTree?t.modules.dataTree.parent:!1,children:a}};E.prototype.layoutRow=function(t){var o=this.elementField?t.getCell(this.elementField):t.getCells()[0],l=o.getElement(),a=t.modules.dataTree;if(a.branchEl){if(a.branchEl.parentNode){a.branchEl.parentNode.removeChild(a.branchEl)}a.branchEl=!1}if(a.controlEl){if(a.controlEl.parentNode){a.controlEl.parentNode.removeChild(a.controlEl)}a.controlEl=!1}this.generateControlElement(t,l);t.getElement().classList.add("tabulator-tree-level-"+a.index);if(a.index){if(this.branchEl){a.branchEl=this.branchEl.cloneNode(!0);l.insertBefore(a.branchEl,l.firstChild);if(this.table.rtl){a.branchEl.style.marginRight=(a.branchEl.offsetWidth+a.branchEl.style.marginLeft)*(a.index-1)+a.index*this.indent+"px"}else{a.branchEl.style.marginLeft=(a.branchEl.offsetWidth+a.branchEl.style.marginRight)*(a.index-1)+a.index*this.indent+"px"}}else{if(this.table.rtl){l.style.paddingRight=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-right"))+a.index*this.indent+"px"}else{l.style.paddingLeft=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-left"))+a.index*this.indent+"px"}}}};E.prototype.generateControlElement=function(t,o){var l=this,a=t.modules.dataTree,o=o||t.getCells()[0].getElement(),n=a.controlEl;if(!1!==a.children){if(a.open){a.controlEl=this.collapseEl.cloneNode(!0);a.controlEl.addEventListener("click",function(o){o.stopPropagation();l.collapseRow(t)})}else{a.controlEl=this.expandEl.cloneNode(!0);a.controlEl.addEventListener("click",function(o){o.stopPropagation();l.expandRow(t)})}a.controlEl.addEventListener("mousedown",function(t){t.stopPropagation()});if(n&&n.parentNode===o){n.parentNode.replaceChild(a.controlEl,n)}else{o.insertBefore(a.controlEl,o.firstChild)}}};E.prototype.setDisplayIndex=function(t){this.displayIndex=t};E.prototype.getDisplayIndex=function(){return this.displayIndex};E.prototype.getRows=function(t){var o=this,l=[];t.forEach(function(t){var a,n;l.push(t);if(t instanceof s){t.create();a=t.modules.dataTree.children;if(!a.index&&!1!==a.children){n=o.getChildren(t);n.forEach(function(t){t.create();l.push(t)})}}});return l};E.prototype.getChildren=function(t,o){var l=this,a=t.modules.dataTree,n=[],r=[];if(!1!==a.children&&(a.open||o)){if(!Array.isArray(a.children)){a.children=this.generateChildren(t)}if(this.table.modExists("filter")&&this.table.options.dataTreeFilter){n=this.table.modules.filter.filter(a.children)}else{n=a.children}if(this.table.modExists("sort")&&this.table.options.dataTreeSort){this.table.modules.sort.sort(n)}n.forEach(function(t){r.push(t);var o=l.getChildren(t);o.forEach(function(t){r.push(t)})})}return r};E.prototype.generateChildren=function(t){var o=this,l=[],a=t.getData()[this.field];if(!Array.isArray(a)){a=[a]}a.forEach(function(a){var n=new s(a||{},o.table.rowManager);n.create();n.modules.dataTree.index=t.modules.dataTree.index+1;n.modules.dataTree.parent=t;if(n.modules.dataTree.children){n.modules.dataTree.open=o.startOpen(n.getComponent(),n.modules.dataTree.index)}l.push(n)});return l};E.prototype.expandRow=function(t){var o=t.modules.dataTree;if(!1!==o.children){o.open=!0;t.reinitialize();this.table.rowManager.refreshActiveData("tree",!1,!0);this.table.options.dataTreeRowExpanded(t.getComponent(),t.modules.dataTree.index)}};E.prototype.collapseRow=function(t){var o=t.modules.dataTree;if(!1!==o.children){o.open=!1;t.reinitialize();this.table.rowManager.refreshActiveData("tree",!1,!0);this.table.options.dataTreeRowCollapsed(t.getComponent(),t.modules.dataTree.index)}};E.prototype.toggleRow=function(t){var o=t.modules.dataTree;if(!1!==o.children){if(o.open){this.collapseRow(t)}else{this.expandRow(t)}}};E.prototype.getTreeParent=function(t){return t.modules.dataTree.parent?t.modules.dataTree.parent.getComponent():!1};E.prototype.getFilteredTreeChildren=function(t){var o=t.modules.dataTree,l=[],a;if(o.children){if(!Array.isArray(o.children)){o.children=this.generateChildren(t)}if(this.table.modExists("filter")&&this.table.options.dataTreeFilter){a=this.table.modules.filter.filter(o.children)}else{a=o.children}a.forEach(function(t){if(t instanceof s){l.push(t)}})}return l};E.prototype.rowDelete=function(t){var o=t.modules.dataTree.parent,l;if(o){l=this.findChildIndex(t,o);if(!1!==l){o.data[this.field].splice(l,1)}if(!o.data[this.field].length){delete o.data[this.field]}this.initializeRow(o);this.layoutRow(o)}this.table.rowManager.refreshActiveData("tree",!1,!0)};E.prototype.addTreeChildRow=function(t,o,l,a){var n=!1;if("string"==typeof o){o=JSON.parse(o)}if(!Array.isArray(t.data[this.field])){t.data[this.field]=[];t.modules.dataTree.open=this.startOpen(t.getComponent(),t.modules.dataTree.index)}if("undefined"!=typeof a){n=this.findChildIndex(a,t);if(!1!==n){t.data[this.field].splice(l?n:n+1,0,o)}}if(!1===n){if(l){t.data[this.field].unshift(o)}else{t.data[this.field].push(o)}}this.initializeRow(t);this.layoutRow(t);this.table.rowManager.refreshActiveData("tree",!1,!0)};E.prototype.findChildIndex=function(t,o){var l=this,a=!1;if("object"==("undefined"==typeof t?"undefined":_typeof(t))){if(t instanceof s){a=t.data}else if(t instanceof r){a=t._getSelf().data}else if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){if(o.modules.dataTree){a=o.modules.dataTree.children.find(function(o){return o instanceof s?o.element===t:!1});if(a){a=a.data}}}}else if("undefined"==typeof t||null===t){a=!1}else{a=o.data[this.field].find(function(o){return o.data[l.table.options.index]==t})}if(a){if(Array.isArray(o.data[this.field])){a=o.data[this.field].indexOf(a)}if(-1==a){a=!1}}return a};E.prototype.getTreeChildren=function(t,o,l){var a=this,n=t.modules.dataTree,r=[];if(n.children){if(!Array.isArray(n.children)){n.children=this.generateChildren(t)}n.children.forEach(function(t){if(t instanceof s){r.push(o?t.getComponent():t);if(l){r=r.concat(a.getTreeChildren(t,o,l))}}})}return r};E.prototype.checkForRestyle=function(t){if(!t.row.cells.indexOf(t)){t.row.reinitialize()}};E.prototype.getChildField=function(){return this.field};E.prototype.redrawNeeded=function(t){return(this.field?"undefined"!=typeof t[this.field]:!1)||(this.elementField?"undefined"!=typeof t[this.elementField]:!1)};u.prototype.registerModule("dataTree",E);var C=function(t){this.table=t};C.prototype.download=function(t,o,l,a,n){var s=this,d=!1;function r(l,a){if(n){if(!0===n){s.triggerDownload(l,a,t,o,!0)}else{n(l)}}else{s.triggerDownload(l,a,t,o)}}if("function"==typeof t){d=t}else{if(s.downloaders[t]){d=s.downloaders[t]}else{console.warn("Download Error - No such download type found: ",t)}}if(d){var p=this.generateExportList(a);d.call(this.table,p,l||{},r)}};C.prototype.generateExportList=function(t){var o=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,t||this.table.options.downloadRowRange,"download"),l=this.table.options.groupHeaderDownload;if(l&&!Array.isArray(l)){l=[l]}o.forEach(function(t){var o;if("group"===t.type){o=t.columns[0];if(l&&l[t.indent]){o.value=l[t.indent](o.value,t.component._group.getRowCount(),t.component._group.getData(),t.component)}}});return o};C.prototype.triggerDownload=function(t,o,l,a,n){var r=document.createElement("a"),s=new Blob([t],{type:o}),a=a||"Tabulator."+("function"==typeof l?"txt":l);s=this.table.options.downloadReady.call(this.table,t,s);if(s){if(n){window.open(window.URL.createObjectURL(s))}else{if(navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(s,a)}else{r.setAttribute("href",window.URL.createObjectURL(s));r.setAttribute("download",a);r.style.display="none";document.body.appendChild(r);r.click();document.body.removeChild(r)}}if(this.table.options.downloadComplete){this.table.options.downloadComplete()}}};C.prototype.commsReceived=function(t,o,l){switch(o){case"intercept":this.download(l.type,"",l.options,l.active,l.intercept);break;}};C.prototype.downloaders={csv:function(t,o,l){var a=o&&o.delimiter?o.delimiter:",",n=[],r=[];t.forEach(function(t){var o=[];switch(t.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":t.columns.forEach(function(t,o){if(t&&1===t.depth){r[o]="undefined"==typeof t.value||null===t.value?"":"\""+(t.value+"").split("\"").join("\"\"")+"\""}});break;case"row":t.columns.forEach(function(t){if(t){switch(_typeof(t.value)){case"object":t.value=JSON.stringify(t.value);break;case"undefined":case"null":t.value="";break;}o.push("\""+(t.value+"").split("\"").join("\"\"")+"\"")}});n.push(o.join(a));break;}});if(r.length){n.unshift(r.join(a))}n=n.join("\n");if(o.bom){n="\uFEFF"+n}l(n,"text/csv")},json:function(t,o,l){var a=[];t.forEach(function(t){var o={};switch(t.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":t.columns.forEach(function(t){if(t){o[t.component.getField()]=t.value}});a.push(o);break;}});a=JSON.stringify(a,null,"\t");l(a,"application/json")},pdf:function(t,o,l){var n=[],r=[],s={},d=o.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},p=o.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},c=o.jsPDF||{},u=o&&o.title?o.title:"";if(!c.orientation){c.orientation=o.orientation||"landscape"}if(!c.unit){c.unit="pt"}t.forEach(function(t){switch(t.type){case"header":n.push(a(t));break;case"group":r.push(a(t,d));break;case"calc":r.push(a(t,p));break;case"row":r.push(a(t));break;}});function a(t,o){var l=[];t.columns.forEach(function(t){var a;if(t){switch(_typeof(t.value)){case"object":t.value=JSON.stringify(t.value);break;case"undefined":case"null":t.value="";break;}a={content:t.value,colSpan:t.width,rowSpan:t.height};if(o){a.styles=o}l.push(a)}else{l.push("")}});return l}var m=new jsPDF(c);if(o&&o.autoTable){if("function"==typeof o.autoTable){s=o.autoTable(m)||{}}else{s=o.autoTable}}if(u){s.addPageContent=function(){m.text(u,40,30)}}s.head=n;s.body=r;m.autoTable(s);if(o&&o.documentProcessing){o.documentProcessing(m)}l(m.output("arraybuffer"),"application/pdf")},xlsx:function(t,o,l){var n=this,r=o.sheetName||"Sheet1",s=XLSX.utils.book_new(),d;s.SheetNames=[];s.Sheets={};function a(){var o=[],l=[],a={},n={s:{c:0,r:0},e:{c:t[0]?t[0].columns.reduce(function(t,o){return t+(o&&o.width?o.width:1)},0):0,r:t.length}};t.forEach(function(t,a){var n=[];t.columns.forEach(function(t,o){if(t){n.push(!(t.value instanceof Date)&&"object"===_typeof(t.value)?JSON.stringify(t.value):t.value);if(1<t.width||-1<t.height){l.push({s:{r:a,c:o},e:{r:a+t.height-1,c:o+t.width-1}})}}else{n.push("")}});o.push(n)});XLSX.utils.sheet_add_aoa(a,o);a["!ref"]=XLSX.utils.encode_range(n);if(l.length){a["!merges"]=l}return a}if(o.sheetOnly){l(a());return}if(o.sheets){for(var p in o.sheets){if(!0===o.sheets[p]){s.SheetNames.push(p);s.Sheets[p]=a()}else{s.SheetNames.push(p);this.modules.comms.send(o.sheets[p],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:n.active,intercept:function(t){s.Sheets[p]=t}})}}}else{s.SheetNames.push(r);s.Sheets[r]=a()}if(o.documentProcessing){s=o.documentProcessing(s)}d=XLSX.write(s,{bookType:"xlsx",bookSST:!0,type:"binary"});l(function(t){for(var o=new ArrayBuffer(t.length),l=new Uint8Array(o),a=0;a!=t.length;++a){l[a]=255&t.charCodeAt(a)}return o}(d),"application/octet-stream")},html:function(t,o,l){if(this.modExists("export",!0)){l(this.modules.export.genereateHTMLTable(t),"text/html")}}};u.prototype.registerModule("download",C);var x=function(t){this.table=t;this.currentCell=!1;this.mouseClick=!1;this.recursionBlock=!1;this.invalidEdit=!1;this.editedCells=[]};x.prototype.initializeColumn=function(t){var o=this,l={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(_typeof(t.definition.editor)){case"string":if("tick"===t.definition.editor){t.definition.editor="tickCross";console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")}if(o.editors[t.definition.editor]){l.editor=o.editors[t.definition.editor]}else{console.warn("Editor Error - No such editor found: ",t.definition.editor)}break;case"function":l.editor=t.definition.editor;break;case"boolean":if(!0===t.definition.editor){if("function"!=typeof t.definition.formatter){if("tick"===t.definition.formatter){t.definition.formatter="tickCross";console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")}if(o.editors[t.definition.formatter]){l.editor=o.editors[t.definition.formatter]}else{l.editor=o.editors.input}}else{console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter)}}break;}if(l.editor){t.modules.edit=l}};x.prototype.getCurrentCell=function(){return this.currentCell?this.currentCell.getComponent():!1};x.prototype.clearEditor=function(t){var o=this.currentCell,l;this.invalidEdit=!1;if(o){this.currentCell=!1;l=o.getElement();if(t){o.validate()}else{l.classList.remove("tabulator-validation-fail")}l.classList.remove("tabulator-editing");while(l.firstChild){l.removeChild(l.firstChild)}o.row.getElement().classList.remove("tabulator-row-editing")}};x.prototype.cancelEdit=function(){if(this.currentCell){var t=this.currentCell,o=this.currentCell.getComponent();this.clearEditor(!0);t.setValueActual(t.getValue());t.cellRendered();if("textarea"==t.column.definition.editor||t.column.definition.variableHeight){t.row.normalizeHeight(!0)}if(t.column.cellEvents.cellEditCancelled){t.column.cellEvents.cellEditCancelled.call(this.table,o)}this.table.options.cellEditCancelled.call(this.table,o)}};x.prototype.bindEditor=function(t){var o=this,l=t.getElement(!0);l.setAttribute("tabindex",0);l.addEventListener("click",function(){if(!l.classList.contains("tabulator-editing")){l.focus({preventScroll:!0})}});l.addEventListener("mousedown",function(t){if(2===t.button){t.preventDefault()}else{o.mouseClick=!0}});l.addEventListener("focus",function(l){if(!o.recursionBlock){o.edit(t,l,!1)}})};x.prototype.focusCellNoEvent=function(t,o){this.recursionBlock=!0;if(!(o&&"ie"===this.table.browser)){t.getElement().focus({preventScroll:!0})}this.recursionBlock=!1};x.prototype.editCell=function(t,o){this.focusCellNoEvent(t);this.edit(t,!1,o)};x.prototype.focusScrollAdjust=function(t){if("virtual"==this.table.rowManager.getRenderMode()){var o=this.table.rowManager.element.scrollTop,l=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,a=t.row.getElement(),n=a.offsetTop;if(a.offsetTop<o){this.table.rowManager.element.scrollTop-=o-a.offsetTop}else{if(a.offsetTop+a.offsetHeight>l){this.table.rowManager.element.scrollTop+=a.offsetTop+a.offsetHeight-l}}var r=this.table.rowManager.element.scrollLeft,s=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,d=t.getElement(),n=d.offsetLeft;if(this.table.modExists("frozenColumns")){r+=parseInt(this.table.modules.frozenColumns.leftMargin);s-=parseInt(this.table.modules.frozenColumns.rightMargin)}if(this.table.options.virtualDomHoz){r-=parseInt(this.table.vdomHoz.vDomPadLeft);s-=parseInt(this.table.vdomHoz.vDomPadLeft)}if(d.offsetLeft<r){this.table.rowManager.element.scrollLeft-=r-d.offsetLeft}else{if(d.offsetLeft+d.offsetWidth>s){this.table.rowManager.element.scrollLeft+=d.offsetLeft+d.offsetWidth-s}}}};x.prototype.edit=function(t,o,l){var s=this,d=!0,p=function(){},c=t.getElement(),u,m,g;if(this.currentCell){if(!this.invalidEdit){this.cancelEdit()}return}function a(o){if(s.currentCell===t){var l=!0;if(t.column.modules.validate&&s.table.modExists("validate")&&"manual"!=s.table.options.validationMode){l=s.table.modules.validate.validate(t.column.modules.validate,t,o)}if(!0===l||"highlight"===s.table.options.validationMode){s.clearEditor();if(!t.modules.edit){t.modules.edit={}}t.modules.edit.edited=!0;if(-1==s.editedCells.indexOf(t)){s.editedCells.push(t)}t.setValue(o,!0);if(s.table.options.dataTree&&s.table.modExists("dataTree")){s.table.modules.dataTree.checkForRestyle(t)}if(!0!==l){c.classList.add("tabulator-validation-fail");s.table.options.validationFailed.call(s.table,t.getComponent(),o,l);return!1}return!0}else{s.invalidEdit=!0;c.classList.add("tabulator-validation-fail");s.focusCellNoEvent(t,!0);p();s.table.options.validationFailed.call(s.table,t.getComponent(),o,l);return!1}}}function n(){if(s.currentCell===t){s.cancelEdit();if(s.table.options.dataTree&&s.table.modExists("dataTree")){s.table.modules.dataTree.checkForRestyle(t)}}}function r(t){p=t}if(!t.column.modules.edit.blocked){if(o){o.stopPropagation()}switch(_typeof(t.column.modules.edit.check)){case"function":d=t.column.modules.edit.check(t.getComponent());break;case"boolean":d=t.column.modules.edit.check;break;}if(d||l){s.cancelEdit();s.currentCell=t;this.focusScrollAdjust(t);m=t.getComponent();if(this.mouseClick){this.mouseClick=!1;if(t.column.cellEvents.cellClick){t.column.cellEvents.cellClick.call(this.table,o,m)}}if(t.column.cellEvents.cellEditing){t.column.cellEvents.cellEditing.call(this.table,m)}s.table.options.cellEditing.call(this.table,m);g="function"==typeof t.column.modules.edit.params?t.column.modules.edit.params(m):t.column.modules.edit.params;u=t.column.modules.edit.editor.call(s,m,r,a,n,g);if(!1!==u){if(u instanceof Node){c.classList.add("tabulator-editing");t.row.getElement().classList.add("tabulator-row-editing");while(c.firstChild){c.removeChild(c.firstChild)}c.appendChild(u);p();for(var h=c.children,b=0;b<h.length;b++){h[b].addEventListener("click",function(t){t.stopPropagation()})}}else{console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",u);c.blur();return!1}}else{c.blur();return!1}return!0}else{this.mouseClick=!1;c.blur();return!1}}else{this.mouseClick=!1;c.blur();return!1}};x.prototype.maskInput=function(t,o){var a=o.mask,n="undefined"!=typeof o.maskLetterChar?o.maskLetterChar:"A",r="undefined"!=typeof o.maskNumberChar?o.maskNumberChar:"9",s="undefined"!=typeof o.maskWildcardChar?o.maskWildcardChar:"*";function l(o){var d=a[o];if("undefined"!=typeof d&&d!==s&&d!==n&&d!==r){t.value=t.value+""+d;l(o+1)}}t.addEventListener("keydown",function(o){var l=t.value.length,d=o.key;if(46<o.keyCode){if(l>=a.length){o.preventDefault();o.stopPropagation();return!1}else{switch(a[l]){case n:if(d.toUpperCase()==d.toLowerCase()){o.preventDefault();o.stopPropagation();return!1}break;case r:if(isNaN(d)){o.preventDefault();o.stopPropagation();return!1}break;case s:break;default:if(d!==a[l]){o.preventDefault();o.stopPropagation();return!1}}}}});t.addEventListener("keyup",function(a){if(46<a.keyCode){if(o.maskAutoFill){l(t.value.length)}}});if(!t.placeholder){t.placeholder=a}if(o.maskAutoFill){l(t.value.length)}};x.prototype.getEditedCells=function(){var t=[];this.editedCells.forEach(function(o){t.push(o.getComponent())});return t};x.prototype.clearEdited=function(t){var o;if(t.modules.edit&&t.modules.edit.edited){t.modules.edit.edited=!1;if(t.modules.validate){t.modules.validate.invalid=!1}}o=this.editedCells.indexOf(t);if(-1<o){this.editedCells.splice(o,1)}};x.prototype.editors={input:function t(o,l,a,n,r){var d=o.getValue(),t=document.createElement("input");t.setAttribute("type",r.search?"search":"text");t.style.padding="4px";t.style.width="100%";t.style.boxSizing="border-box";if(r.elementAttributes&&"object"==_typeof(r.elementAttributes)){for(var p in r.elementAttributes){if("+"==p.charAt(0)){p=p.slice(1);t.setAttribute(p,t.getAttribute(p)+r.elementAttributes["+"+p])}else{t.setAttribute(p,r.elementAttributes[p])}}}t.value="undefined"!=typeof d?d:"";l(function(){t.focus({preventScroll:!0});t.style.height="100%"});function s(){if((null===d||"undefined"==typeof d)&&""!==t.value||t.value!==d){if(a(t.value)){d=t.value}}else{n()}}t.addEventListener("change",s);t.addEventListener("blur",s);t.addEventListener("keydown",function(t){switch(t.keyCode){case 13:s(t);break;case 27:n();break;case 35:case 36:t.stopPropagation();break;}});if(r.mask){this.table.modules.edit.maskInput(t,r)}return t},textarea:function(t,o,l,a,n){var s=this,d=t.getValue(),p=n.verticalNavigation||"hybrid",c=(null!==d&&"undefined"!=typeof d?d:"")+"",u=(c.match(/(?:\r\n|\r|\n)/g)||[]).length+1,m=document.createElement("textarea"),g=0;m.style.display="block";m.style.padding="2px";m.style.height="100%";m.style.width="100%";m.style.boxSizing="border-box";m.style.whiteSpace="pre-wrap";m.style.resize="none";if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var h in n.elementAttributes){if("+"==h.charAt(0)){h=h.slice(1);m.setAttribute(h,m.getAttribute(h)+n.elementAttributes["+"+h])}else{m.setAttribute(h,n.elementAttributes[h])}}}m.value=c;o(function(){m.focus({preventScroll:!0});m.style.height="100%";m.scrollHeight;m.style.height=m.scrollHeight+"px";t.getRow().normalizeHeight()});function r(){if((null===d||"undefined"==typeof d)&&""!==m.value||m.value!==d){if(l(m.value)){d=m.value}setTimeout(function(){t.getRow().normalizeHeight()},300)}else{a()}}m.addEventListener("change",r);m.addEventListener("blur",r);m.addEventListener("keyup",function(){m.style.height="";var o=m.scrollHeight;m.style.height=o+"px";if(o!=g){g=o;t.getRow().normalizeHeight()}});m.addEventListener("keydown",function(t){switch(t.keyCode){case 27:a();break;case 38:if("editor"==p||"hybrid"==p&&m.selectionStart){t.stopImmediatePropagation();t.stopPropagation()}break;case 40:if("editor"==p||"hybrid"==p&&m.selectionStart!==m.value.length){t.stopImmediatePropagation();t.stopPropagation()}break;case 35:case 36:t.stopPropagation();break;}});if(n.mask){this.table.modules.edit.maskInput(m,n)}return m},number:function(t,o,l,a,n){var s=t.getValue(),d=n.verticalNavigation||"editor",p=document.createElement("input");p.setAttribute("type","number");if("undefined"!=typeof n.max){p.setAttribute("max",n.max)}if("undefined"!=typeof n.min){p.setAttribute("min",n.min)}if("undefined"!=typeof n.step){p.setAttribute("step",n.step)}p.style.padding="4px";p.style.width="100%";p.style.boxSizing="border-box";if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var c in n.elementAttributes){if("+"==c.charAt(0)){c=c.slice(1);p.setAttribute(c,p.getAttribute(c)+n.elementAttributes["+"+c])}else{p.setAttribute(c,n.elementAttributes[c])}}}p.value=s;var u=function(){r()};o(function(){p.removeEventListener("blur",u);p.focus({preventScroll:!0});p.style.height="100%";p.addEventListener("blur",u)});function r(){var t=p.value;if(!isNaN(t)&&""!==t){t=+t}if(t!==s){if(l(t)){s=t}}else{a()}}p.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:a();break;case 38:case 40:if("editor"==d){t.stopImmediatePropagation();t.stopPropagation()}break;case 35:case 36:t.stopPropagation();break;}});if(n.mask){this.table.modules.edit.maskInput(p,n)}return p},range:function(t,o,l,a,n){var s=t.getValue(),d=document.createElement("input");d.setAttribute("type","range");if("undefined"!=typeof n.max){d.setAttribute("max",n.max)}if("undefined"!=typeof n.min){d.setAttribute("min",n.min)}if("undefined"!=typeof n.step){d.setAttribute("step",n.step)}d.style.padding="4px";d.style.width="100%";d.style.boxSizing="border-box";if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var p in n.elementAttributes){if("+"==p.charAt(0)){p=p.slice(1);d.setAttribute(p,d.getAttribute(p)+n.elementAttributes["+"+p])}else{d.setAttribute(p,n.elementAttributes[p])}}}d.value=s;o(function(){d.focus({preventScroll:!0});d.style.height="100%"});function r(){var t=d.value;if(!isNaN(t)&&""!==t){t=+t}if(t!=s){if(l(t)){s=t}}else{a()}}d.addEventListener("blur",function(){r()});d.addEventListener("keydown",function(t){switch(t.keyCode){case 13:r();break;case 27:a();break;}});return d},select:function(t,o,l,a,n){var R=this,M=this,L=t.getElement(),D=t.getValue(),T=n.verticalNavigation||"editor",z="undefined"!=typeof D||null===D?Array.isArray(D)?D:[D]:"undefined"!=typeof n.defaultValue?n.defaultValue:[],H=document.createElement("input"),k=document.createElement("div"),S=n.multiselect,P=[],A={},F=[],_=[],B=!0,I=!1,N="",V=null;if(Array.isArray(n)||!Array.isArray(n)&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&!n.values){console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object");n={values:n}}function r(o){var l={},a=M.table.getData(),n;if(o){n=M.table.columnManager.getColumnByField(o)}else{n=t.getColumn()._getSelf()}if(n){a.forEach(function(t){var o=n.getFieldValue(t);if(null!==o&&"undefined"!=typeof o&&""!==o){l[o]=!0}})}else{console.warn("unable to find matching column to create select lookup list:",o)}return Object.keys(l)}function s(o,l){var r=[],s=[];function a(t){var t={label:t.label,value:t.value,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1};if(-1<l.indexOf(t.value)){c(t)}r.push(t);s.push(t);return t}if("function"==typeof o){o=o(t)}if(Array.isArray(o)){o.forEach(function(t){var o;if("object"===("undefined"==typeof t?"undefined":_typeof(t))){if(t.options){o={label:t.label,group:!0,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1};s.push(o);t.options.forEach(function(t){a(t)})}else{a(t)}}else{o={label:t,value:t,element:!1};if(-1<l.indexOf(o.value)){c(o)}r.push(o);s.push(o)}})}else{for(var p in o){var u={label:o[p],value:p,element:!1};if(-1<l.indexOf(u.value)){c(u)}r.push(u);s.push(u)}}if(n.sortValuesList){r.sort(function(t,o){return t.label<o.label?-1:t.label>o.label?1:0});s.sort(function(t,o){return t.label<o.label?-1:t.label>o.label?1:0});if("asc"!==n.sortValuesList){r.reverse();s.reverse()}}P=r;F=s;d()}function d(){while(k.firstChild){k.removeChild(k.firstChild)}F.forEach(function(o){var l=o.element;if(!l){l=document.createElement("div");o.label=n.listItemFormatter?n.listItemFormatter(o.value,o.label,t,l,o.itemParams):o.label;if(o.group){l.classList.add("tabulator-edit-select-list-group");l.tabIndex=0;l.innerHTML=""===o.label?"&nbsp;":o.label}else{l.classList.add("tabulator-edit-select-list-item");l.tabIndex=0;l.innerHTML=""===o.label?"&nbsp;":o.label;l.addEventListener("click",function(){I=!0;setTimeout(function(){I=!1},10);if(S){g(o);H.focus()}else{h(o)}});if(-1<_.indexOf(o)){l.classList.add("active")}}if(o.elementAttributes&&"object"==_typeof(o.elementAttributes)){for(var a in o.elementAttributes){if("+"==a.charAt(0)){a=a.slice(1);l.setAttribute(a,H.getAttribute(a)+o.elementAttributes["+"+a])}else{l.setAttribute(a,o.elementAttributes[a])}}}l.addEventListener("mousedown",function(){B=!1;setTimeout(function(){B=!0},10)});o.element=l}k.appendChild(l)})}function p(t,o){if(!S&&A&&A.element){A.element.classList.remove("active")}if(A&&A.element){A.element.classList.remove("focused")}A=t;if(t.element){t.element.classList.add("focused");if(o){t.element.classList.add("active")}}if(t&&t.element&&t.element.scrollIntoView){t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}function c(t){var o=_.indexOf(t);if(-1==o){_.push(t);p(t,!0)}f()}function m(t){var o=_[t];if(-1<t){_.splice(t,1);if(o.element){o.element.classList.remove("active")}}}function g(t){if(!t){t=A}var o=_.indexOf(t);if(-1<o){m(o)}else{if(!0!==S&&_.length>=S){m(0)}c(t)}f()}function h(t){E();if(!t){t=A}if(t){H.value=t.label;l(t.value)}z=[t.value]}function b(t){if(!t){E()}var o=[];_.forEach(function(t){o.push(t.value)});z=o;l(o)}function f(){var t=[];_.forEach(function(o){t.push(o.label)});H.value=t.join(", ");if(!1===M.currentCell){b(!0)}}function y(){for(var t=_.length,o=0;o<t;o++){m(0)}}function w(){E();a()}function v(){_=[];if(!k.parentNode){if(!0===n.values){s(r(),z)}else if("string"==typeof n.values){s(r(n.values),z)}else{s(n.values||[],z)}var t=u.prototype.helpers.elOffset(L);k.style.minWidth=L.offsetWidth+"px";k.style.top=t.top+L.offsetHeight+"px";k.style.left=t.left+"px";k.addEventListener("mousedown",function(){B=!1;setTimeout(function(){B=!0},10)});document.body.appendChild(k)}}function E(){if(k.parentNode){k.parentNode.removeChild(k)}C()}function C(){M.table.rowManager.element.removeEventListener("scroll",w)}function x(){clearTimeout(V);var t=String.fromCharCode(event.keyCode).toLowerCase();N+=t.toLowerCase();var o=P.find(function(t){return"undefined"!=typeof t.label&&t.label.toLowerCase().startsWith(N)});if(o){p(o,!S)}V=setTimeout(function(){N=""},800)}H.setAttribute("type","text");H.style.padding="4px";H.style.width="100%";H.style.boxSizing="border-box";H.style.cursor="default";H.readOnly=!1!=this.currentCell;if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var W in n.elementAttributes){if("+"==W.charAt(0)){W=W.slice(1);H.setAttribute(W,H.getAttribute(W)+n.elementAttributes["+"+W])}else{H.setAttribute(W,n.elementAttributes[W])}}}H.value="undefined"!=typeof D||null===D?D:"";H.addEventListener("search",function(){if(!H.value){y();b()}});H.addEventListener("keydown",function(t){var o;switch(t.keyCode){case 38:o=P.indexOf(A);if("editor"==T||"hybrid"==T&&o){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(0<o){p(P[o-1],!S)}}break;case 40:o=P.indexOf(A);if("editor"==T||"hybrid"==T&&o<P.length-1){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(o<P.length-1){if(-1==o){p(P[0],!S)}else{p(P[o+1],!S)}}}break;case 37:case 39:t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();break;case 13:if(S){g()}else{h()}break;case 27:w();break;case 9:break;default:if(!1===M.currentCell){t.preventDefault()}if(38<=t.keyCode&&90>=t.keyCode){x(t.keyCode)}}});H.addEventListener("blur",function(){if(B){if(S){b()}else{w()}}});H.addEventListener("focus",function(){if(!I){v()}});k=document.createElement("div");k.classList.add("tabulator-edit-select-list");o(function(){H.style.height="100%";H.focus({preventScroll:!0})});setTimeout(function(){R.table.rowManager.element.addEventListener("scroll",w)},10);return H},autocomplete:function(t,o,l,a,n){var C=this,x=this,R=t.getElement(),M=t.getValue(),L=n.verticalNavigation||"editor",D="undefined"!=typeof M||null===M?M:"undefined"!=typeof n.defaultValue?n.defaultValue:"",T=document.createElement("input"),z=document.createElement("div"),H=[],k=!1,S=!0,P=!1;T.setAttribute("type","search");T.style.padding="4px";T.style.width="100%";T.style.boxSizing="border-box";if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var A in n.elementAttributes){if("+"==A.charAt(0)){A=A.slice(1);T.setAttribute(A,T.getAttribute(A)+n.elementAttributes["+"+A])}else{T.setAttribute(A,n.elementAttributes[A])}}}z.classList.add("tabulator-edit-select-list");z.addEventListener("mousedown",function(){S=!1;setTimeout(function(){S=!0},10)});function r(){if(!0===n.values){P=s()}else if("string"==typeof n.values){P=s(n.values)}}function s(o){var l={},a=x.table.getData(),r;if(o){r=x.table.columnManager.getColumnByField(o)}else{r=t.getColumn()._getSelf()}if(r){a.forEach(function(t){var o=r.getFieldValue(t);if(null!==o&&"undefined"!=typeof o&&""!==o){l[o]=!0}});if(n.sortValuesList){if("asc"==n.sortValuesList){l=Object.keys(l).sort()}else{l=Object.keys(l).sort().reverse()}}else{l=Object.keys(l)}}else{console.warn("unable to find matching column to create autocomplete lookup list:",o)}return l}function d(t,o){var l=[],a,r;if(P){a=P}else{a=n.values||[]}if(n.searchFunc){l=n.searchFunc(t,a);if(l instanceof Promise){p("undefined"!=typeof n.searchingPlaceholder?n.searchingPlaceholder:"Searching...");l.then(function(t){g(c(t),o)}).catch(function(t){console.err("error in autocomplete search promise:",t)})}else{g(c(l),o)}}else{r=c(a);if(""===t){if(n.showListOnEmpty){l=r}}else{r.forEach(function(o){if(null!==o.value||"undefined"!=typeof o.value){if(-1<(o.value+"").toLowerCase().indexOf((t+"").toLowerCase())||-1<(o.title+"").toLowerCase().indexOf((t+"").toLowerCase())){l.push(o)}}})}g(l,o)}}function p(t){var o=document.createElement("div");m();if(!1!==t){o.classList.add("tabulator-edit-select-list-notice");o.tabIndex=0;if(t instanceof Node){o.appendChild(t)}else{o.innerHTML=t}z.appendChild(o)}}function c(t){var o=[];if(Array.isArray(t)){t.forEach(function(t){var l={};if("object"===("undefined"==typeof t?"undefined":_typeof(t))){l.title=n.listItemFormatter?n.listItemFormatter(t.value,t.label):t.label;l.value=t.value}else{l.title=n.listItemFormatter?n.listItemFormatter(t,t):t;l.value=t}o.push(l)})}else{for(var l in t){var a={title:n.listItemFormatter?n.listItemFormatter(l,t[l]):t[l],value:l};o.push(a)}}return o}function m(){while(z.firstChild){z.removeChild(z.firstChild)}}function g(t,o){if(t.length){h(t,o)}else{if(n.emptyPlaceholder){p(n.emptyPlaceholder)}}}function h(t,o){var l=!1;m();H=t;H.forEach(function(t){var a=t.element;if(!a){a=document.createElement("div");a.classList.add("tabulator-edit-select-list-item");a.tabIndex=0;a.innerHTML=t.title;a.addEventListener("click",function(){y(t);b()});a.addEventListener("mousedown",function(){S=!1;setTimeout(function(){S=!0},10)});t.element=a;if(o&&t.value==M){T.value=t.title;t.element.classList.add("active");l=!0}if(t===k){t.element.classList.add("active");l=!0}}z.appendChild(a)});if(!l){y(!1)}}function b(){w();if(k){if(M!==k.value){M=k.value;T.value=k.title;l(k.value)}else{a()}}else{if(n.freetext){M=T.value;l(T.value)}else{if(n.allowEmpty&&""===T.value){M=T.value;l(T.value)}else{a()}}}}function f(){if(!z.parentNode){console.log("show",D);while(z.firstChild){z.removeChild(z.firstChild)}var t=u.prototype.helpers.elOffset(R);z.style.minWidth=R.offsetWidth+"px";z.style.top=t.top+R.offsetHeight+"px";z.style.left=t.left+"px";document.body.appendChild(z)}}function y(t){if(k&&k.element){k.element.classList.remove("active")}k=t;if(t&&t.element){t.element.classList.add("active")}if(t&&t.element&&t.element.scrollIntoView){t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}function w(){if(z.parentNode){z.parentNode.removeChild(z)}E()}function v(){w();a()}function E(){x.table.rowManager.element.removeEventListener("scroll",v)}T.addEventListener("keydown",function(t){var o;switch(t.keyCode){case 38:o=H.indexOf(k);if("editor"==L||"hybrid"==L&&o){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(0<o){y(H[o-1])}else{y(!1)}}break;case 40:o=H.indexOf(k);if("editor"==L||"hybrid"==L&&o<H.length-1){t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(o<H.length-1){if(-1==o){y(H[0])}else{y(H[o+1])}}}break;case 37:case 39:t.stopImmediatePropagation();t.stopPropagation();break;case 13:b();break;case 27:v();break;case 36:case 35:t.stopImmediatePropagation();break;}});T.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:d(T.value);}});T.addEventListener("search",function(){d(T.value)});T.addEventListener("blur",function(){if(S){b()}});T.addEventListener("focus",function(){var t=D;r();f();T.value=t;d(t,!0)});o(function(){T.style.height="100%";T.focus({preventScroll:!0})});if(n.mask){this.table.modules.edit.maskInput(T,n)}setTimeout(function(){C.table.rowManager.element.addEventListener("scroll",v)},10);r();T.value=D;d(D,!0);return T},star:function t(o,l,a,n,r){var c=this,u=o.getElement(),m=o.getValue(),g=u.getElementsByTagName("svg").length||5,h=u.getElementsByTagName("svg")[0]?u.getElementsByTagName("svg")[0].getAttribute("width"):14,b=[],f=document.createElement("div"),t=document.createElementNS("http://www.w3.org/2000/svg","svg");function s(t){b.forEach(function(o,l){if(l<t){if("ie"==c.table.browser){o.setAttribute("class","tabulator-star-active")}else{o.classList.replace("tabulator-star-inactive","tabulator-star-active")}o.innerHTML="<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>"}else{if("ie"==c.table.browser){o.setAttribute("class","tabulator-star-inactive")}else{o.classList.replace("tabulator-star-active","tabulator-star-inactive")}o.innerHTML="<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>"}})}function d(o){var l=document.createElement("span"),n=t.cloneNode(!0);b.push(n);l.addEventListener("mouseenter",function(t){t.stopPropagation();t.stopImmediatePropagation();s(o)});l.addEventListener("mousemove",function(t){t.stopPropagation();t.stopImmediatePropagation()});l.addEventListener("click",function(t){t.stopPropagation();t.stopImmediatePropagation();a(o);u.blur()});l.appendChild(n);f.appendChild(l)}function p(t){m=t;s(t)}u.style.whiteSpace="nowrap";u.style.overflow="hidden";u.style.textOverflow="ellipsis";f.style.verticalAlign="middle";f.style.display="inline-block";f.style.padding="4px";t.setAttribute("width",h);t.setAttribute("height",h);t.setAttribute("viewBox","0 0 512 512");t.setAttribute("xml:space","preserve");t.style.padding="0 1px";if(r.elementAttributes&&"object"==_typeof(r.elementAttributes)){for(var y in r.elementAttributes){if("+"==y.charAt(0)){y=y.slice(1);f.setAttribute(y,f.getAttribute(y)+r.elementAttributes["+"+y])}else{f.setAttribute(y,r.elementAttributes[y])}}}for(var w=1;w<=g;w++){d(w)}m=Math.min(parseInt(m),g);s(m);f.addEventListener("mousemove",function(){s(0)});f.addEventListener("click",function(){a(0)});u.addEventListener("blur",function(){n()});u.addEventListener("keydown",function(t){switch(t.keyCode){case 39:p(m+1);break;case 37:p(m-1);break;case 13:a(m);break;case 27:n();break;}});return f},progress:function(t,o,l,a,n){var s=t.getElement(),d="undefined"==typeof n.max?s.getElementsByTagName("div")[0].getAttribute("max")||100:n.max,p="undefined"==typeof n.min?s.getElementsByTagName("div")[0].getAttribute("min")||0:n.min,c=(d-p)/100,u=t.getValue()||0,m=document.createElement("div"),g=document.createElement("div"),h,b;function r(){var t=window.getComputedStyle(s,null),o=c*Math.round(g.offsetWidth/((s.clientWidth-parseInt(t.getPropertyValue("padding-left"))-parseInt(t.getPropertyValue("padding-right")))/100))+p;l(o);s.setAttribute("aria-valuenow",o);s.setAttribute("aria-label",u)}m.style.position="absolute";m.style.right="0";m.style.top="0";m.style.bottom="0";m.style.width="5px";m.classList.add("tabulator-progress-handle");g.style.display="inline-block";g.style.position="relative";g.style.height="100%";g.style.backgroundColor="#488CE9";g.style.maxWidth="100%";g.style.minWidth="0%";if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var f in n.elementAttributes){if("+"==f.charAt(0)){f=f.slice(1);g.setAttribute(f,g.getAttribute(f)+n.elementAttributes["+"+f])}else{g.setAttribute(f,n.elementAttributes[f])}}}s.style.padding="4px 4px";u=Math.min(parseFloat(u),d);u=Math.max(parseFloat(u),p);u=Math.round((u-p)/c);g.style.width=u+"%";s.setAttribute("aria-valuemin",p);s.setAttribute("aria-valuemax",d);g.appendChild(m);m.addEventListener("mousedown",function(t){h=t.screenX;b=g.offsetWidth});m.addEventListener("mouseover",function(){m.style.cursor="ew-resize"});s.addEventListener("mousemove",function(t){if(h){g.style.width=b+t.screenX-h+"px"}});s.addEventListener("mouseup",function(t){if(h){t.stopPropagation();t.stopImmediatePropagation();h=!1;b=!1;r()}});s.addEventListener("keydown",function(t){switch(t.keyCode){case 39:t.preventDefault();g.style.width=g.clientWidth+s.clientWidth/100+"px";break;case 37:t.preventDefault();g.style.width=g.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:r();break;case 27:a();break;}});s.addEventListener("blur",function(){a()});return g},tickCross:function(t,o,l,a,n){var s=t.getValue(),d=document.createElement("input"),p=n.tristate,c="undefined"==typeof n.indeterminateValue?null:n.indeterminateValue,u=!1;d.setAttribute("type","checkbox");d.style.marginTop="5px";d.style.boxSizing="border-box";if(n.elementAttributes&&"object"==_typeof(n.elementAttributes)){for(var m in n.elementAttributes){if("+"==m.charAt(0)){m=m.slice(1);d.setAttribute(m,d.getAttribute(m)+n.elementAttributes["+"+m])}else{d.setAttribute(m,n.elementAttributes[m])}}}d.value=s;if(p&&("undefined"==typeof s||s===c||""===s)){u=!0;d.indeterminate=!0}if("firefox"!=this.table.browser){o(function(){d.focus({preventScroll:!0})})}d.checked=!0===s||"true"===s||"True"===s||1===s;o(function(){d.focus()});function r(t){if(p){if(!t){if(d.checked&&!u){d.checked=!1;d.indeterminate=!0;u=!0;return c}else{u=!1;return d.checked}}else{if(u){return c}else{return d.checked}}}else{return d.checked}}d.addEventListener("change",function(){l(r())});d.addEventListener("blur",function(){l(r(!0))});d.addEventListener("keydown",function(t){if(13==t.keyCode){l(r())}if(27==t.keyCode){a()}});return d}};u.prototype.registerModule("edit",x);var R=function(t,o,l,a){this.type=t;this.columns=o;this.component=l||!1;this.indent=a||0},M=function(t,o,l,a,n){this.value=t;this.component=o||!1;this.width=l;this.height=a;this.depth=n},L=function(t){this.table=t;this.config={};this.cloneTableStyle=!0;this.colVisProp=""};L.prototype.generateExportList=function(t,o,l,a){this.cloneTableStyle=o;this.config=t||{};this.colVisProp=a;var n=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],r=this.bodyToExportRows(this.rowLookup(l));return n.concat(r)};L.prototype.genereateTable=function(t,o,l,a){var n=this.generateExportList(t,o,l,a);return this.genereateTableElement(n)};L.prototype.rowLookup=function(t){var o=this,l=[];if("function"==typeof t){t.call(this.table).forEach(function(t){t=o.table.rowManager.findRow(t);if(t){l.push(t)}})}else{switch(t){case!0:case"visible":l=this.table.rowManager.getVisibleRows(!0);break;case"all":l=this.table.rowManager.rows;break;case"selected":l=this.table.modules.selectRow.selectedRows;break;case"active":default:if(this.table.options.pagination){l=this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2)}else{l=this.table.rowManager.getDisplayRows()}}}return Object.assign([],l)};L.prototype.generateColumnGroupHeaders=function(){var t=this,o=[],l=!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex;l.forEach(function(l){var a=t.processColumnGroup(l);if(a){o.push(a)}});return o};L.prototype.processColumnGroup=function(t){var o=this,l=t.columns,a=0,n=t.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||t.definition.title,r={title:n,column:t,depth:1};if(l.length){r.subGroups=[];r.width=0;l.forEach(function(t){var l=o.processColumnGroup(t);if(l){r.width+=l.width;r.subGroups.push(l);if(l.depth>a){a=l.depth}}});r.depth+=a;if(!r.width){return!1}}else{if(this.columnVisCheck(t)){r.width=1}else{return!1}}return r};L.prototype.columnVisCheck=function(t){return!1!==t.definition[this.colVisProp]&&(t.visible||!t.visible&&t.definition[this.colVisProp])};L.prototype.headersToExportRows=function(t){var l=[],a=0,n=[];function o(t,n){var r=a-n;if("undefined"==typeof l[n]){l[n]=[]}t.height=t.subGroups?1:r-t.depth+1;l[n].push(t);if(1<t.height){for(var s=1;s<t.height;s++){if("undefined"==typeof l[n+s]){l[n+s]=[]}l[n+s].push(!1)}}if(1<t.width){for(var d=1;d<t.width;d++){l[n].push(!1)}}if(t.subGroups){t.subGroups.forEach(function(t){o(t,n+1)})}}t.forEach(function(t){if(t.depth>a){a=t.depth}});t.forEach(function(t){o(t,0)});l.forEach(function(t){var o=[];t.forEach(function(t){if(t){o.push(new M(t.title,t.column.getComponent(),t.width,t.height,t.depth))}else{o.push(null)}});n.push(new R("header",o))});return n};L.prototype.bodyToExportRows=function(t){var o=this,l=[],a=[];this.table.columnManager.columnsByIndex.forEach(function(t){if(o.columnVisCheck(t)){l.push(t.getComponent())}});if(!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")){if(this.table.modules.columnCalcs.topInitialized){t.unshift(this.table.modules.columnCalcs.topRow)}if(this.table.modules.columnCalcs.botInitialized){t.push(this.table.modules.columnCalcs.botRow)}}t=t.filter(function(t){switch(t.type){case"group":return!1!==o.config.rowGroups;break;case"calc":return!1!==o.config.columnCalcs;break;case"row":return!(o.table.options.dataTree&&!1===o.config.dataTree&&t.modules.dataTree.parent);break;}return!0});t.forEach(function(t){var n=t.getData(o.colVisProp),r=[],s=0;switch(t.type){case"group":s=t.level;r.push(new M(t.key,t.getComponent(),l.length,1));break;case"calc":case"row":l.forEach(function(t){r.push(new M(t._column.getFieldValue(n),t,1,1))});if(o.table.options.dataTree&&!1!==o.config.dataTree){s=t.modules.dataTree.index}break;}a.push(new R(t.type,r,t.getComponent(),s))});return a};L.prototype.genereateTableElement=function(t){var o=this,l=document.createElement("table"),a=document.createElement("thead"),n=document.createElement("tbody"),r=this.lookupTableStyles(),s=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],d={};d.rowFormatter=null!==s?s:this.table.options.rowFormatter;if(this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")){d.treeElementField=this.table.modules.dataTree.elementField}d.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))];if(d.groupHeader&&!Array.isArray(d.groupHeader)){d.groupHeader=[d.groupHeader]}l.classList.add("tabulator-print-table");this.mapElementStyles(this.table.columnManager.getHeadersElement(),a,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);if(1e3<t.length){console.warn("It may take a long time to render an HTML table with more than 1000 rows")}t.forEach(function(t,l){switch(t.type){case"header":a.appendChild(o.genereateHeaderElement(t,d,r));break;case"group":n.appendChild(o.genereateGroupElement(t,d,r));break;case"calc":n.appendChild(o.genereateCalcElement(t,d,r));break;case"row":var s=o.genereateRowElement(t,d,r);o.mapElementStyles(l%2&&r.evenRow?r.evenRow:r.oddRow,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);n.appendChild(s);break;}});if(a.innerHTML){l.appendChild(a)}l.appendChild(n);this.mapElementStyles(this.table.element,l,["border-top","border-left","border-right","border-bottom"]);return l};L.prototype.lookupTableStyles=function(){var t={};if(this.cloneTableStyle&&window.getComputedStyle){t.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)");t.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)");t.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs");t.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)");t.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0];if(t.firstRow){t.styleCells=t.firstRow.getElementsByClassName("tabulator-cell");t.firstCell=t.styleCells[0];t.lastCell=t.styleCells[t.styleCells.length-1]}}return t};L.prototype.genereateHeaderElement=function(t){var o=this,l=document.createElement("tr");t.columns.forEach(function(t){if(t){var a=document.createElement("th"),n=t.component._column.definition.cssClass?t.component._column.definition.cssClass.split(" "):[];a.colSpan=t.width;a.rowSpan=t.height;a.innerHTML=t.value;if(o.cloneTableStyle){a.style.boxSizing="border-box"}n.forEach(function(t){a.classList.add(t)});o.mapElementStyles(t.component.getElement(),a,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]);o.mapElementStyles(t.component._column.contentElement,a,["padding-top","padding-left","padding-right","padding-bottom"]);if(t.component._column.visible){o.mapElementStyles(t.component.getElement(),a,["width"])}else{if(t.component._column.definition.width){a.style.width=t.component._column.definition.width+"px"}}if(t.component._column.parent){o.mapElementStyles(t.component._column.parent.groupElement,a,["border-top"])}l.appendChild(a)}});return l};L.prototype.genereateGroupElement=function(t,o,l){var a=document.createElement("tr"),n=document.createElement("td"),r=t.columns[0];a.classList.add("tabulator-print-table-row");if(o.groupHeader&&o.groupHeader[t.indent]){r.value=o.groupHeader[t.indent](r.value,t.component._group.getRowCount(),t.component._group.getData(),t.component)}else{if(!1===o.groupHeader){r.value=r.value}else{r.value=t.component._group.generator(r.value,t.component._group.getRowCount(),t.component._group.getData(),t.component)}}n.colSpan=r.width;n.innerHTML=r.value;a.classList.add("tabulator-print-table-group");a.classList.add("tabulator-group-level-"+t.indent);if(r.component.isVisible()){a.classList.add("tabulator-group-visible")}this.mapElementStyles(l.firstGroup,a,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);this.mapElementStyles(l.firstGroup,n,["padding-top","padding-left","padding-right","padding-bottom"]);a.appendChild(n);return a};L.prototype.genereateCalcElement=function(t,o,l){var a=this.genereateRowElement(t,o,l);a.classList.add("tabulator-print-table-calcs");this.mapElementStyles(l.calcRow,a,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]);return a};L.prototype.genereateRowElement=function(t,o,l){var a=this,n=document.createElement("tr");n.classList.add("tabulator-print-table-row");t.columns.forEach(function(r){if(r){var s=document.createElement("td"),d=r.component._column,p=r.value,c={modules:{},getValue:function(){return p},getField:function(){return d.definition.field},getElement:function(){return s},getColumn:function(){return d.getComponent()},getData:function(){return t.component.getData()},getRow:function(){return t.component},getComponent:function(){return c},column:d},u=d.definition.cssClass?d.definition.cssClass.split(" "):[];u.forEach(function(t){s.classList.add(t)});if(a.table.modExists("format")&&!1!==a.config.formatCells){p=a.table.modules.format.formatExportValue(c,a.colVisProp)}else{switch("undefined"==typeof p?"undefined":_typeof(p)){case"object":p=JSON.stringify(p);break;case"undefined":case"null":p="";break;default:p=p;}}if(p instanceof Node){s.appendChild(p)}else{s.innerHTML=p}if(l.firstCell){a.mapElementStyles(l.firstCell,s,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]);if(d.definition.align){s.style.textAlign=d.definition.align}}if(a.table.options.dataTree&&!1!==a.config.dataTree){if(o.treeElementField&&o.treeElementField==d.field||!o.treeElementField&&0==i){if(t.component._row.modules.dataTree.controlEl){s.insertBefore(t.component._row.modules.dataTree.controlEl.cloneNode(!0),s.firstChild)}if(t.component._row.modules.dataTree.branchEl){s.insertBefore(t.component._row.modules.dataTree.branchEl.cloneNode(!0),s.firstChild)}}}n.appendChild(s);if(c.modules.format&&c.modules.format.renderedCallback){c.modules.format.renderedCallback()}if(o.rowFormatter&&!1!==a.config.formatCells){o.rowFormatter(t.component)}}});return n};L.prototype.genereateHTMLTable=function(t){var o=document.createElement("div");o.appendChild(this.genereateTableElement(t));return o.innerHTML};L.prototype.getHtml=function(t,o,l,a){var n=this.generateExportList(l||this.table.options.htmlOutputConfig,o,t,a||"htmlOutput");return this.genereateHTMLTable(n)};L.prototype.mapElementStyles=function(t,o,l){if(this.cloneTableStyle&&t&&o){var a={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var n=window.getComputedStyle(t);l.forEach(function(t){o.style[a[t]]=n.getPropertyValue(t)})}}};u.prototype.registerModule("export",L);var D=function(t){this.table=t;this.filterList=[];this.headerFilters={};this.headerFilterColumns=[];this.prevHeaderFilterChangeCheck="";this.prevHeaderFilterChangeCheck="{}";this.changed=!1};D.prototype.initializeColumn=function(t){var o=this,l=t.getField(),a;t.modules.filter={success:function(n){var r="input"==t.modules.filter.tagType&&"text"==t.modules.filter.attrType||"textarea"==t.modules.filter.tagType?"partial":"match",s="",d="",p;if("undefined"==typeof t.modules.filter.prevSuccess||t.modules.filter.prevSuccess!==n){t.modules.filter.prevSuccess=n;if(!t.modules.filter.emptyFunc(n)){t.modules.filter.value=n;switch(_typeof(t.definition.headerFilterFunc)){case"string":if(o.filters[t.definition.headerFilterFunc]){s=t.definition.headerFilterFunc;p=function(l){var a=t.definition.headerFilterFuncParams||{},r=t.getFieldValue(l);a="function"==typeof a?a(n,r,l):a;return o.filters[t.definition.headerFilterFunc](n,r,l,a)}}else{console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc)}break;case"function":p=function(o){var l=t.definition.headerFilterFuncParams||{},a=t.getFieldValue(o);l="function"==typeof l?l(n,a,o):l;return t.definition.headerFilterFunc(n,a,o,l)};s=p;break;}if(!p){switch(r){case"partial":p=function(o){var l=t.getFieldValue(o);if("undefined"!=typeof l&&null!==l){return-1<(l+"").toLowerCase().indexOf((n+"").toLowerCase())}else{return!1}};s="like";break;default:p=function(o){return t.getFieldValue(o)==n};s="=";}}o.headerFilters[l]={value:n,func:p,type:s,params:a||{}}}else{delete o.headerFilters[l]}d=JSON.stringify(o.headerFilters);if(o.prevHeaderFilterChangeCheck!==d){o.prevHeaderFilterChangeCheck=d;o.changed=!0;o.table.rowManager.filterRefresh()}}return!0},attrType:!1,tagType:!1,emptyFunc:!1};this.generateHeaderFilterElement(t)};D.prototype.generateHeaderFilterElement=function(t,o,l){var n=this,r=this,s=t.modules.filter.success,d=t.getField(),p,c,u,m,g,h,b;function a(){}if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode){t.contentElement.removeChild(t.modules.filter.headerElement.parentNode)}if(d){t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(t){return!t&&"0"!==t&&0!==t};p=document.createElement("div");p.classList.add("tabulator-header-filter");switch(_typeof(t.definition.headerFilter)){case"string":if(r.table.modules.edit.editors[t.definition.headerFilter]){c=r.table.modules.edit.editors[t.definition.headerFilter];if(("tick"===t.definition.headerFilter||"tickCross"===t.definition.headerFilter)&&!t.definition.headerFilterEmptyCheck){t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t}}}else{console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor)}break;case"function":c=t.definition.headerFilter;break;case"boolean":if(t.modules.edit&&t.modules.edit.editor){c=t.modules.edit.editor}else{if(t.definition.formatter&&r.table.modules.edit.editors[t.definition.formatter]){c=r.table.modules.edit.editors[t.definition.formatter];if(("tick"===t.definition.formatter||"tickCross"===t.definition.formatter)&&!t.definition.headerFilterEmptyCheck){t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t}}}else{c=r.table.modules.edit.editors.input}}break;}if(c){m={getValue:function(){return"undefined"!=typeof o?o:""},getField:function(){return t.definition.field},getElement:function(){return p},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}};b=t.definition.headerFilterParams||{};b="function"==typeof b?b.call(r.table):b;u=c.call(this.table.modules.edit,m,function(){},s,a,b);if(!u){console.warn("Filter Error - Cannot add filter to "+d+" column, editor returned a value of false");return}if(!(u instanceof Node)){console.warn("Filter Error - Cannot add filter to "+d+" column, editor should return an instance of Node, the editor returned:",u);return}if(d){r.table.modules.localize.bind("headerFilters|columns|"+t.definition.field,function(t){u.setAttribute("placeholder","undefined"!=typeof t&&t?t:r.table.modules.localize.getText("headerFilters|default"))})}else{r.table.modules.localize.bind("headerFilters|default",function(t){u.setAttribute("placeholder","undefined"!=typeof r.column.definition.headerFilterPlaceholder&&r.column.definition.headerFilterPlaceholder?r.column.definition.headerFilterPlaceholder:t)})}u.addEventListener("click",function(t){t.stopPropagation();u.focus()});u.addEventListener("focus",function(){var t=n.table.columnManager.element.scrollLeft;if(t!==n.table.rowManager.element.scrollLeft){n.table.rowManager.scrollHorizontal(t);n.table.columnManager.scrollHorizontal(t)}});g=!1;h=function(){if(g){clearTimeout(g)}g=setTimeout(function(){s(u.value)},r.table.options.headerFilterLiveFilterDelay)};t.modules.filter.headerElement=u;t.modules.filter.attrType=u.hasAttribute("type")?u.getAttribute("type").toLowerCase():"";t.modules.filter.tagType=u.tagName.toLowerCase();if(!1!==t.definition.headerFilterLiveFilter){if(!("autocomplete"===t.definition.headerFilter||"tickCross"===t.definition.headerFilter||("autocomplete"===t.definition.editor||"tickCross"===t.definition.editor)&&!0===t.definition.headerFilter)){u.addEventListener("keyup",h);u.addEventListener("search",h);if("number"==t.modules.filter.attrType){u.addEventListener("change",function(){s(u.value)})}if("text"==t.modules.filter.attrType&&"ie"!==this.table.browser){u.setAttribute("type","search")}}if("input"==t.modules.filter.tagType||"select"==t.modules.filter.tagType||"textarea"==t.modules.filter.tagType){u.addEventListener("mousedown",function(t){t.stopPropagation()})}}p.appendChild(u);t.contentElement.appendChild(p);if(!l){r.headerFilterColumns.push(t)}}}else{console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)}};D.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(t){if(t.modules.filter&&t.modules.filter.headerElement){t.modules.filter.headerElement.style.display="none"}})};D.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach(function(t){if(t.modules.filter&&t.modules.filter.headerElement){t.modules.filter.headerElement.style.display=""}})};D.prototype.setHeaderFilterFocus=function(t){if(t.modules.filter&&t.modules.filter.headerElement){t.modules.filter.headerElement.focus()}else{console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())}};D.prototype.getHeaderFilterValue=function(t){if(t.modules.filter&&t.modules.filter.headerElement){return t.modules.filter.headerElement.value}else{console.warn("Column Filter Error - No header filter set on column:",t.getField())}};D.prototype.setHeaderFilterValue=function(t,o){if(t){if(t.modules.filter&&t.modules.filter.headerElement){this.generateHeaderFilterElement(t,o,!0);t.modules.filter.success(o)}else{console.warn("Column Filter Error - No header filter set on column:",t.getField())}}};D.prototype.reloadHeaderFilter=function(t){if(t){if(t.modules.filter&&t.modules.filter.headerElement){this.generateHeaderFilterElement(t,t.modules.filter.value,!0)}else{console.warn("Column Filter Error - No header filter set on column:",t.getField())}}};D.prototype.hasChanged=function(){var t=this.changed;this.changed=!1;return t};D.prototype.setFilter=function(t,o,l,a){var n=this;n.filterList=[];if(!Array.isArray(t)){t=[{field:t,type:o,value:l,params:a}]}n.addFilter(t)};D.prototype.addFilter=function(t,o,l,a){var n=this;if(!Array.isArray(t)){t=[{field:t,type:o,value:l,params:a}]}t.forEach(function(t){t=n.findFilter(t);if(t){n.filterList.push(t);n.changed=!0}});if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter){this.table.modules.persistence.save("filter")}};D.prototype.findFilter=function(t){var o=this,l;if(Array.isArray(t)){return this.findSubFilters(t)}var a=!1;if("function"==typeof t.field){a=function(o){return t.field(o,t.type||{})}}else{if(o.filters[t.type]){l=o.table.columnManager.getColumnByField(t.field);if(l){a=function(a){return o.filters[t.type](t.value,l.getFieldValue(a),a,t.params||{})}}else{a=function(l){return o.filters[t.type](t.value,l[t.field],l,t.params||{})}}}else{console.warn("Filter Error - No such filter type found, ignoring: ",t.type)}}t.func=a;return t.func?t:!1};D.prototype.findSubFilters=function(t){var o=this,l=[];t.forEach(function(t){t=o.findFilter(t);if(t){l.push(t)}});return l.length?l:!1};D.prototype.getFilters=function(t,o){var l=[];if(t){l=this.getHeaderFilters()}if(o){l.forEach(function(t){if("function"==typeof t.type){t.type="function"}})}l=l.concat(this.filtersToArray(this.filterList,o));return l};D.prototype.filtersToArray=function(t,o){var l=this,a=[];t.forEach(function(t){var n;if(Array.isArray(t)){a.push(l.filtersToArray(t,o))}else{n={field:t.field,type:t.type,value:t.value};if(o){if("function"==typeof n.type){n.type="function"}}a.push(n)}});return a};D.prototype.getHeaderFilters=function(){var t=this,o=[];for(var l in this.headerFilters){o.push({field:l,type:this.headerFilters[l].type,value:this.headerFilters[l].value})}return o};D.prototype.removeFilter=function(t,o,l){var a=this;if(!Array.isArray(t)){t=[{field:t,type:o,value:l}]}t.forEach(function(t){var o=-1;if("object"==_typeof(t.field)){o=a.filterList.findIndex(function(o){return t===o})}else{o=a.filterList.findIndex(function(o){return t.field===o.field&&t.type===o.type&&t.value===o.value})}if(-1<o){a.filterList.splice(o,1);a.changed=!0}else{console.warn("Filter Error - No matching filter type found, ignoring: ",t.type)}});if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter){this.table.modules.persistence.save("filter")}};D.prototype.clearFilter=function(t){this.filterList=[];if(t){this.clearHeaderFilter()}this.changed=!0;if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter){this.table.modules.persistence.save("filter")}};D.prototype.clearHeaderFilter=function(){var t=this;this.headerFilters={};t.prevHeaderFilterChangeCheck="{}";this.headerFilterColumns.forEach(function(o){if("undefined"!=typeof o.modules.filter.value){delete o.modules.filter.value}o.modules.filter.prevSuccess=void 0;t.reloadHeaderFilter(o)});this.changed=!0};D.prototype.search=function(t,o,l,a){var n=this,r=[],s=[];if(!Array.isArray(o)){o=[{field:o,type:l,value:a}]}o.forEach(function(t){t=n.findFilter(t);if(t){s.push(t)}});this.table.rowManager.rows.forEach(function(o){var l=!0;s.forEach(function(t){if(!n.filterRecurse(t,o.getData())){l=!1}});if(l){r.push("data"===t?o.getData("data"):o.getComponent())}});return r};D.prototype.filter=function(t){var o=this,l=[],a=[];if(o.table.options.dataFiltering){o.table.options.dataFiltering.call(o.table,o.getFilters())}if(!o.table.options.ajaxFiltering&&(o.filterList.length||Object.keys(o.headerFilters).length)){t.forEach(function(t){if(o.filterRow(t)){l.push(t)}})}else{l=t.slice(0)}if(o.table.options.dataFiltered){l.forEach(function(t){a.push(t.getComponent())});o.table.options.dataFiltered.call(o.table,o.getFilters(),a)}return l};D.prototype.filterRow=function(t){var o=this,l=!0,a=t.getData();o.filterList.forEach(function(t){if(!o.filterRecurse(t,a)){l=!1}});for(var n in o.headerFilters){if(!o.headerFilters[n].func(a)){l=!1}}return l};D.prototype.filterRecurse=function(t,o){var l=this,a=!1;if(Array.isArray(t)){t.forEach(function(t){if(l.filterRecurse(t,o)){a=!0}})}else{a=t.func(o)}return a};D.prototype.filters={"=":function(t,o){return o==t?!0:!1},"<":function(t,o){return o<t?!0:!1},"<=":function(t,o){return o<=t?!0:!1},">":function(t,o){return o>t?!0:!1},">=":function(t,o){return o>=t?!0:!1},"!=":function(t,o){return o!=t?!0:!1},regex:function(t,o){if("string"==typeof t){t=new RegExp(t)}return t.test(o)},like:function(t,o){if(null===t||"undefined"==typeof t){return o===t?!0:!1}else{if("undefined"!=typeof o&&null!==o){return-1<(o+"").toLowerCase().indexOf(t.toLowerCase())}else{return!1}}},keywords:function t(o,l,a,n){var t=o.toLowerCase().split("undefined"==typeof n.separator?" ":n.separator),r=((null===l||"undefined"==typeof l?"":l)+"").toLowerCase(),s=[];t.forEach(function(t){if(r.includes(t)){s.push(!0)}});return n.matchAll?s.length===t.length:!!s.length},starts:function(t,o){if(null===t||"undefined"==typeof t){return o===t?!0:!1}else{if("undefined"!=typeof o&&null!==o){return(o+"").toLowerCase().startsWith(t.toLowerCase())}else{return!1}}},ends:function(t,o){if(null===t||"undefined"==typeof t){return o===t?!0:!1}else{if("undefined"!=typeof o&&null!==o){return(o+"").toLowerCase().endsWith(t.toLowerCase())}else{return!1}}},in:function(t,o){if(Array.isArray(t)){return t.length?-1<t.indexOf(o):!0}else{console.warn("Filter Error - filter value is not an array:",t);return!1}}};u.prototype.registerModule("filter",D);var T=function(t){this.table=t};T.prototype.initializeColumn=function(t){t.modules.format=this.lookupFormatter(t,"");if("undefined"!=typeof t.definition.formatterPrint){t.modules.format.print=this.lookupFormatter(t,"Print")}if("undefined"!=typeof t.definition.formatterClipboard){t.modules.format.clipboard=this.lookupFormatter(t,"Clipboard")}if("undefined"!=typeof t.definition.formatterHtmlOutput){t.modules.format.htmlOutput=this.lookupFormatter(t,"HtmlOutput")}};T.prototype.lookupFormatter=function(t,o){var l={params:t.definition["formatter"+o+"Params"]||{}},a=t.definition["formatter"+o];switch("undefined"==typeof a?"undefined":_typeof(a)){case"string":if("tick"===a){a="tickCross";if("undefined"==typeof l.params.crossElement){l.params.crossElement=!1}console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")}if(this.formatters[a]){l.formatter=this.formatters[a]}else{console.warn("Formatter Error - No such formatter found: ",a);l.formatter=this.formatters.plaintext}break;case"function":l.formatter=a;break;default:l.formatter=this.formatters.plaintext;break;}return l};T.prototype.cellRendered=function(t){if(t.modules.format&&t.modules.format.renderedCallback&&!t.modules.format.rendered){t.modules.format.renderedCallback();t.modules.format.rendered=!0}};T.prototype.formatValue=function(t){var o=t.getComponent(),l="function"==typeof t.column.modules.format.params?t.column.modules.format.params(o):t.column.modules.format.params;return t.column.modules.format.formatter.call(this,o,l,function(o){if(!t.modules.format){t.modules.format={}}t.modules.format.renderedCallback=o;t.modules.format.rendered=!1})};T.prototype.formatExportValue=function(t,o){var l=t.column.modules.format[o],a;if(l){var n=function(o){if(!t.modules.format){t.modules.format={}}t.modules.format.renderedCallback=o;t.modules.format.rendered=!1};a="function"==typeof l.params?l.params(component):l.params;return l.formatter.call(this,t.getComponent(),a,n)}else{return this.formatValue(t)}};T.prototype.sanitizeHTML=function(t){if(t){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return(t+"").replace(/[&<>"'`=\/]/g,function(t){return o[t]})}else{return t}};T.prototype.emptyToSpace=function(t){return null===t||"undefined"==typeof t||""===t?"&nbsp;":t};T.prototype.getFormatter=function(t){var t;switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":if(this.formatters[t]){t=this.formatters[t]}else{console.warn("Formatter Error - No such formatter found: ",t);t=this.formatters.plaintext}break;case"function":t=t;break;default:t=this.formatters.plaintext;break;}return t};T.prototype.formatters={plaintext:function(t){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t){return t.getValue()},textarea:function(t){t.getElement().style.whiteSpace="pre-wrap";return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,o){var l=parseFloat(t.getValue()),a,n,r,s,d=o.decimal||".",p=o.thousand||",",c=o.symbol||"",u=!!o.symbolAfter,m="undefined"!=typeof o.precision?o.precision:2;if(isNaN(l)){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))}a=!1!==m?l.toFixed(m):l;a=(a+"").split(".");n=a[0];r=1<a.length?d+a[1]:"";s=/(\d+)(\d{3})/;while(s.test(n)){n=n.replace(s,"$1"+p+"$2")}return u?n+r+c:c+n+r},link:function(t,o){var l=t.getValue(),a=o.urlPrefix||"",n=o.download,r=l,s=document.createElement("a"),d;if(o.labelField){d=t.getData();r=d[o.labelField]}if(o.label){switch(_typeof(o.label)){case"string":r=o.label;break;case"function":r=o.label(t);break;}}if(r){if(o.urlField){d=t.getData();l=d[o.urlField]}if(o.url){switch(_typeof(o.url)){case"string":l=o.url;break;case"function":l=o.url(t);break;}}s.setAttribute("href",a+l);if(o.target){s.setAttribute("target",o.target)}if(o.download){if("function"==typeof n){n=n(t)}else{n=!0===n?"":n}s.setAttribute("download",n)}s.innerHTML=this.emptyToSpace(this.sanitizeHTML(r));return s}else{return"&nbsp;"}},image:function(t,o){var l=document.createElement("img"),a=t.getValue();if(o.urlPrefix){a=o.urlPrefix+t.getValue()}if(o.urlSuffix){a=a+o.urlSuffix}l.setAttribute("src",a);switch(_typeof(o.height)){case"number":l.style.height=o.height+"px";break;case"string":l.style.height=o.height;break;}switch(_typeof(o.width)){case"number":l.style.width=o.width+"px";break;case"string":l.style.width=o.width;break;}l.addEventListener("load",function(){t.getRow().normalizeHeight()});return l},tickCross:function(t,o){var l=t.getValue(),a=t.getElement(),n=o.allowEmpty,r=o.allowTruthy,s="undefined"!=typeof o.tickElement?o.tickElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>",d="undefined"!=typeof o.crossElement?o.crossElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>";if(r&&l||!0===l||"true"===l||"True"===l||1===l||"1"===l){a.setAttribute("aria-checked",!0);return s||""}else{if(n&&("null"===l||""===l||null===l||"undefined"==typeof l)){a.setAttribute("aria-checked","mixed");return""}else{a.setAttribute("aria-checked",!1);return d||""}}},datetime:function(t,o){var l=o.inputFormat||"YYYY-MM-DD hh:mm:ss",a=o.outputFormat||"DD/MM/YYYY hh:mm:ss",n="undefined"!=typeof o.invalidPlaceholder?o.invalidPlaceholder:"",r=t.getValue(),s=moment(r,l);if(s.isValid()){return o.timezone?s.tz(o.timezone).format(a):s.format(a)}else{if(!0===n){return r}else if("function"==typeof n){return n(r)}else{return n}}},datetimediff:function(t,o){var l=o.inputFormat||"YYYY-MM-DD hh:mm:ss",a="undefined"!=typeof o.invalidPlaceholder?o.invalidPlaceholder:"",n="undefined"!=typeof o.suffix?o.suffix:!1,r="undefined"!=typeof o.unit?o.unit:void 0,s="undefined"!=typeof o.humanize?o.humanize:!1,d="undefined"!=typeof o.date?o.date:moment(),p=t.getValue(),c=moment(p,l);if(c.isValid()){if(s){return moment.duration(c.diff(d)).humanize(n)}else{return c.diff(d,r)+(n?" "+n:"")}}else{if(!0===a){return p}else if("function"==typeof a){return a(p)}else{return a}}},lookup:function(t,o){var l=t.getValue();if("undefined"==typeof o[l]){console.warn("Missing display value for "+l);return l}return o[l]},star:function t(o,l){var a=o.getValue(),n=o.getElement(),r=l&&l.stars?l.stars:5,s=document.createElement("span"),t=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.verticalAlign="middle";t.setAttribute("width","14");t.setAttribute("height","14");t.setAttribute("viewBox","0 0 512 512");t.setAttribute("xml:space","preserve");t.style.padding="0 1px";a=a&&!isNaN(a)?parseInt(a):0;a=Math.max(0,Math.min(a,r));for(var d=1,p;d<=r;d++){p=t.cloneNode(!0);p.innerHTML=d<=a?"<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>":"<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>";s.appendChild(p)}n.style.whiteSpace="nowrap";n.style.overflow="hidden";n.style.textOverflow="ellipsis";n.setAttribute("aria-label",a);return s},traffic:function(t,o){var l=this.sanitizeHTML(t.getValue())||0,a=document.createElement("span"),n=o&&o.max?o.max:100,r=o&&o.min?o.min:0,s=o&&"undefined"!=typeof o.color?o.color:["red","orange","green"],d="#666666",p,c;if(isNaN(l)||"undefined"==typeof t.getValue()){return}a.classList.add("tabulator-traffic-light");c=parseFloat(l)<=n?parseFloat(l):n;c=parseFloat(c)>=r?parseFloat(c):r;p=(n-r)/100;c=Math.round((c-r)/p);switch("undefined"==typeof s?"undefined":_typeof(s)){case"string":d=s;break;case"function":d=s(l);break;case"object":if(Array.isArray(s)){var u=100/s.length,m=Math.floor(c/u);m=Math.min(m,s.length-1);m=Math.max(m,0);d=s[m];break}}a.style.backgroundColor=d;return a},progress:function(t,o,l){var a=this.sanitizeHTML(t.getValue())||0,n=t.getElement(),r=o&&o.max?o.max:100,s=o&&o.min?o.min:0,p=o&&o.legendAlign?o.legendAlign:"center",c,u,m,g,h;u=parseFloat(a)<=r?parseFloat(a):r;u=parseFloat(u)>=s?parseFloat(u):s;c=(r-s)/100;u=Math.round((u-s)/c);switch(_typeof(o.color)){case"string":m=o.color;break;case"function":m=o.color(a);break;case"object":if(Array.isArray(o.color)){var b=100/o.color.length,f=Math.floor(u/b);f=Math.min(f,o.color.length-1);f=Math.max(f,0);m=o.color[f];break}default:m="#2DC214";}switch(_typeof(o.legend)){case"string":g=o.legend;break;case"function":g=o.legend(a);break;case"boolean":g=a;break;default:g=!1;}switch(_typeof(o.legendColor)){case"string":h=o.legendColor;break;case"function":h=o.legendColor(a);break;case"object":if(Array.isArray(o.legendColor)){var b=100/o.legendColor.length,f=Math.floor(u/b);f=Math.min(f,o.legendColor.length-1);f=Math.max(f,0);h=o.legendColor[f]}break;default:h="#000";}n.style.minWidth="30px";n.style.position="relative";n.setAttribute("aria-label",u);var y=document.createElement("div");y.style.display="inline-block";y.style.position="relative";y.style.width=u+"%";y.style.backgroundColor=m;y.style.height="100%";y.setAttribute("data-max",r);y.setAttribute("data-min",s);if(g){var w=document.createElement("div");w.style.position="absolute";w.style.top="4px";w.style.left=0;w.style.textAlign=p;w.style.width="100%";w.style.color=h;w.innerHTML=g}l(function(){if(!(t instanceof d)){var o=document.createElement("div");o.style.position="absolute";o.style.top="4px";o.style.bottom="4px";o.style.left="4px";o.style.right="4px";n.appendChild(o);n=o}n.appendChild(y);if(g){n.appendChild(w)}});return""},color:function(t){t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue());return""},buttonTick:function(){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>"},buttonCross:function(){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>"},rownum:function(t){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t){t.getElement().classList.add("tabulator-row-handle");return"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(t){var l=this,a=document.createElement("div"),n=t.getRow()._row.modules.responsiveLayout;a.classList.add("tabulator-responsive-collapse-toggle");a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>";t.getElement().classList.add("tabulator-row-handle");function o(t){var o=n.element;n.open=t;if(o){if(n.open){a.classList.add("open");o.style.display=""}else{a.classList.remove("open");o.style.display="none"}}}a.addEventListener("click",function(t){t.stopImmediatePropagation();o(!n.open)});o(n.open);return a},rowSelection:function(t,o){var l=this,a=document.createElement("input");a.type="checkbox";if(this.table.modExists("selectRow",!0)){a.addEventListener("click",function(t){t.stopPropagation()});if("function"==typeof t.getRow){var n=t.getRow();if(n instanceof r){a.addEventListener("change",function(){n.toggleSelect()});a.checked=n.isSelected&&n.isSelected();this.table.modules.selectRow.registerRowSelectCheckbox(n,a)}else{a=""}}else{a.addEventListener("change",function(){if(l.table.modules.selectRow.selectedRows.length){l.table.deselectRow()}else{l.table.selectRow(o.rowRange)}});this.table.modules.selectRow.registerHeaderSelectCheckbox(a)}}return a}};u.prototype.registerModule("format",T);var z=function(t){this.table=t;this.leftColumns=[];this.rightColumns=[];this.leftMargin=0;this.rightMargin=0;this.rightPadding=0;this.initializationMode="left";this.active=!1;this.scrollEndTimer=!1};z.prototype.reset=function(){this.initializationMode="left";this.leftColumns=[];this.rightColumns=[];this.leftMargin=0;this.rightMargin=0;this.rightMargin=0;this.active=!1;this.table.columnManager.headersElement.style.marginLeft=0;this.table.columnManager.element.style.paddingRight=0};z.prototype.initializeColumn=function(t){var o={margin:0,edge:!1};if(!t.isGroup){if(this.frozenCheck(t)){o.position=this.initializationMode;if("left"==this.initializationMode){this.leftColumns.push(t)}else{this.rightColumns.unshift(t)}this.active=!0;t.modules.frozen=o}else{this.initializationMode="right"}}};z.prototype.frozenCheck=function(t){if(t.parent.isGroup&&t.definition.frozen){console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups")}if(t.parent.isGroup){return this.frozenCheck(t.parent)}else{return t.definition.frozen}return!1};z.prototype.scrollHorizontal=function(){var t=this,o;if(this.active){clearTimeout(this.scrollEndTimer);this.scrollEndTimer=setTimeout(function(){t.layout()},100);o=this.table.rowManager.getVisibleRows();this.calcMargins();this.layoutColumnPosition();this.layoutCalcRows();o.forEach(function(o){if("row"===o.type){t.layoutRow(o)}});this.table.rowManager.tableElement.style.marginRight=this.rightMargin}};z.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px";this.table.columnManager.headersElement.style.marginLeft=this.leftMargin;this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px";this.table.columnManager.element.style.paddingRight=this.rightMargin;this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft};z.prototype.layoutCalcRows=function(){if(this.table.modExists("columnCalcs")){if(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow){this.layoutRow(this.table.modules.columnCalcs.topRow)}if(this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow){this.layoutRow(this.table.modules.columnCalcs.botRow)}}};z.prototype.layoutColumnPosition=function(t){var o=this,l=[];this.leftColumns.forEach(function(a,n){a.modules.frozen.margin=o._calcSpace(o.leftColumns,n)+o.table.columnManager.scrollLeft+"px";if(n==o.leftColumns.length-1){a.modules.frozen.edge=!0}else{a.modules.frozen.edge=!1}if(a.parent.isGroup){var r=o.getColGroupParentElement(a);if(!l.includes(r)){o.layoutElement(r,a);l.push(r)}if(a.modules.frozen.edge){r.classList.add("tabulator-frozen-"+a.modules.frozen.position)}}else{o.layoutElement(a.getElement(),a)}if(t){a.cells.forEach(function(t){o.layoutElement(t.getElement(!0),a)})}});this.rightColumns.forEach(function(l,a){l.modules.frozen.margin=o.rightPadding-o._calcSpace(o.rightColumns,a+1)+"px";if(a==o.rightColumns.length-1){l.modules.frozen.edge=!0}else{l.modules.frozen.edge=!1}if(l.parent.isGroup){o.layoutElement(o.getColGroupParentElement(l),l)}else{o.layoutElement(l.getElement(),l)}if(t){l.cells.forEach(function(t){o.layoutElement(t.getElement(!0),l)})}})};z.prototype.getColGroupParentElement=function(t){return t.parent.isGroup?this.getColGroupParentElement(t.parent):t.getElement()};z.prototype.layout=function(){var t=this;if(t.active){this.calcMargins();t.table.rowManager.getDisplayRows().forEach(function(o){if("row"===o.type){t.layoutRow(o)}});this.layoutCalcRows();this.layoutColumnPosition(!0);this.table.rowManager.tableElement.style.marginRight=this.rightMargin}};z.prototype.layoutRow=function(t){var o=this,l=t.getElement();l.style.paddingLeft=this.leftMargin;this.leftColumns.forEach(function(l){var a=t.getCell(l);if(a){o.layoutElement(a.getElement(!0),l)}});this.rightColumns.forEach(function(l){var a=t.getCell(l);if(a){o.layoutElement(a.getElement(!0),l)}})};z.prototype.layoutElement=function(t,o){if(o.modules.frozen){t.style.position="absolute";t.style.left=o.modules.frozen.margin;t.classList.add("tabulator-frozen");if(o.modules.frozen.edge){t.classList.add("tabulator-frozen-"+o.modules.frozen.position)}}};z.prototype._calcSpace=function(t,o){for(var l=0,a=0;a<o;a++){if(t[a].visible){l+=t[a].getWidth()}}return l};u.prototype.registerModule("frozenColumns",z);var H=function(t){this.table=t;this.topElement=document.createElement("div");this.rows=[];this.displayIndex=0};H.prototype.initialize=function(){this.rows=[];this.topElement.classList.add("tabulator-frozen-rows-holder");this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)};H.prototype.setDisplayIndex=function(t){this.displayIndex=t};H.prototype.getDisplayIndex=function(){return this.displayIndex};H.prototype.isFrozen=function(){return!!this.rows.length};H.prototype.getRows=function(t){var o=this,l=t.slice(0);this.rows.forEach(function(t){var o=l.indexOf(t);if(-1<o){l.splice(o,1)}});return l};H.prototype.freezeRow=function(t){if(!t.modules.frozen){t.modules.frozen=!0;this.topElement.appendChild(t.getElement());t.initialize();t.normalizeHeight();this.table.rowManager.adjustTableSize();this.rows.push(t);this.table.rowManager.refreshActiveData("display");this.styleRows()}else{console.warn("Freeze Error - Row is already frozen")}};H.prototype.unfreezeRow=function(t){this.rows.indexOf(t);if(t.modules.frozen){t.modules.frozen=!1;this.detachRow(t);this.table.rowManager.adjustTableSize();this.table.rowManager.refreshActiveData("display");if(this.rows.length){this.styleRows()}}else{console.warn("Freeze Error - Row is already unfrozen")}};H.prototype.detachRow=function(t){var o=this.rows.indexOf(t);if(-1<o){var l=t.getElement();l.parentNode.removeChild(l);this.rows.splice(o,1)}};H.prototype.styleRows=function(){var t=this;this.rows.forEach(function(o,l){t.table.rowManager.styleRow(o,l)})};u.prototype.registerModule("frozenRows",H);var k=function(t){this._group=t;this.type="GroupComponent"};k.prototype.getKey=function(){return this._group.key};k.prototype.getField=function(){return this._group.field};k.prototype.getElement=function(){return this._group.element};k.prototype.getRows=function(){return this._group.getRows(!0)};k.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)};k.prototype.getParentGroup=function(){return this._group.parent?this._group.parent.getComponent():!1};k.prototype.getVisibility=function(){console.warn("getVisibility function is deprecated, you should now use the isVisible function");return this._group.visible};k.prototype.isVisible=function(){return this._group.visible};k.prototype.show=function(){this._group.show()};k.prototype.hide=function(){this._group.hide()};k.prototype.toggle=function(){this._group.toggleVisibility()};k.prototype._getSelf=function(){return this._group};k.prototype.getTable=function(){return this._group.groupManager.table};var S=function(t,o,l,a,n,r,s){this.groupManager=t;this.parent=o;this.key=a;this.level=l;this.field=n;this.hasSubGroups=l<t.groupIDLookups.length-1;this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow;this.type="group";this.old=s;this.rows=[];this.groups=[];this.groupList=[];this.generator=r;this.elementContents=!1;this.height=0;this.outerHeight=0;this.initialized=!1;this.calcs={};this.initialized=!1;this.modules={};this.arrowElement=!1;this.visible=s?s.visible:"undefined"!=typeof t.startOpen[l]?t.startOpen[l]:t.startOpen[0];this.component=null;this.createElements();this.addBindings();this.createValueGroups()};S.prototype.wipe=function(){if(this.groupList.length){this.groupList.forEach(function(t){t.wipe()})}else{this.element=!1;this.arrowElement=!1;this.elementContents=!1}};S.prototype.createElements=function(){var t=document.createElement("div");t.classList.add("tabulator-arrow");this.element=document.createElement("div");this.element.classList.add("tabulator-row");this.element.classList.add("tabulator-group");this.element.classList.add("tabulator-group-level-"+this.level);this.element.setAttribute("role","rowgroup");this.arrowElement=document.createElement("div");this.arrowElement.classList.add("tabulator-group-toggle");this.arrowElement.appendChild(t);if(!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")){this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}};S.prototype.createValueGroups=function(){var t=this,o=this.level+1;if(this.groupManager.allowedValues&&this.groupManager.allowedValues[o]){this.groupManager.allowedValues[o].forEach(function(l){t._createGroup(l,o)})}};S.prototype.addBindings=function(){var t=this,o,l,a,n;if(t.groupManager.table.options.groupClick){t.element.addEventListener("click",function(o){t.groupManager.table.options.groupClick.call(t.groupManager.table,o,t.getComponent())})}if(t.groupManager.table.options.groupDblClick){t.element.addEventListener("dblclick",function(o){t.groupManager.table.options.groupDblClick.call(t.groupManager.table,o,t.getComponent())})}if(t.groupManager.table.options.groupContext){t.element.addEventListener("contextmenu",function(o){t.groupManager.table.options.groupContext.call(t.groupManager.table,o,t.getComponent())})}if((t.groupManager.table.options.groupContextMenu||t.groupManager.table.options.groupClickMenu)&&t.groupManager.table.modExists("menu")){t.groupManager.table.modules.menu.initializeGroup.call(t.groupManager.table.modules.menu,t)}if(t.groupManager.table.options.groupTap){a=!1;t.element.addEventListener("touchstart",function(){a=!0},{passive:!0});t.element.addEventListener("touchend",function(o){if(a){t.groupManager.table.options.groupTap(o,t.getComponent())}a=!1})}if(t.groupManager.table.options.groupDblTap){o=null;t.element.addEventListener("touchend",function(l){if(o){clearTimeout(o);o=null;t.groupManager.table.options.groupDblTap(l,t.getComponent())}else{o=setTimeout(function(){clearTimeout(o);o=null},300)}})}if(t.groupManager.table.options.groupTapHold){l=null;t.element.addEventListener("touchstart",function(o){clearTimeout(l);l=setTimeout(function(){clearTimeout(l);l=null;a=!1;t.groupManager.table.options.groupTapHold(o,t.getComponent())},1e3)},{passive:!0});t.element.addEventListener("touchend",function(){clearTimeout(l);l=null})}if(t.groupManager.table.options.groupToggleElement){n="arrow"==t.groupManager.table.options.groupToggleElement?t.arrowElement:t.element;n.addEventListener("click",function(o){o.stopPropagation();o.stopImmediatePropagation();t.toggleVisibility()})}};S.prototype._createGroup=function(t,o){var l=o+"_"+t,a=new S(this.groupManager,this,o,t,this.groupManager.groupIDLookups[o].field,this.groupManager.headerGenerator[o]||this.groupManager.headerGenerator[0],this.old?this.old.groups[l]:!1);this.groups[l]=a;this.groupList.push(a)};S.prototype._addRowToGroup=function(t){var o=this.level+1;if(this.hasSubGroups){var l=this.groupManager.groupIDLookups[o].func(t.getData()),a=o+"_"+l;if(this.groupManager.allowedValues&&this.groupManager.allowedValues[o]){if(this.groups[a]){this.groups[a].addRow(t)}}else{if(!this.groups[a]){this._createGroup(l,o)}this.groups[a].addRow(t)}}};S.prototype._addRow=function(t){this.rows.push(t);t.modules.group=this};S.prototype.insertRow=function(t,o,l){var a=this.conformRowData({});t.updateData(a);var n=this.rows.indexOf(o);if(-1<n){if(l){this.rows.splice(n+1,0,t)}else{this.rows.splice(n,0,t)}}else{if(l){this.rows.push(t)}else{this.rows.unshift(t)}}t.modules.group=this;this.generateGroupHeaderContents();if(this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs){this.groupManager.table.modules.columnCalcs.recalcGroup(this)}this.groupManager.updateGroupRows(!0)};S.prototype.scrollHeader=function(t){this.arrowElement.style.marginLeft=t;this.groupList.forEach(function(o){o.scrollHeader(t)})};S.prototype.getRowIndex=function(){};S.prototype.conformRowData=function(t){if(this.field){t[this.field]=this.key}else{console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function")}if(this.parent){t=this.parent.conformRowData(t)}return t};S.prototype.removeRow=function(t){var o=this.rows.indexOf(t),l=t.getElement();if(-1<o){this.rows.splice(o,1)}if(!this.groupManager.table.options.groupValues&&!this.rows.length){if(this.parent){this.parent.removeGroup(this)}else{this.groupManager.removeGroup(this)}this.groupManager.updateGroupRows(!0)}else{if(l.parentNode){l.parentNode.removeChild(l)}this.generateGroupHeaderContents();if(this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs){this.groupManager.table.modules.columnCalcs.recalcGroup(this)}}};S.prototype.removeGroup=function(t){var o=t.level+"_"+t.key,l;if(this.groups[o]){delete this.groups[o];l=this.groupList.indexOf(t);if(-1<l){this.groupList.splice(l,1)}if(!this.groupList.length){if(this.parent){this.parent.removeGroup(this)}else{this.groupManager.removeGroup(this)}}}};S.prototype.getHeadersAndRows=function(t){var o=[this];this._visSet();if(this.visible){if(this.groupList.length){this.groupList.forEach(function(l){o=o.concat(l.getHeadersAndRows(t))})}else{if(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()){if(this.calcs.top){this.calcs.top.detachElement();this.calcs.top.deleteCells()}this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);o.push(this.calcs.top)}o=o.concat(this.rows);if(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){if(this.calcs.bottom){this.calcs.bottom.detachElement();this.calcs.bottom.deleteCells()}this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);o.push(this.calcs.bottom)}}}else{if(!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs){if(this.groupManager.table.modExists("columnCalcs")){if(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()){if(this.calcs.top){this.calcs.top.detachElement();this.calcs.top.deleteCells()}if(this.groupManager.table.options.groupClosedShowCalcs){this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);o.push(this.calcs.top)}}if(!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){if(this.calcs.bottom){this.calcs.bottom.detachElement();this.calcs.bottom.deleteCells()}if(this.groupManager.table.options.groupClosedShowCalcs){this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);o.push(this.calcs.bottom)}}}}}return o};S.prototype.getData=function(t,o){var l=this,a=[];this._visSet();if(!t||t&&this.visible){this.rows.forEach(function(t){a.push(t.getData(o||"data"))})}return a};S.prototype.getRowCount=function(){var t=0;if(this.groupList.length){this.groupList.forEach(function(o){t+=o.getRowCount()})}else{t=this.rows.length}return t};S.prototype.toggleVisibility=function(){if(this.visible){this.hide()}else{this.show()}};S.prototype.hide=function(){this.visible=!1;if("classic"==this.groupManager.table.rowManager.getRenderMode()&&!this.groupManager.table.options.pagination){this.element.classList.remove("tabulator-group-visible");if(this.groupList.length){this.groupList.forEach(function(t){var o=t.getHeadersAndRows();o.forEach(function(t){t.detachElement()})})}else{this.rows.forEach(function(t){var o=t.getElement();o.parentNode.removeChild(o)})}this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex());this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}else{this.groupManager.updateGroupRows(!0)}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)};S.prototype.show=function(){var t=this;t.visible=!0;if("classic"==this.groupManager.table.rowManager.getRenderMode()&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var o=t.getElement();if(this.groupList.length){this.groupList.forEach(function(t){var l=t.getHeadersAndRows();l.forEach(function(t){var l=t.getElement();o.parentNode.insertBefore(l,o.nextSibling);t.initialize();o=l})})}else{t.rows.forEach(function(t){var l=t.getElement();o.parentNode.insertBefore(l,o.nextSibling);t.initialize();o=l})}this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex());this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}else{this.groupManager.updateGroupRows(!0)}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)};S.prototype._visSet=function(){var t=[];if("function"==typeof this.visible){this.rows.forEach(function(o){t.push(o.getData())});this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent())}};S.prototype.getRowGroup=function(t){var o=!1;if(this.groupList.length){this.groupList.forEach(function(l){var a=l.getRowGroup(t);if(a){o=a}})}else{if(this.rows.find(function(o){return o===t})){o=this}}return o};S.prototype.getSubGroups=function(t){var o=[];this.groupList.forEach(function(l){o.push(t?l.getComponent():l)});return o};S.prototype.getRows=function(t){var o=[];this.rows.forEach(function(l){o.push(t?l.getComponent():l)});return o};S.prototype.generateGroupHeaderContents=function(){var t=[];this.rows.forEach(function(o){t.push(o.getData())});this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}if("string"==typeof this.elementContents){this.element.innerHTML=this.elementContents}else{this.element.appendChild(this.elementContents)}this.element.insertBefore(this.arrowElement,this.element.firstChild)};S.prototype.getPath=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];t.unshift(this.key);if(this.parent){this.parent.getPath(t)}return t};S.prototype.getElement=function(){this.addBindingsd=!1;this._visSet();if(this.visible){this.element.classList.add("tabulator-group-visible")}else{this.element.classList.remove("tabulator-group-visible")}for(var t=0;t<this.element.childNodes.length;++t){this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t])}this.generateGroupHeaderContents();return this.element};S.prototype.detachElement=function(){if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}};S.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)};S.prototype.initialize=function(t){if(!this.initialized||t){this.normalizeHeight();this.initialized=!0}};S.prototype.reinitialize=function(){this.initialized=!1;this.height=0;if(u.prototype.helpers.elVisible(this.element)){this.initialize(!0)}};S.prototype.setHeight=function(t){if(this.height!=t){this.height=t;this.outerHeight=this.element.offsetHeight}};S.prototype.getHeight=function(){return this.outerHeight};S.prototype.getGroup=function(){return this};S.prototype.reinitializeHeight=function(){};S.prototype.calcHeight=function(){};S.prototype.setCellHeight=function(){};S.prototype.clearCellHeight=function(){};S.prototype.getComponent=function(){if(!this.component){this.component=new k(this)}return this.component};var P=function(t){this.table=t;this.groupIDLookups=!1;this.startOpen=[function(){return!1}];this.headerGenerator=[function(){return""}];this.groupList=[];this.allowedValues=!1;this.groups={};this.displayIndex=0};P.prototype.initialize=function(){var t=this,o=t.table.options.groupBy,l=t.table.options.groupStartOpen,a=t.table.options.groupHeader;this.allowedValues=t.table.options.groupValues;if(Array.isArray(o)&&Array.isArray(a)&&o.length>a.length){console.warn("Error creating group headers, groupHeader array is shorter than groupBy array")}t.headerGenerator=[function(){return""}];this.startOpen=[function(){return!1}];t.table.modules.localize.bind("groups|item",function(o,l){t.headerGenerator[0]=function(t,a){return("undefined"==typeof t?"":t)+"<span>("+a+" "+(1===a?o:l.groups.items)+")</span>"}});this.groupIDLookups=[];if(Array.isArray(o)||o){if(this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs){this.table.modules.columnCalcs.removeCalcs()}}else{if(this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs){var n=this.table.columnManager.getRealColumns();n.forEach(function(o){if(o.definition.topCalc){t.table.modules.columnCalcs.initializeTopRow()}if(o.definition.bottomCalc){t.table.modules.columnCalcs.initializeBottomRow()}})}}if(!Array.isArray(o)){o=[o]}o.forEach(function(o,l){var a,n;if("function"==typeof o){a=o}else{n=t.table.columnManager.getColumnByField(o);if(n){a=function(t){return n.getFieldValue(t)}}else{a=function(t){return t[o]}}}t.groupIDLookups.push({field:"function"==typeof o?!1:o,func:a,values:t.allowedValues?t.allowedValues[l]:!1})});if(l){if(!Array.isArray(l)){l=[l]}l.forEach(function(t){t="function"==typeof t?t:function(){return!0}});t.startOpen=l}if(a){t.headerGenerator=Array.isArray(a)?a:[a]}this.initialized=!0};P.prototype.setDisplayIndex=function(t){this.displayIndex=t};P.prototype.getDisplayIndex=function(){return this.displayIndex};P.prototype.getRows=function(t){if(this.groupIDLookups.length){this.table.options.dataGrouping.call(this.table);this.generateGroups(t);if(this.table.options.dataGrouped){this.table.options.dataGrouped.call(this.table,this.getGroups(!0))}return this.updateGroupRows()}else{return t.slice(0)}};P.prototype.getGroups=function(t){var o=[];this.groupList.forEach(function(l){o.push(t?l.getComponent():l)});return o};P.prototype.getChildGroups=function(t){var o=this,l=[];if(!t){t=this}t.groupList.forEach(function(t){if(t.groupList.length){l=l.concat(o.getChildGroups(t))}else{l.push(t)}});return l};P.prototype.wipe=function(){this.groupList.forEach(function(t){t.wipe()})};P.prototype.pullGroupListData=function(t){var o=this,l=[];t.forEach(function(t){var a={level:0,rowCount:0,headerContent:""},n=[];if(t.hasSubGroups){n=o.pullGroupListData(t.groupList);a.level=t.level;a.rowCount=n.length-t.groupList.length;a.headerContent=t.generator(t.key,a.rowCount,t.rows,t);l.push(a);l=l.concat(n)}else{a.level=t.level;a.headerContent=t.generator(t.key,t.rows.length,t.rows,t);a.rowCount=t.getRows().length;l.push(a);t.getRows().forEach(function(t){l.push(t.getData("data"))})}});return l};P.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)};P.prototype.getRowGroup=function(t){var o=!1;this.groupList.forEach(function(l){var a=l.getRowGroup(t);if(a){o=a}});return o};P.prototype.countGroups=function(){return this.groupList.length};P.prototype.generateGroups=function(t){var o=this,l=o.groups;o.groups={};o.groupList=[];if(this.allowedValues&&this.allowedValues[0]){this.allowedValues[0].forEach(function(t){o.createGroup(t,0,l)});t.forEach(function(t){o.assignRowToExistingGroup(t,l)})}else{t.forEach(function(t){o.assignRowToGroup(t,l)})}};P.prototype.createGroup=function(t,o,l){var a=o+"_"+t,n;l=l||[];n=new S(this,!1,o,t,this.groupIDLookups[0].field,this.headerGenerator[0],l[a]);this.groups[a]=n;this.groupList.push(n)};P.prototype.assignRowToExistingGroup=function(t){var o=this.groupIDLookups[0].func(t.getData()),l="0_"+o;if(this.groups[l]){this.groups[l].addRow(t)}};P.prototype.assignRowToGroup=function(t,o){var l=this.groupIDLookups[0].func(t.getData()),a=!this.groups["0_"+l];if(a){this.createGroup(l,0,o)}this.groups["0_"+l].addRow(t);return!a};P.prototype.reassignRowToGroup=function(t){var o=t.getGroup(),l=o.getPath(),a=this.getExpectedPath(t),n=!0,n=l.length==a.length&&l.every(function(t,o){return t===a[o]});if(!n){o.removeRow(t);this.assignRowToGroup(t,self.groups);this.table.rowManager.refreshActiveData("group",!1,!0)}};P.prototype.getExpectedPath=function(t){var o=[],l=t.getData();this.groupIDLookups.forEach(function(t){o.push(t.func(l))});return o};P.prototype.updateGroupRows=function(t){var o=this,l=[];o.groupList.forEach(function(t){l=l.concat(t.getHeadersAndRows())});if(t){var a=o.table.rowManager.setDisplayRows(l,this.getDisplayIndex());if(!0!==a){this.setDisplayIndex(a)}o.table.rowManager.refreshActiveData("group",!0,!0)}return l};P.prototype.scrollHeaders=function(t){if(this.table.options.virtualDomHoz){t-=this.table.vdomHoz.vDomPadLeft}t=t+"px";this.groupList.forEach(function(o){o.scrollHeader(t)})};P.prototype.removeGroup=function(t){var o=t.level+"_"+t.key,l;if(this.groups[o]){delete this.groups[o];l=this.groupList.indexOf(t);if(-1<l){this.groupList.splice(l,1)}}};u.prototype.registerModule("groupRows",P);var A=function(t){this.table=t;this.history=[];this.index=-1};A.prototype.clear=function(){this.history=[];this.index=-1};A.prototype.action=function(t,o,l){this.history=this.history.slice(0,this.index+1);this.history.push({type:t,component:o,data:l});this.index++};A.prototype.getHistoryUndoSize=function(){return this.index+1};A.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)};A.prototype.clearComponentHistory=function(t){var o=this.history.findIndex(function(o){return o.component===t});if(-1<o){this.history.splice(o,1);if(o<=this.index){this.index--}this.clearComponentHistory(t)}};A.prototype.undo=function(){if(-1<this.index){var t=this.history[this.index];this.undoers[t.type].call(this,t);this.index--;this.table.options.historyUndo.call(this.table,t.type,t.component.getComponent(),t.data);return!0}else{console.warn("History Undo Error - No more history to undo");return!1}};A.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var t=this.history[this.index];this.redoers[t.type].call(this,t);this.table.options.historyRedo.call(this.table,t.type,t.component.getComponent(),t.data);return!0}else{console.warn("History Redo Error - No more history to redo");return!1}};A.prototype.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue)},rowAdd:function(t){t.component.deleteActual()},rowDelete:function(t){var o=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(!0)}this._rebindRow(t.component,o)},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.posFrom],!t.data.after);this.table.rowManager.redraw()}};A.prototype.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue)},rowAdd:function(t){var o=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);if(this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.updateGroupRows(!0)}this._rebindRow(t.component,o)},rowDelete:function(t){t.component.deleteActual()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.posTo],t.data.after);this.table.rowManager.redraw()}};A.prototype._rebindRow=function(t,o){this.history.forEach(function(l){if(l.component instanceof s){if(l.component===t){l.component=o}}else if(l.component instanceof p){if(l.component.row===t){var a=l.component.column.getField();if(a){l.component=o.getCell(a)}}}})};u.prototype.registerModule("history",A);var F=function(t){this.table=t;this.fieldIndex=[];this.hasIndex=!1};F.prototype.parseTable=function(){var t=this,o=t.table.element,l=t.table.options,a=l.columns,n=o.getElementsByTagName("th"),r=o.getElementsByTagName("tbody")[0],s=[];t.hasIndex=!1;t.table.options.htmlImporting.call(this.table);r=r?r.getElementsByTagName("tr"):[];t._extractOptions(o,l);if(n.length){t._extractHeaders(n,r)}else{t._generateBlankHeaders(n,r)}for(var d=0;d<r.length;d++){var p=r[d],c=p.getElementsByTagName("td"),u={};if(!t.hasIndex){u[l.index]=d}for(var m=0,g;m<c.length;m++){g=c[m];if("undefined"!=typeof this.fieldIndex[m]){u[this.fieldIndex[m]]=g.innerHTML}}s.push(u)}var h=document.createElement("div"),b=o.attributes;for(var m in b){if("object"==_typeof(b[m])){h.setAttribute(b[m].name,b[m].value)}}o.parentNode.replaceChild(h,o);l.data=s;t.table.options.htmlImported.call(this.table);this.table.element=h};F.prototype._extractOptions=function(t,o,l){var a=t.attributes,n=l?Object.assign([],l):Object.keys(o),r={};n.forEach(function(t){r[t.toLowerCase()]=t});for(var s in a){var d=a[s],p;if(d&&"object"==("undefined"==typeof d?"undefined":_typeof(d))&&d.name&&0===d.name.indexOf("tabulator-")){p=d.name.replace("tabulator-","");if("undefined"!=typeof r[p]){o[r[p]]=this._attribValue(d.value)}}}};F.prototype._attribValue=function(t){if("true"===t){return!0}if("false"===t){return!1}return t};F.prototype._findCol=function(t){var o=this.table.options.columns.find(function(o){return o.title===t});return o||!1};F.prototype._extractHeaders=function(t){for(var o=0;o<t.length;o++){var a=t[o],n=!1,r=this._findCol(a.textContent),s;if(r){n=!0}else{r={title:a.textContent.trim()}}if(!r.field){r.field=a.textContent.trim().toLowerCase().replace(" ","_")}s=a.getAttribute("width");if(s&&!r.width){r.width=s}a.attributes;this._extractOptions(a,r,l.prototype.defaultOptionList);this.fieldIndex[o]=r.field;if(r.field==this.table.options.index){this.hasIndex=!0}if(!n){this.table.options.columns.push(r)}}};F.prototype._generateBlankHeaders=function(t){for(var o=0;o<t.length;o++){var l=t[o],a={title:"",field:"col"+o};this.fieldIndex[o]=a.field;var n=l.getAttribute("width");if(n){a.width=n}this.table.options.columns.push(a)}};u.prototype.registerModule("htmlTableImport",F);var _=function(t){this.table=t;this.watchKeys=null;this.pressedKeys=null;this.keyupBinding=!1;this.keydownBinding=!1};_.prototype.initialize=function(){var t=this.table.options.keybindings,o={};this.watchKeys={};this.pressedKeys=[];if(!1!==t){for(var l in this.bindings){o[l]=this.bindings[l]}if(Object.keys(t).length){for(var a in t){o[a]=t[a]}}this.mapBindings(o);this.bindEvents()}};_.prototype.mapBindings=function(t){var o=this,l=this,a=function(a){if(o.actions[a]){if(t[a]){if("object"!==_typeof(t[a])){t[a]=[t[a]]}t[a].forEach(function(t){l.mapBinding(a,t)})}}else{console.warn("Key Binding Error - no such action:",a)}};for(var n in t){a(n)}};_.prototype.mapBinding=function(t,o){var l=this,a={action:this.actions[t],keys:[],ctrl:!1,shift:!1,meta:!1},n=o.toString().toLowerCase().split(" ").join("").split("+");n.forEach(function(t){switch(t){case"ctrl":a.ctrl=!0;break;case"shift":a.shift=!0;break;case"meta":a.meta=!0;break;default:t=parseInt(t);a.keys.push(t);if(!l.watchKeys[t]){l.watchKeys[t]=[]}l.watchKeys[t].push(a);}})};_.prototype.bindEvents=function(){var t=this;this.keyupBinding=function(o){var l=o.keyCode,a=t.watchKeys[l];if(a){t.pressedKeys.push(l);a.forEach(function(l){t.checkBinding(o,l)})}};this.keydownBinding=function(o){var l=o.keyCode,a=t.watchKeys[l];if(a){var n=t.pressedKeys.indexOf(l);if(-1<n){t.pressedKeys.splice(n,1)}}};this.table.element.addEventListener("keydown",this.keyupBinding);this.table.element.addEventListener("keyup",this.keydownBinding)};_.prototype.clearBindings=function(){if(this.keyupBinding){this.table.element.removeEventListener("keydown",this.keyupBinding)}if(this.keydownBinding){this.table.element.removeEventListener("keyup",this.keydownBinding)}};_.prototype.checkBinding=function(t,o){var l=this,a=!0;if(t.ctrlKey==o.ctrl&&t.shiftKey==o.shift&&t.metaKey==o.meta){o.keys.forEach(function(t){var o=l.pressedKeys.indexOf(t);if(-1==o){a=!1}});if(a){o.action.call(l,t)}return!0}return!1};_.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"};_.prototype.actions={keyBlock:function(t){t.stopPropagation();t.preventDefault()},scrollPageUp:function(t){var o=this.table.rowManager,l=o.scrollTop-o.height,a=o.element.scrollHeight;t.preventDefault();if(o.displayRowsCount){if(0<=l){o.element.scrollTop=l}else{o.scrollToRow(o.getDisplayRows()[0])}}this.table.element.focus()},scrollPageDown:function(t){var o=this.table.rowManager,l=o.scrollTop+o.height,a=o.element.scrollHeight;t.preventDefault();if(o.displayRowsCount){if(l<=a){o.element.scrollTop=l}else{o.scrollToRow(o.getDisplayRows()[o.displayRowsCount-1])}}this.table.element.focus()},scrollToStart:function(t){var o=this.table.rowManager;t.preventDefault();if(o.displayRowsCount){o.scrollToRow(o.getDisplayRows()[0])}this.table.element.focus()},scrollToEnd:function(t){var o=this.table.rowManager;t.preventDefault();if(o.displayRowsCount){o.scrollToRow(o.getDisplayRows()[o.displayRowsCount-1])}this.table.element.focus()},navPrev:function(t){var o=!1;if(this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(o){t.preventDefault();o.nav().prev()}}},navNext:function(t){var o=!1,l=this.table.options.tabEndNewRow,a;if(this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(o){t.preventDefault();a=o.nav();if(!a.next()){if(l){o.getElement().firstChild.blur();if(!0===l){l=this.table.addRow({})}else{if("function"==typeof l){l=this.table.addRow(l(o.row.getComponent()))}else{l=this.table.addRow(Object.assign({},l))}}l.then(function(){setTimeout(function(){a.next()})})}}}}},navLeft:function(t){var o=!1;if(this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(o){t.preventDefault();o.nav().left()}}},navRight:function(t){var o=!1;if(this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(o){t.preventDefault();o.nav().right()}}},navUp:function(t){var o=!1;if(this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(o){t.preventDefault();o.nav().up()}}},navDown:function(t){var o=!1;if(this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(o){t.preventDefault();o.nav().down()}}},undo:function(t){var o=!1;if(this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(!o){t.preventDefault();this.table.modules.history.undo()}}},redo:function(t){var o=!1;if(this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")){o=this.table.modules.edit.currentCell;if(!o){t.preventDefault();this.table.modules.history.redo()}}},copyToClipboard:function(){if(!this.table.modules.edit.currentCell){if(this.table.modExists("clipboard",!0)){this.table.modules.clipboard.copy(!1,!0)}}}};u.prototype.registerModule("keybindings",_);var B=function(t){this.table=t;this.menuElements=[];this.blurEvent=this.hideMenu.bind(this);this.escEvent=this.escMenu.bind(this);this.nestedMenuBlock=!1;this.positionReversedX=!1};B.prototype.initializeColumnHeader=function(t){var o=this,l;if(t.definition.headerContextMenu){t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,t.definition.headerContextMenu));this.tapHold(t,t.definition.headerContextMenu)}if(t.definition.headerMenu){l=document.createElement("span");l.classList.add("tabulator-header-menu-button");l.innerHTML="&vellip;";l.addEventListener("click",function(l){l.stopPropagation();l.preventDefault();o.LoadMenuEvent(t,t.definition.headerMenu,l)});t.titleElement.insertBefore(l,t.titleElement.firstChild)}};B.prototype.LoadMenuEvent=function(t,o,l){o="function"==typeof o?o.call(this.table,t.getComponent(),l):o;this.loadMenu(l,t,o)};B.prototype.tapHold=function(t,o){var l=this,a=t.getElement(),n=null,r=!1;a.addEventListener("touchstart",function(a){clearTimeout(n);r=!1;n=setTimeout(function(){clearTimeout(n);n=null;r=!0;l.LoadMenuEvent(t,o,a)},1e3)},{passive:!0});a.addEventListener("touchend",function(t){clearTimeout(n);n=null;if(r){t.preventDefault()}})};B.prototype.initializeCell=function(t){if(t.column.definition.contextMenu){t.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,t.column.definition.contextMenu));this.tapHold(t,t.column.definition.contextMenu)}if(t.column.definition.clickMenu){t.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,t,t.column.definition.clickMenu))}};B.prototype.initializeRow=function(t){if(this.table.options.rowContextMenu){t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,this.table.options.rowContextMenu));this.tapHold(t,this.table.options.rowContextMenu)}if(this.table.options.rowClickMenu){t.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,t,this.table.options.rowClickMenu))}};B.prototype.initializeGroup=function(t){if(this.table.options.groupContextMenu){t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,this.table.options.groupContextMenu));this.tapHold(t,this.table.options.groupContextMenu)}if(this.table.options.groupClickMenu){t.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,t,this.table.options.groupClickMenu))}};B.prototype.loadMenu=function(t,o,l,a){var n=this,r=!(t instanceof MouseEvent),s=document.createElement("div");s.classList.add("tabulator-menu");if(!r){t.preventDefault()}if(!l||!l.length){return}if(!a){if(this.nestedMenuBlock){if(this.isOpen()){return}}else{this.nestedMenuBlock=setTimeout(function(){n.nestedMenuBlock=!1},100)}this.hideMenu();this.menuElements=[]}l.forEach(function(t){var l=document.createElement("div"),a=t.label,r=t.disabled;if(t.separator){l.classList.add("tabulator-menu-separator")}else{l.classList.add("tabulator-menu-item");if("function"==typeof a){a=a.call(n.table,o.getComponent())}if(a instanceof Node){l.appendChild(a)}else{l.innerHTML=a}if("function"==typeof r){r=r.call(n.table,o.getComponent())}if(r){l.classList.add("tabulator-menu-item-disabled");l.addEventListener("click",function(t){t.stopPropagation()})}else{if(t.menu&&t.menu.length){l.addEventListener("click",function(a){a.stopPropagation();n.hideOldSubMenus(s);n.loadMenu(a,o,t.menu,l)})}else{if(t.action){l.addEventListener("click",function(l){t.action(l,o.getComponent())})}}}if(t.menu&&t.menu.length){l.classList.add("tabulator-menu-item-submenu")}}s.appendChild(l)});s.addEventListener("click",function(){n.hideMenu()});this.menuElements.push(s);this.positionMenu(s,a,r,t)};B.prototype.hideOldSubMenus=function(t){var o=this.menuElements.indexOf(t);if(-1<o){for(var l=this.menuElements.length-1,a;l>o;l--){a=this.menuElements[l];if(a.parentNode){a.parentNode.removeChild(a)}this.menuElements.pop()}}};B.prototype.positionMenu=function(t,o,l,a){var n=this,r=Math.max(document.body.offsetHeight,window.innerHeight),s,d,p;if(!o){s=l?a.touches[0].pageX:a.pageX;d=l?a.touches[0].pageY:a.pageY;this.positionReversedX=!1}else{p=u.prototype.helpers.elOffset(o);s=p.left+o.offsetWidth;d=p.top-1}t.style.top=d+"px";t.style.left=s+"px";setTimeout(function(){n.table.rowManager.element.addEventListener("scroll",n.blurEvent);document.body.addEventListener("click",n.blurEvent);document.body.addEventListener("contextmenu",n.blurEvent);window.addEventListener("resize",n.blurEvent);document.body.addEventListener("keydown",n.escEvent)},100);document.body.appendChild(t);if(d+t.offsetHeight>=r){t.style.top="";if(o){t.style.bottom=r-p.top-o.offsetHeight-1+"px"}else{t.style.bottom=r-d+"px"}}if(s+t.offsetWidth>=document.body.offsetWidth||this.positionReversedX){t.style.left="";if(o){t.style.right=document.documentElement.offsetWidth-p.left+"px"}else{t.style.right=document.documentElement.offsetWidth-s+"px"}this.positionReversedX=!0}};B.prototype.isOpen=function(){return!!this.menuElements.length};B.prototype.escMenu=function(t){if(27==t.keyCode){this.hideMenu()}};B.prototype.hideMenu=function(){this.menuElements.forEach(function(t){if(t.parentNode){t.parentNode.removeChild(t)}});document.body.removeEventListener("keydown",this.escEvent);document.body.removeEventListener("click",this.blurEvent);document.body.removeEventListener("contextmenu",this.blurEvent);window.removeEventListener("resize",this.blurEvent);this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)};B.prototype.menus={};u.prototype.registerModule("menu",B);var I=function(t){this.table=t;this.placeholderElement=this.createPlaceholderElement();this.hoverElement=!1;this.checkTimeout=!1;this.checkPeriod=250;this.moving=!1;this.toCol=!1;this.toColAfter=!1;this.startX=0;this.autoScrollMargin=40;this.autoScrollStep=5;this.autoScrollTimeout=!1;this.touchMove=!1;this.moveHover=this.moveHover.bind(this);this.endMove=this.endMove.bind(this)};I.prototype.createPlaceholderElement=function(){var t=document.createElement("div");t.classList.add("tabulator-col");t.classList.add("tabulator-col-placeholder");return t};I.prototype.initializeColumn=function(t){var o=this,l={},a;if(!t.modules.frozen){a=t.getElement();l.mousemove=function(l){if(t.parent===o.moving.parent){if((o.touchMove?l.touches[0].pageX:l.pageX)-u.prototype.helpers.elOffset(a).left+o.table.columnManager.element.scrollLeft>t.getWidth()/2){if(o.toCol!==t||!o.toColAfter){a.parentNode.insertBefore(o.placeholderElement,a.nextSibling);o.moveColumn(t,!0)}}else{if(o.toCol!==t||o.toColAfter){a.parentNode.insertBefore(o.placeholderElement,a);o.moveColumn(t,!1)}}}}.bind(o);a.addEventListener("mousedown",function(l){o.touchMove=!1;if(1===l.which){o.checkTimeout=setTimeout(function(){o.startMove(l,t)},o.checkPeriod)}});a.addEventListener("mouseup",function(t){if(1===t.which){if(o.checkTimeout){clearTimeout(o.checkTimeout)}}});o.bindTouchEvents(t)}t.modules.moveColumn=l};I.prototype.bindTouchEvents=function(t){var o=this,l=t.getElement(),a=!1,n,r,s,d,p,c;l.addEventListener("touchstart",function(l){o.checkTimeout=setTimeout(function(){o.touchMove=!0;n=t.nextColumn();s=n?n.getWidth()/2:0;r=t.prevColumn();d=r?r.getWidth()/2:0;p=0;c=0;a=!1;o.startMove(l,t)},o.checkPeriod)},{passive:!0});l.addEventListener("touchmove",function(l){var u,m;if(o.moving){o.moveHover(l);if(!a){a=l.touches[0].pageX}u=l.touches[0].pageX-a;if(0<u){if(n&&u-p>s){m=n;if(m!==t){a=l.touches[0].pageX;m.getElement().parentNode.insertBefore(o.placeholderElement,m.getElement().nextSibling);o.moveColumn(m,!0)}}}else{if(r&&-u-c>d){m=r;if(m!==t){a=l.touches[0].pageX;m.getElement().parentNode.insertBefore(o.placeholderElement,m.getElement());o.moveColumn(m,!1)}}}if(m){n=m.nextColumn();p=s;s=n?n.getWidth()/2:0;r=m.prevColumn();c=d;d=r?r.getWidth()/2:0}}},{passive:!0});l.addEventListener("touchend",function(t){if(o.checkTimeout){clearTimeout(o.checkTimeout)}if(o.moving){o.endMove(t)}})};I.prototype.startMove=function(t,o){var l=o.getElement();this.moving=o;this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-u.prototype.helpers.elOffset(l).left;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=o.getWidth()+"px";this.placeholderElement.style.height=o.getHeight()+"px";l.parentNode.insertBefore(this.placeholderElement,l);l.parentNode.removeChild(l);this.hoverElement=l.cloneNode(!0);this.hoverElement.classList.add("tabulator-moving");this.table.columnManager.getElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.bottom="0";if(!this.touchMove){this._bindMouseMove();document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove)}this.moveHover(t)};I.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){if(t.modules.moveColumn.mousemove){t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)}})};I.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){if(t.modules.moveColumn.mousemove){t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)}})};I.prototype.moveColumn=function(t,o){var l=this.moving.getCells();this.toCol=t;this.toColAfter=o;if(o){t.getCells().forEach(function(t,o){var a=t.getElement(!0);a.parentNode.insertBefore(l[o].getElement(),a.nextSibling)})}else{t.getCells().forEach(function(t,o){var a=t.getElement(!0);a.parentNode.insertBefore(l[o].getElement(),a)})}};I.prototype.endMove=function(t){if(1===t.which||this.touchMove){this._unbindMouseMove();this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling);this.placeholderElement.parentNode.removeChild(this.placeholderElement);this.hoverElement.parentNode.removeChild(this.hoverElement);this.table.element.classList.remove("tabulator-block-select");if(this.toCol){this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter)}this.moving=!1;this.toCol=!1;this.toColAfter=!1;if(!this.touchMove){document.body.removeEventListener("mousemove",this.moveHover);document.body.removeEventListener("mouseup",this.endMove)}}};I.prototype.moveHover=function(t){var o=this,l=o.table.columnManager.getElement(),a=l.scrollLeft,n=(o.touchMove?t.touches[0].pageX:t.pageX)-u.prototype.helpers.elOffset(l).left+a,r;o.hoverElement.style.left=n-o.startX+"px";if(n-a<o.autoScrollMargin){if(!o.autoScrollTimeout){o.autoScrollTimeout=setTimeout(function(){r=Math.max(0,a-5);o.table.rowManager.getElement().scrollLeft=r;o.autoScrollTimeout=!1},1)}}if(a+l.clientWidth-n<o.autoScrollMargin){if(!o.autoScrollTimeout){o.autoScrollTimeout=setTimeout(function(){r=Math.min(l.clientWidth,a+5);o.table.rowManager.getElement().scrollLeft=r;o.autoScrollTimeout=!1},1)}}};u.prototype.registerModule("moveColumn",I);var N=function(t){this.table=t;this.placeholderElement=this.createPlaceholderElement();this.hoverElement=!1;this.checkTimeout=!1;this.checkPeriod=150;this.moving=!1;this.toRow=!1;this.toRowAfter=!1;this.hasHandle=!1;this.startY=0;this.startX=0;this.moveHover=this.moveHover.bind(this);this.endMove=this.endMove.bind(this);this.tableRowDropEvent=!1;this.touchMove=!1;this.connection=!1;this.connectionSelectorsTables=!1;this.connectionSelectorsElements=!1;this.connectionElements=[];this.connections=[];this.connectedTable=!1;this.connectedRow=!1};N.prototype.createPlaceholderElement=function(){var t=document.createElement("div");t.classList.add("tabulator-row");t.classList.add("tabulator-row-placeholder");return t};N.prototype.initialize=function(){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables;this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements;this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements};N.prototype.setHandle=function(t){this.hasHandle=t};N.prototype.initializeGroupHeader=function(t){var o=this,l={};l.mouseup=function(t){o.tableRowDrop(t,row)}.bind(o);l.mousemove=function(l){if(l.pageY-u.prototype.helpers.elOffset(t.element).top+o.table.rowManager.element.scrollTop>t.getHeight()/2){if(o.toRow!==t||!o.toRowAfter){var a=t.getElement();a.parentNode.insertBefore(o.placeholderElement,a.nextSibling);o.moveRow(t,!0)}}else{if(o.toRow!==t||o.toRowAfter){var a=t.getElement();if(a.previousSibling){a.parentNode.insertBefore(o.placeholderElement,a);o.moveRow(t,!1)}}}}.bind(o);t.modules.moveRow=l};N.prototype.initializeRow=function(t){var o=this,l={},a;l.mouseup=function(l){o.tableRowDrop(l,t)}.bind(o);l.mousemove=function(l){var a=t.getElement();if(l.pageY-u.prototype.helpers.elOffset(a).top+o.table.rowManager.element.scrollTop>t.getHeight()/2){if(o.toRow!==t||!o.toRowAfter){a.parentNode.insertBefore(o.placeholderElement,a.nextSibling);o.moveRow(t,!0)}}else{if(o.toRow!==t||o.toRowAfter){a.parentNode.insertBefore(o.placeholderElement,a);o.moveRow(t,!1)}}}.bind(o);if(!this.hasHandle){a=t.getElement();a.addEventListener("mousedown",function(l){if(1===l.which){o.checkTimeout=setTimeout(function(){o.startMove(l,t)},o.checkPeriod)}});a.addEventListener("mouseup",function(t){if(1===t.which){if(o.checkTimeout){clearTimeout(o.checkTimeout)}}});this.bindTouchEvents(t,t.getElement())}t.modules.moveRow=l};N.prototype.initializeCell=function(t){var o=this,l=t.getElement(!0);l.addEventListener("mousedown",function(l){if(1===l.which){o.checkTimeout=setTimeout(function(){o.startMove(l,t.row)},o.checkPeriod)}});l.addEventListener("mouseup",function(t){if(1===t.which){if(o.checkTimeout){clearTimeout(o.checkTimeout)}}});this.bindTouchEvents(t.row,l)};N.prototype.bindTouchEvents=function(t,o){var l=this,a=!1,n,r,s,d,p,c;o.addEventListener("touchstart",function(o){l.checkTimeout=setTimeout(function(){l.touchMove=!0;n=t.nextRow();s=n?n.getHeight()/2:0;r=t.prevRow();d=r?r.getHeight()/2:0;p=0;c=0;a=!1;l.startMove(o,t)},l.checkPeriod)},{passive:!0});this.moving,this.toRow,this.toRowAfter;o.addEventListener("touchmove",function(o){var u,m;if(l.moving){o.preventDefault();l.moveHover(o);if(!a){a=o.touches[0].pageY}u=o.touches[0].pageY-a;if(0<u){if(n&&u-p>s){m=n;if(m!==t){a=o.touches[0].pageY;m.getElement().parentNode.insertBefore(l.placeholderElement,m.getElement().nextSibling);l.moveRow(m,!0)}}}else{if(r&&-u-c>d){m=r;if(m!==t){a=o.touches[0].pageY;m.getElement().parentNode.insertBefore(l.placeholderElement,m.getElement());l.moveRow(m,!1)}}}if(m){n=m.nextRow();p=s;s=n?n.getHeight()/2:0;r=m.prevRow();c=d;d=r?r.getHeight()/2:0}}});o.addEventListener("touchend",function(t){if(l.checkTimeout){clearTimeout(l.checkTimeout)}if(l.moving){l.endMove(t);l.touchMove=!1}})};N.prototype._bindMouseMove=function(){var t=this;t.table.rowManager.getDisplayRows().forEach(function(t){if(("row"===t.type||"group"===t.type)&&t.modules.moveRow.mousemove){t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)}})};N.prototype._unbindMouseMove=function(){var t=this;t.table.rowManager.getDisplayRows().forEach(function(t){if(("row"===t.type||"group"===t.type)&&t.modules.moveRow.mousemove){t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)}})};N.prototype.startMove=function(t,o){var l=o.getElement();this.setStartPosition(t,o);this.moving=o;this.table.element.classList.add("tabulator-block-select");this.placeholderElement.style.width=o.getWidth()+"px";this.placeholderElement.style.height=o.getHeight()+"px";if(!this.connection){l.parentNode.insertBefore(this.placeholderElement,l);l.parentNode.removeChild(l)}else{this.table.element.classList.add("tabulator-movingrow-sending");this.connectToTables(o)}this.hoverElement=l.cloneNode(!0);this.hoverElement.classList.add("tabulator-moving");if(this.connection){document.body.appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.top="0";this.hoverElement.style.width=this.table.element.clientWidth+"px";this.hoverElement.style.whiteSpace="nowrap";this.hoverElement.style.overflow="hidden";this.hoverElement.style.pointerEvents="none"}else{this.table.rowManager.getTableElement().appendChild(this.hoverElement);this.hoverElement.style.left="0";this.hoverElement.style.top="0";this._bindMouseMove()}document.body.addEventListener("mousemove",this.moveHover);document.body.addEventListener("mouseup",this.endMove);this.moveHover(t)};N.prototype.setStartPosition=function(t,o){var l=this.touchMove?t.touches[0].pageX:t.pageX,a=this.touchMove?t.touches[0].pageY:t.pageY,n,r;n=o.getElement();if(this.connection){r=n.getBoundingClientRect();this.startX=r.left-l+window.pageXOffset;this.startY=r.top-a+window.pageYOffset}else{this.startY=a-n.getBoundingClientRect().top}};N.prototype.endMove=function(t){if(!t||1===t.which||this.touchMove){this._unbindMouseMove();if(!this.connection){this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling);this.placeholderElement.parentNode.removeChild(this.placeholderElement)}this.hoverElement.parentNode.removeChild(this.hoverElement);this.table.element.classList.remove("tabulator-block-select");if(this.toRow){this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter)}this.moving=!1;this.toRow=!1;this.toRowAfter=!1;document.body.removeEventListener("mousemove",this.moveHover);document.body.removeEventListener("mouseup",this.endMove);if(this.connection){this.table.element.classList.remove("tabulator-movingrow-sending");this.disconnectFromTables()}}};N.prototype.moveRow=function(t,o){this.toRow=t;this.toRowAfter=o};N.prototype.moveHover=function(t){if(this.connection){this.moveHoverConnections.call(this,t)}else{this.moveHoverTable.call(this,t)}};N.prototype.moveHoverTable=function(t){var o=this.table.rowManager.getElement(),l=o.scrollTop,a=(this.touchMove?t.touches[0].pageY:t.pageY)-o.getBoundingClientRect().top+l;this.hoverElement.style.top=a-this.startY+"px"};N.prototype.moveHoverConnections=function(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px";this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"};N.prototype.elementRowDrop=function(t,o,l){if(this.table.options.movableRowsElementDrop){this.table.options.movableRowsElementDrop(t,o,l?l.getComponent():!1)}};N.prototype.connectToTables=function(t){var o=this,l;if(this.connectionSelectorsTables){l=this.table.modules.comms.getConnections(this.connectionSelectorsTables);this.table.options.movableRowsSendingStart.call(this.table,l);this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","connect",{row:t})}if(this.connectionSelectorsElements){this.connectionElements=[];if(!Array.isArray(this.connectionSelectorsElements)){this.connectionSelectorsElements=[this.connectionSelectorsElements]}this.connectionSelectorsElements.forEach(function(t){if("string"==typeof t){o.connectionElements=o.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(t)))}else{o.connectionElements.push(t)}});this.connectionElements.forEach(function(t){var l=function(l){o.elementRowDrop(l,t,o.moving)};t.addEventListener("mouseup",l);t.tabulatorElementDropEvent=l;t.classList.add("tabulator-movingrow-receiving")})}};N.prototype.disconnectFromTables=function(){var t;if(this.connectionSelectorsTables){t=this.table.modules.comms.getConnections(this.connectionSelectorsTables);this.table.options.movableRowsSendingStop.call(this.table,t);this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","disconnect")}this.connectionElements.forEach(function(t){t.classList.remove("tabulator-movingrow-receiving");t.removeEventListener("mouseup",t.tabulatorElementDropEvent);delete t.tabulatorElementDropEvent})};N.prototype.connect=function(t,o){var l=this;if(!this.connectedTable){this.connectedTable=t;this.connectedRow=o;this.table.element.classList.add("tabulator-movingrow-receiving");l.table.rowManager.getDisplayRows().forEach(function(t){if("row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup){t.getElement().addEventListener("mouseup",t.modules.moveRow.mouseup)}});l.tableRowDropEvent=l.tableRowDrop.bind(l);l.table.element.addEventListener("mouseup",l.tableRowDropEvent);this.table.options.movableRowsReceivingStart.call(this.table,o,t);return!0}else{console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable);return!1}};N.prototype.disconnect=function(t){var o=this;if(t===this.connectedTable){this.connectedTable=!1;this.connectedRow=!1;this.table.element.classList.remove("tabulator-movingrow-receiving");o.table.rowManager.getDisplayRows().forEach(function(t){if("row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup){t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)}});o.table.element.removeEventListener("mouseup",o.tableRowDropEvent);this.table.options.movableRowsReceivingStop.call(this.table,t)}else{console.warn("Move Row Error - trying to disconnect from non connected table")}};N.prototype.dropComplete=function(t,o,l){var a=!1;if(l){switch(_typeof(this.table.options.movableRowsSender)){case"string":a=this.senders[this.table.options.movableRowsSender];break;case"function":a=this.table.options.movableRowsSender;break;}if(a){a.call(this,this.moving.getComponent(),o?o.getComponent():void 0,t)}else{if(this.table.options.movableRowsSender){console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender)}}this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),o?o.getComponent():void 0,t)}else{this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),o?o.getComponent():void 0,t)}this.endMove()};N.prototype.tableRowDrop=function(t,o){var l=!1,a=!1;t.stopImmediatePropagation();switch(_typeof(this.table.options.movableRowsReceiver)){case"string":l=this.receivers[this.table.options.movableRowsReceiver];break;case"function":l=this.table.options.movableRowsReceiver;break;}if(l){a=l.call(this,this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable)}else{console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver)}if(a){this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable)}else{this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),o?o.getComponent():void 0,this.connectedTable)}this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:o,success:a})};N.prototype.receivers={insert:function(t,o){this.table.addRow(t.getData(),void 0,o);return!0},add:function(t){this.table.addRow(t.getData());return!0},update:function(t,o){if(o){o.update(t.getData());return!0}return!1},replace:function(t,o){if(o){this.table.addRow(t.getData(),void 0,o);o.delete();return!0}return!1}};N.prototype.senders={delete:function(t){t.delete()}};N.prototype.commsReceived=function(t,o,l){switch(o){case"connect":return this.connect(t,l.row);break;case"disconnect":return this.disconnect(t);break;case"dropcomplete":return this.dropComplete(t,l.row,l.success);break;}};u.prototype.registerModule("moveRow",N);var V=function(t){this.table=t;this.allowedTypes=["","data","edit","clipboard"];this.enabled=!0};V.prototype.initializeColumn=function(t){var o=this,l=!1,a={};this.allowedTypes.forEach(function(n){var r="mutator"+(n.charAt(0).toUpperCase()+n.slice(1)),s;if(t.definition[r]){s=o.lookupMutator(t.definition[r]);if(s){l=!0;a[r]={mutator:s,params:t.definition[r+"Params"]||{}}}}});if(l){t.modules.mutate=a}};V.prototype.lookupMutator=function(t){var o=!1;switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":if(this.mutators[t]){o=this.mutators[t]}else{console.warn("Mutator Error - No such mutator found, ignoring: ",t)}break;case"function":o=t;break;}return o};V.prototype.transformRow=function(t,o,l){var a=this,n="mutator"+(o.charAt(0).toUpperCase()+o.slice(1)),r;if(this.enabled){a.table.columnManager.traverse(function(a){var s,d,p;if(a.modules.mutate){s=a.modules.mutate[n]||a.modules.mutate.mutator||!1;if(s){r=a.getFieldValue("undefined"!=typeof l?l:t);if("data"==o||"undefined"!=typeof r){p=a.getComponent();d="function"==typeof s.params?s.params(r,t,o,p):s.params;a.setFieldValue(t,s.mutator(r,t,o,d,p))}}}})}return t};V.prototype.transformCell=function(t,o){var l=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1,a={};if(l){a=Object.assign(a,t.row.getData());t.column.setFieldValue(a,o);return l.mutator(o,a,"edit",l.params,t.getComponent())}else{return o}};V.prototype.enable=function(){this.enabled=!0};V.prototype.disable=function(){this.enabled=!1};V.prototype.mutators={};u.prototype.registerModule("mutator",V);var W=function(t){this.table=t;this.mode="local";this.progressiveLoad=!1;this.size=0;this.page=1;this.count=5;this.max=1;this.displayIndex=0;this.initialLoad=!0;this.pageSizes=[];this.dataReceivedNames={};this.dataSentNames={};this.createElements()};W.prototype.createElements=function(){var t;this.element=document.createElement("span");this.element.classList.add("tabulator-paginator");this.pagesElement=document.createElement("span");this.pagesElement.classList.add("tabulator-pages");t=document.createElement("button");t.classList.add("tabulator-page");t.setAttribute("type","button");t.setAttribute("role","button");t.setAttribute("aria-label","");t.setAttribute("title","");this.firstBut=t.cloneNode(!0);this.firstBut.setAttribute("data-page","first");this.prevBut=t.cloneNode(!0);this.prevBut.setAttribute("data-page","prev");this.nextBut=t.cloneNode(!0);this.nextBut.setAttribute("data-page","next");this.lastBut=t.cloneNode(!0);this.lastBut.setAttribute("data-page","last");if(this.table.options.paginationSizeSelector){this.pageSizeSelect=document.createElement("select");this.pageSizeSelect.classList.add("tabulator-page-size")}};W.prototype.generatePageSizeSelectList=function(){var t=this,o=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector)){o=this.table.options.paginationSizeSelector;this.pageSizes=o;if(-1==this.pageSizes.indexOf(this.size)){o.unshift(this.size)}}else{if(-1==this.pageSizes.indexOf(this.size)){o=[];for(var l=1;5>l;l++){o.push(this.size*l)}this.pageSizes=o}else{o=this.pageSizes}}while(this.pageSizeSelect.firstChild){this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild)}o.forEach(function(o){var l=document.createElement("option");l.value=o;if(!0===o){t.table.modules.localize.bind("pagination|all",function(t){l.innerHTML=t})}else{l.innerHTML=o}t.pageSizeSelect.appendChild(l)});this.pageSizeSelect.value=this.size}};W.prototype.initialize=function(t){var o=this,l,a,n;this.dataSentNames=Object.assign({},this.paginationDataSentNames);this.dataSentNames=Object.assign(this.dataSentNames,this.table.options.paginationDataSent);this.dataReceivedNames=Object.assign({},this.paginationDataReceivedNames);this.dataReceivedNames=Object.assign(this.dataReceivedNames,this.table.options.paginationDataReceived);o.table.modules.localize.bind("pagination|first",function(t){o.firstBut.innerHTML=t});o.table.modules.localize.bind("pagination|first_title",function(t){o.firstBut.setAttribute("aria-label",t);o.firstBut.setAttribute("title",t)});o.table.modules.localize.bind("pagination|prev",function(t){o.prevBut.innerHTML=t});o.table.modules.localize.bind("pagination|prev_title",function(t){o.prevBut.setAttribute("aria-label",t);o.prevBut.setAttribute("title",t)});o.table.modules.localize.bind("pagination|next",function(t){o.nextBut.innerHTML=t});o.table.modules.localize.bind("pagination|next_title",function(t){o.nextBut.setAttribute("aria-label",t);o.nextBut.setAttribute("title",t)});o.table.modules.localize.bind("pagination|last",function(t){o.lastBut.innerHTML=t});o.table.modules.localize.bind("pagination|last_title",function(t){o.lastBut.setAttribute("aria-label",t);o.lastBut.setAttribute("title",t)});o.firstBut.addEventListener("click",function(){o.setPage(1).then(function(){}).catch(function(){})});o.prevBut.addEventListener("click",function(){o.previousPage().then(function(){}).catch(function(){})});o.nextBut.addEventListener("click",function(){o.nextPage().then(function(){}).catch(function(){})});o.lastBut.addEventListener("click",function(){o.setPage(o.max).then(function(){}).catch(function(){})});if(o.table.options.paginationElement){o.element=o.table.options.paginationElement}if(this.pageSizeSelect){l=document.createElement("label");o.table.modules.localize.bind("pagination|page_size",function(t){o.pageSizeSelect.setAttribute("aria-label",t);o.pageSizeSelect.setAttribute("title",t);l.innerHTML=t});o.element.appendChild(l);o.element.appendChild(o.pageSizeSelect);o.pageSizeSelect.addEventListener("change",function(){o.setPageSize("true"==o.pageSizeSelect.value?!0:o.pageSizeSelect.value);o.setPage(1).then(function(){}).catch(function(){})})}o.element.appendChild(o.firstBut);o.element.appendChild(o.prevBut);o.element.appendChild(o.pagesElement);o.element.appendChild(o.nextBut);o.element.appendChild(o.lastBut);if(!o.table.options.paginationElement&&!t){o.table.footerManager.append(o.element,o)}o.mode=o.table.options.pagination;if(o.table.options.paginationSize){o.size=o.table.options.paginationSize}else{a=document.createElement("div");a.classList.add("tabulator-row");a.style.visibility=t;n=document.createElement("div");n.classList.add("tabulator-cell");n.innerHTML="Page Row Test";a.appendChild(n);o.table.rowManager.getTableElement().appendChild(a);o.size=Math.floor(o.table.rowManager.getElement().clientHeight/a.offsetHeight);o.table.rowManager.getTableElement().removeChild(a)}o.count=o.table.options.paginationButtonCount;o.generatePageSizeSelectList()};W.prototype.initializeProgressive=function(t){this.initialize(!0);this.mode="progressive_"+t;this.progressiveLoad=!0};W.prototype.setDisplayIndex=function(t){this.displayIndex=t};W.prototype.getDisplayIndex=function(){return this.displayIndex};W.prototype.setMaxRows=function(t){if(!t){this.max=1}else{this.max=!0===this.size?1:Math.ceil(t/this.size)}if(this.page>this.max){this.page=this.max}};W.prototype.reset=function(t,o){if("local"==this.mode||t){this.page=1}if(o){this.initialLoad=!0}return!0};W.prototype.setMaxPage=function(t){t=parseInt(t);this.max=t||1;if(this.page>this.max){this.page=this.max;this.trigger()}};W.prototype.setPage=function(t){var o=this,l=this;switch(t){case"first":return this.setPage(1);break;case"prev":return this.previousPage();break;case"next":return this.nextPage();break;case"last":return this.setPage(this.max);break;}return new Promise(function(a,n){t=parseInt(t);if(0<t&&t<=o.max||"local"!==o.mode){o.page=t;o.trigger().then(function(){a()}).catch(function(){n()});if(l.table.options.persistence&&l.table.modExists("persistence",!0)&&l.table.modules.persistence.config.page){l.table.modules.persistence.save("page")}}else{console.warn("Pagination Error - Requested page is out of range of 1 - "+o.max+":",t);n()}})};W.prototype.setPageToRow=function(t){var o=this;return new Promise(function(l,a){var n=o.table.rowManager.getDisplayRows(o.displayIndex-1),r=n.indexOf(t);if(-1<r){var s=!0===o.size?1:Math.ceil((r+1)/o.size);o.setPage(s).then(function(){l()}).catch(function(){a()})}else{console.warn("Pagination Error - Requested row is not visible");a()}})};W.prototype.setPageSize=function(t){if(!0!==t){t=parseInt(t)}if(0<t){this.size=t}if(this.pageSizeSelect){this.generatePageSizeSelectList()}if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page){this.table.modules.persistence.save("page")}};W.prototype._setPageButtons=function(){var t=this,o=Math.floor((this.count-1)/2),l=Math.ceil((this.count-1)/2),a=this.max-this.page+o+1<this.count?this.max-this.count+1:Math.max(this.page-o,1),n=this.page<=l?Math.min(this.count,this.max):Math.min(this.page+l,this.max);while(t.pagesElement.firstChild){t.pagesElement.removeChild(t.pagesElement.firstChild)}if(1==t.page){t.firstBut.disabled=!0;t.prevBut.disabled=!0}else{t.firstBut.disabled=!1;t.prevBut.disabled=!1}if(t.page==t.max){t.lastBut.disabled=!0;t.nextBut.disabled=!0}else{t.lastBut.disabled=!1;t.nextBut.disabled=!1}for(var r=a;r<=n;r++){if(0<r&&r<=t.max){t.pagesElement.appendChild(t._generatePageButton(r))}}this.footerRedraw()};W.prototype._generatePageButton=function(t){var o=this,l=document.createElement("button");l.classList.add("tabulator-page");if(t==o.page){l.classList.add("active")}l.setAttribute("type","button");l.setAttribute("role","button");o.table.modules.localize.bind("pagination|page_title",function(o){l.setAttribute("aria-label",o+" "+t);l.setAttribute("title",o+" "+t)});l.setAttribute("data-page",t);l.textContent=t;l.addEventListener("click",function(){o.setPage(t).then(function(){}).catch(function(){})});return l};W.prototype.previousPage=function(){var t=this;return new Promise(function(o,l){if(1<t.page){t.page--;t.trigger().then(function(){o()}).catch(function(){l()});if(t.table.options.persistence&&t.table.modExists("persistence",!0)&&t.table.modules.persistence.config.page){t.table.modules.persistence.save("page")}}else{console.warn("Pagination Error - Previous page would be less than page 1:",0);l()}})};W.prototype.nextPage=function(){var t=this;return new Promise(function(o,l){if(t.page<t.max){t.page++;t.trigger().then(function(){o()}).catch(function(){l()});if(t.table.options.persistence&&t.table.modExists("persistence",!0)&&t.table.modules.persistence.config.page){t.table.modules.persistence.save("page")}}else{if(!t.progressiveLoad){console.warn("Pagination Error - Next page would be greater than maximum page of "+t.max+":",t.max+1)}l()}})};W.prototype.getPage=function(){return this.page};W.prototype.getPageMax=function(){return this.max};W.prototype.getPageSize=function(){return this.size};W.prototype.getMode=function(){return this.mode};W.prototype.getRows=function(t){var o,l,a;if("local"==this.mode){o=[];if(!0===this.size){l=0;a=t.length}else{l=this.size*(this.page-1);a=l+parseInt(this.size)}this._setPageButtons();for(var n=l;n<a;n++){if(t[n]){o.push(t[n])}}return o}else{this._setPageButtons();return t.slice(0)}};W.prototype.trigger=function(){var t=this,o;return new Promise(function(l,a){switch(t.mode){case"local":o=t.table.rowManager.scrollLeft;t.table.rowManager.refreshActiveData("page");t.table.rowManager.scrollHorizontal(o);t.table.options.pageLoaded.call(t.table,t.getPage());l();break;case"remote":case"progressive_load":case"progressive_scroll":t.table.modules.ajax.blockActiveRequest();t._getRemotePage().then(function(){l()}).catch(function(){a()});break;default:console.warn("Pagination Error - no such pagination mode:",t.mode);a();}})};W.prototype._getRemotePage=function(){var t=this,o=this,l,a;return new Promise(function(n,r){if(!o.table.modExists("ajax",!0)){r()}l=u.prototype.helpers.deepClone(o.table.modules.ajax.getParams()||{});a=o.table.modules.ajax.getParams();a[t.dataSentNames.page]=o.page;if(t.size){a[t.dataSentNames.size]=t.size}if(t.table.options.ajaxSorting&&t.table.modExists("sort")){var s=o.table.modules.sort.getSort();s.forEach(function(t){delete t.column});a[t.dataSentNames.sorters]=s}if(t.table.options.ajaxFiltering&&t.table.modExists("filter")){var d=o.table.modules.filter.getFilters(!0,!0);a[t.dataSentNames.filters]=d}o.table.modules.ajax.setParams(a);o.table.modules.ajax.sendRequest(t.progressiveLoad).then(function(t){o._parseRemoteData(t);n()}).catch(function(){r()});o.table.modules.ajax.setParams(l)})};W.prototype._parseRemoteData=function(t){var o=this,l,t,a;if("undefined"==typeof t[this.dataReceivedNames.last_page]){console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property")}if(t[this.dataReceivedNames.data]){this.max=parseInt(t[this.dataReceivedNames.last_page])||1;if(this.progressiveLoad){switch(this.mode){case"progressive_load":if(1==this.page){this.table.rowManager.setData(t[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page)}else{this.table.rowManager.addRows(t[this.dataReceivedNames.data])}if(this.page<this.max){setTimeout(function(){o.nextPage().then(function(){}).catch(function(){})},o.table.options.ajaxProgressiveLoadDelay)}break;case"progressive_scroll":t=this.table.rowManager.getData().concat(t[this.dataReceivedNames.data]);this.table.rowManager.setData(t,!0,this.initialLoad&&1==this.page);a=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight;if(o.table.rowManager.element.scrollHeight<=o.table.rowManager.element.clientHeight+a){o.nextPage().then(function(){}).catch(function(){})}break;}}else{l=this.table.rowManager.scrollLeft;this.table.rowManager.setData(t[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page);this.table.rowManager.scrollHorizontal(l);this.table.columnManager.scrollHorizontal(l);this.table.options.pageLoaded.call(this.table,this.getPage())}this.initialLoad=!1}else{console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")}};W.prototype.footerRedraw=function(){var t=this.table.footerManager.element;if(0>Math.ceil(t.clientWidth)-t.scrollWidth){this.pagesElement.style.display="none"}else{this.pagesElement.style.display="";if(0>Math.ceil(t.clientWidth)-t.scrollWidth){this.pagesElement.style.display="none"}}};W.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"};W.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"};u.prototype.registerModule("page",W);var O=function(t){this.table=t;this.mode="";this.id="";this.defWatcherBlock=!1;this.config={};this.readFunc=!1;this.writeFunc=!1};O.prototype.localStorageTest=function(){try{window.localStorage.setItem("_tabulator_test","_tabulator_test");window.localStorage.removeItem("_tabulator_test");return!0}catch(t){return!1}};O.prototype.initialize=function(){var t=this.table.options.persistenceMode,o=this.table.options.persistenceID,l;this.mode=!0!==t?t:this.localStorageTest()?"local":"cookie";if(this.table.options.persistenceReaderFunc){if("function"==typeof this.table.options.persistenceReaderFunc){this.readFunc=this.table.options.persistenceReaderFunc}else{if(this.readers[this.table.options.persistenceReaderFunc]){this.readFunc=this.readers[this.table.options.persistenceReaderFunc]}else{console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc)}}}else{if(this.readers[this.mode]){this.readFunc=this.readers[this.mode]}else{console.warn("Persistence Read Error - invalid reader set",this.mode)}}if(this.table.options.persistenceWriterFunc){if("function"==typeof this.table.options.persistenceWriterFunc){this.writeFunc=this.table.options.persistenceWriterFunc}else{if(this.readers[this.table.options.persistenceWriterFunc]){this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]}else{console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc)}}}else{if(this.writers[this.mode]){this.writeFunc=this.writers[this.mode]}else{console.warn("Persistence Write Error - invalid writer set",this.mode)}}this.id="tabulator-"+(o||this.table.element.getAttribute("id")||"");this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns};if(this.config.page){l=this.retreiveData("page");if(l){if("undefined"!=typeof l.paginationSize&&(!0===this.config.page||this.config.page.size)){this.table.options.paginationSize=l.paginationSize}if("undefined"!=typeof l.paginationInitialPage&&(!0===this.config.page||this.config.page.page)){this.table.options.paginationInitialPage=l.paginationInitialPage}}}if(this.config.group){l=this.retreiveData("group");if(l){if("undefined"!=typeof l.groupBy&&(!0===this.config.group||this.config.group.groupBy)){this.table.options.groupBy=l.groupBy}if("undefined"!=typeof l.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)){this.table.options.groupStartOpen=l.groupStartOpen}if("undefined"!=typeof l.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)){this.table.options.groupHeader=l.groupHeader}}}if(this.config.columns){this.table.options.columns=this.load("columns",this.table.options.columns)}};O.prototype.initializeColumn=function(t){var o=this,l,a;if(this.config.columns){this.defWatcherBlock=!0;l=t.getDefinition();a=!0===this.config.columns?Object.keys(l):this.config.columns;a.forEach(function(t){var a=Object.getOwnPropertyDescriptor(l,t),n=l[t];if(a){Object.defineProperty(l,t,{set:function(t){n=t;if(!o.defWatcherBlock){o.save("columns")}if(a.set){a.set(t)}},get:function(){if(a.get){a.get()}return n}})}});this.defWatcherBlock=!1}};O.prototype.load=function(t,o){var l=this.retreiveData(t);if(o){l=l?this.mergeDefinition(o,l):o}return l};O.prototype.retreiveData=function(t){return this.readFunc?this.readFunc(this.id,t):!1};O.prototype.mergeDefinition=function(t,o){var l=this,a=[];o=o||[];o.forEach(function(o){var n=l._findColumn(t,o),r;if(n){if(!0===l.config.columns||l.config.columns==void 0){r=Object.keys(n);r.push("width")}else{r=l.config.columns}r.forEach(function(t){if("columns"!==t&&"undefined"!=typeof o[t]){n[t]=o[t]}});if(n.columns){n.columns=l.mergeDefinition(n.columns,o.columns)}a.push(n)}});t.forEach(function(t,n){var r=l._findColumn(o,t);if(!r){if(a.length>n){a.splice(n,0,t)}else{a.push(t)}}});return a};O.prototype._findColumn=function(t,o){var l=o.columns?"group":o.field?"field":"object";return t.find(function(t){switch(l){case"group":return t.title===o.title&&t.columns.length===o.columns.length;break;case"field":return t.field===o.field;break;case"object":return t===o;break;}})};O.prototype.save=function(t){var o={};switch(t){case"columns":o=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":o=this.table.modules.filter.getFilters();break;case"sort":o=this.validateSorters(this.table.modules.sort.getSort());break;case"group":o=this.getGroupConfig();break;case"page":o=this.getPageConfig();break;}if(this.writeFunc){this.writeFunc(this.id,t,o)}};O.prototype.validateSorters=function(t){t.forEach(function(t){t.column=t.field;delete t.field});return t};O.prototype.getGroupConfig=function(){var t={};if(this.config.group){if(!0===this.config.group||this.config.group.groupBy){t.groupBy=this.table.options.groupBy}if(!0===this.config.group||this.config.group.groupStartOpen){t.groupStartOpen=this.table.options.groupStartOpen}if(!0===this.config.group||this.config.group.groupHeader){t.groupHeader=this.table.options.groupHeader}}return t};O.prototype.getPageConfig=function(){var t={};if(this.config.page){if(!0===this.config.page||this.config.page.size){t.paginationSize=this.table.modules.page.getPageSize()}if(!0===this.config.page||this.config.page.page){t.paginationInitialPage=this.table.modules.page.getPage()}}return t};O.prototype.parseColumns=function(t){var o=this,l=[],a=["headerContextMenu","headerMenu","contextMenu","clickMenu"];t.forEach(function(t){var n={},r=t.getDefinition(),s;if(t.isGroup){n.title=r.title;n.columns=o.parseColumns(t.getColumns())}else{n.field=t.getField();if(!0===o.config.columns||o.config.columns==void 0){s=Object.keys(r);s.push("width")}else{s=o.config.columns}s.forEach(function(o){switch(o){case"width":n.width=t.getWidth();break;case"visible":n.visible=t.visible;break;default:if("function"!=typeof r[o]&&-1===a.indexOf(o)){n[o]=r[o]}}})}l.push(n)});return l};O.prototype.readers={local:function(t,o){var l=localStorage.getItem(t+"-"+o);return l?JSON.parse(l):!1},cookie:function t(o,l){var t=document.cookie,a=o+"-"+l,n=t.indexOf(a+"="),r,s;if(-1<n){t=t.substr(n);r=t.indexOf(";");if(-1<r){t=t.substr(0,r)}s=t.replace(a+"=","")}return s?JSON.parse(s):!1}};O.prototype.writers={local:function(t,o,l){localStorage.setItem(t+"-"+o,JSON.stringify(l))},cookie:function(t,o,l){var a=new Date;a.setDate(a.getDate()+1e4);document.cookie=t+"-"+o+"="+JSON.stringify(l)+"; expires="+a.toUTCString()}};u.prototype.registerModule("persistence",O);var j=function(t){this.table=t;this.element=!1;this.manualBlock=!1};j.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this));window.addEventListener("afterprint",this.cleanup.bind(this))};j.prototype.replaceTable=function(){if(!this.manualBlock){this.element=document.createElement("div");this.element.classList.add("tabulator-print-table");this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print"));this.table.element.style.display="none";this.table.element.parentNode.insertBefore(this.element,this.table.element)}};j.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide");if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element);this.table.element.style.display=""}};j.prototype.printFullscreen=function(t,o,l){var a=window.scrollX,n=window.scrollY,r=document.createElement("div"),s=document.createElement("div"),d=this.table.modules.export.genereateTable("undefined"!=typeof l?l:this.table.options.printConfig,"undefined"!=typeof o?o:this.table.options.printStyled,t,"print"),p,c;this.manualBlock=!0;this.element=document.createElement("div");this.element.classList.add("tabulator-print-fullscreen");if(this.table.options.printHeader){r.classList.add("tabulator-print-header");p="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader;if("string"==typeof p){r.innerHTML=p}else{r.appendChild(p)}this.element.appendChild(r)}this.element.appendChild(d);if(this.table.options.printFooter){s.classList.add("tabulator-print-footer");c="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter;if("string"==typeof c){s.innerHTML=c}else{s.appendChild(c)}this.element.appendChild(s)}document.body.classList.add("tabulator-print-fullscreen-hide");document.body.appendChild(this.element);if(this.table.options.printFormatter){this.table.options.printFormatter(this.element,d)}window.print();this.cleanup();window.scrollTo(a,n);this.manualBlock=!1};u.prototype.registerModule("print",j);var G=function(t){this.table=t;this.data=!1;this.blocked=!1;this.origFuncs={};this.currentVersion=0};G.prototype.watchData=function(t){var o=this,l;this.currentVersion++;l=this.currentVersion;o.unwatchData();o.data=t;o.origFuncs.push=t.push;Object.defineProperty(o.data,"push",{enumerable:!1,configurable:!0,value:function(){var a=Array.from(arguments);if(!o.blocked&&l===o.currentVersion){a.forEach(function(t){o.table.rowManager.addRowActual(t,!1)})}return o.origFuncs.push.apply(t,arguments)}});o.origFuncs.unshift=t.unshift;Object.defineProperty(o.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var a=Array.from(arguments);if(!o.blocked&&l===o.currentVersion){a.forEach(function(t){o.table.rowManager.addRowActual(t,!0)})}return o.origFuncs.unshift.apply(t,arguments)}});o.origFuncs.shift=t.shift;Object.defineProperty(o.data,"shift",{enumerable:!1,configurable:!0,value:function(){var a;if(!o.blocked&&l===o.currentVersion){if(o.data.length){a=o.table.rowManager.getRowFromDataObject(o.data[0]);if(a){a.deleteActual()}}}return o.origFuncs.shift.call(t)}});o.origFuncs.pop=t.pop;Object.defineProperty(o.data,"pop",{enumerable:!1,configurable:!0,value:function(){var a;if(!o.blocked&&l===o.currentVersion){if(o.data.length){a=o.table.rowManager.getRowFromDataObject(o.data[o.data.length-1]);if(a){a.deleteActual()}}}return o.origFuncs.pop.call(t)}});o.origFuncs.splice=t.splice;Object.defineProperty(o.data,"splice",{enumerable:!1,configurable:!0,value:function(){var a=Array.from(arguments),n=0>a[0]?t.length+a[0]:a[0],r=a[1],s=a[2]?a.slice(2):!1,d;if(!o.blocked&&l===o.currentVersion){if(s){d=t[n]?o.table.rowManager.getRowFromDataObject(t[n]):!1;if(d){s.forEach(function(t){o.table.rowManager.addRowActual(t,!0,d,!0)})}else{s=s.slice().reverse();s.forEach(function(t){o.table.rowManager.addRowActual(t,!0,!1,!0)})}}if(0!==r){var p=t.slice(n,"undefined"==typeof a[1]?a[1]:n+r);p.forEach(function(t,l){var a=o.table.rowManager.getRowFromDataObject(t);if(a){a.deleteActual(l!==p.length-1)}})}if(s||0!==r){o.table.rowManager.reRenderInPosition()}}return o.origFuncs.splice.apply(t,arguments)}})};G.prototype.unwatchData=function(){if(!1!==this.data){for(var t in this.origFuncs){Object.defineProperty(this.data,t,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}}};G.prototype.watchRow=function(t){var o=t.getData();this.blocked=!0;for(var l in o){this.watchKey(t,o,l)}if(this.table.options.dataTree){this.watchTreeChildren(t)}this.blocked=!1};G.prototype.watchTreeChildren=function(t){var l=this,a=t.getData()[this.table.options.dataTreeChildField],n={};function o(){l.table.modules.dataTree.initializeRow(t);l.table.modules.dataTree.layoutRow(t);l.table.rowManager.refreshActiveData("tree",!1,!0)}if(a){n.push=a.push;Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:function(){var t=n.push.apply(a,arguments);o();return t}});n.unshift=a.unshift;Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:function(){var t=n.unshift.apply(a,arguments);o();return t}});n.shift=a.shift;Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:function(){var t=n.shift.call(a);o();return t}});n.pop=a.pop;Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:function(){var t=n.pop.call(a);o();return t}});n.splice=a.splice;Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:function(){var t=n.splice.apply(a,arguments);o();return t}})}};G.prototype.watchKey=function(t,o,l){var a=this,n=Object.getOwnPropertyDescriptor(o,l),r=o[l],s=this.currentVersion;Object.defineProperty(o,l,{set:function(o){r=o;if(!a.blocked&&s===a.currentVersion){var d={};d[l]=o;t.updateData(d)}if(n.set){n.set(o)}},get:function(){if(n.get){n.get()}return r}})};G.prototype.unwatchRow=function(t){var o=t.getData();for(var l in o){Object.defineProperty(o,l,{value:o[l]})}};G.prototype.block=function(){this.blocked=!0};G.prototype.unblock=function(){this.blocked=!1};u.prototype.registerModule("reactiveData",G);var U=function(t){this.table=t;this.startColumn=!1;this.startX=!1;this.startWidth=!1;this.handle=null;this.prevHandle=null};U.prototype.initializeColumn=function(t,o,l){var a=this,n=!1,r=this.table.options.resizableColumns;if("header"===t){n="textarea"==o.definition.formatter||o.definition.variableHeight;o.modules.resize={variableHeight:n}}if(!0===r||r==t){var s=document.createElement("div");s.className="tabulator-col-resize-handle";var d=document.createElement("div");d.className="tabulator-col-resize-handle prev";s.addEventListener("click",function(t){t.stopPropagation()});var p=function(t){var l=o.getLastColumn();if(l&&a._checkResizability(l)){a.startColumn=o;a._mouseDown(t,l,s)}};s.addEventListener("mousedown",p);s.addEventListener("touchstart",p,{passive:!0});s.addEventListener("dblclick",function(t){var l=o.getLastColumn();if(l&&a._checkResizability(l)){t.stopPropagation();l.reinitializeWidth(!0)}});d.addEventListener("click",function(t){t.stopPropagation()});var c=function(t){var l,n,r;l=o.getFirstColumn();if(l){n=a.table.columnManager.findColumnIndex(l);r=0<n?a.table.columnManager.getColumnByIndex(n-1):!1;if(r&&a._checkResizability(r)){a.startColumn=o;a._mouseDown(t,r,d)}}};d.addEventListener("mousedown",c);d.addEventListener("touchstart",c,{passive:!0});d.addEventListener("dblclick",function(t){var l,n,r;l=o.getFirstColumn();if(l){n=a.table.columnManager.findColumnIndex(l);r=0<n?a.table.columnManager.getColumnByIndex(n-1):!1;if(r&&a._checkResizability(r)){t.stopPropagation();r.reinitializeWidth(!0)}}});l.appendChild(s);l.appendChild(d)}};U.prototype._checkResizability=function(t){return"undefined"!=typeof t.definition.resizable?t.definition.resizable:this.table.options.resizableColumns};U.prototype._mouseDown=function(t,o,l){var r=this;r.table.element.classList.add("tabulator-block-select");function a(t){if(r.table.rtl){o.setWidth(r.startWidth-(("undefined"==typeof t.screenX?t.touches[0].screenX:t.screenX)-r.startX))}else{o.setWidth(r.startWidth+(("undefined"==typeof t.screenX?t.touches[0].screenX:t.screenX)-r.startX))}if(r.table.options.virtualDomHoz){r.table.vdomHoz.reinitialize(!0)}if(!r.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight){o.checkCellHeights()}}function n(){if(r.startColumn.modules.edit){r.startColumn.modules.edit.blocked=!1}if(r.table.browserSlow&&o.modules.resize&&o.modules.resize.variableHeight){o.checkCellHeights()}document.body.removeEventListener("mouseup",n);document.body.removeEventListener("mousemove",a);l.removeEventListener("touchmove",a);l.removeEventListener("touchend",n);r.table.element.classList.remove("tabulator-block-select");if(r.table.options.persistence&&r.table.modExists("persistence",!0)&&r.table.modules.persistence.config.columns){r.table.modules.persistence.save("columns")}r.table.options.columnResized.call(r.table,o.getComponent())}t.stopPropagation();if(r.startColumn.modules.edit){r.startColumn.modules.edit.blocked=!0}r.startX="undefined"==typeof t.screenX?t.touches[0].screenX:t.screenX;r.startWidth=o.getWidth();document.body.addEventListener("mousemove",a);document.body.addEventListener("mouseup",n);l.addEventListener("touchmove",a,{passive:!0});l.addEventListener("touchend",n)};u.prototype.registerModule("resizeColumns",U);var Y=function(t){this.table=t;this.startColumn=!1;this.startY=!1;this.startHeight=!1;this.handle=null;this.prevHandle=null};Y.prototype.initializeRow=function(t){var o=this,l=t.getElement(),a=document.createElement("div");a.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev";a.addEventListener("click",function(t){t.stopPropagation()});var r=function(l){o.startRow=t;o._mouseDown(l,t,a)};a.addEventListener("mousedown",r);a.addEventListener("touchstart",r,{passive:!0});n.addEventListener("click",function(t){t.stopPropagation()});var s=function(l){var a=o.table.rowManager.prevDisplayRow(t);if(a){o.startRow=a;o._mouseDown(l,a,n)}};n.addEventListener("mousedown",s);n.addEventListener("touchstart",s,{passive:!0});l.appendChild(a);l.appendChild(n)};Y.prototype._mouseDown=function(t,o,l){var r=this;r.table.element.classList.add("tabulator-block-select");function a(t){o.setHeight(r.startHeight+(("undefined"==typeof t.screenY?t.touches[0].screenY:t.screenY)-r.startY))}function n(){document.body.removeEventListener("mouseup",a);document.body.removeEventListener("mousemove",a);l.removeEventListener("touchmove",a);l.removeEventListener("touchend",n);r.table.element.classList.remove("tabulator-block-select");r.table.options.rowResized.call(this.table,o.getComponent())}t.stopPropagation();r.startY="undefined"==typeof t.screenY?t.touches[0].screenY:t.screenY;r.startHeight=o.getHeight();document.body.addEventListener("mousemove",a);document.body.addEventListener("mouseup",n);l.addEventListener("touchmove",a,{passive:!0});l.addEventListener("touchend",n)};u.prototype.registerModule("resizeRows",Y);var K=function(t){this.table=t;this.binding=!1;this.observer=!1;this.containerObserver=!1;this.tableHeight=0;this.tableWidth=0;this.containerHeight=0;this.containerWidth=0;this.autoResize=!1};K.prototype.initialize=function(){var t=this,o=this.table,l;this.tableHeight=o.element.clientHeight;this.tableWidth=o.element.clientWidth;if(o.element.parentNode){this.containerHeight=o.element.parentNode.clientHeight;this.containerWidth=o.element.parentNode.clientWidth}if("undefined"!=typeof ResizeObserver&&"virtual"===o.rowManager.getRenderMode()){this.autoResize=!0;this.observer=new ResizeObserver(function(l){if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var a=Math.floor(l[0].contentRect.height),n=Math.floor(l[0].contentRect.width);if(t.tableHeight!=a||t.tableWidth!=n){t.tableHeight=a;t.tableWidth=n;if(o.element.parentNode){t.containerHeight=o.element.parentNode.clientHeight;t.containerWidth=o.element.parentNode.clientWidth}if(o.options.virtualDomHoz){o.vdomHoz.reinitialize(!0)}o.redraw()}}});this.observer.observe(o.element);l=window.getComputedStyle(o.element);if(this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(l.getPropertyValue("max-height")||l.getPropertyValue("min-height"))){this.containerObserver=new ResizeObserver(function(l){if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){var a=Math.floor(l[0].contentRect.height),n=Math.floor(l[0].contentRect.width);if(t.containerHeight!=a||t.containerWidth!=n){t.containerHeight=a;t.containerWidth=n;t.tableHeight=o.element.clientHeight;t.tableWidth=o.element.clientWidth}if(o.options.virtualDomHoz){o.vdomHoz.reinitialize(!0)}o.redraw()}});this.containerObserver.observe(this.table.element.parentNode)}}else{this.binding=function(){if(!o.browserMobile||o.browserMobile&&!o.modules.edit.currentCell){if(o.options.virtualDomHoz){o.vdomHoz.reinitialize(!0)}o.redraw()}};window.addEventListener("resize",this.binding)}};K.prototype.clearBindings=function(){if(this.binding){window.removeEventListener("resize",this.binding)}if(this.observer){this.observer.unobserve(this.table.element)}if(this.containerObserver){this.containerObserver.unobserve(this.table.element.parentNode)}};u.prototype.registerModule("resizeTable",K);var X=function(t){this.table=t;this.columns=[];this.hiddenColumns=[];this.mode="";this.index=0;this.collapseFormatter=[];this.collapseStartOpen=!0;this.collapseHandleColumn=!1};X.prototype.initialize=function(){var t=this,o=[];this.mode=this.table.options.responsiveLayout;this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData;this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen;this.hiddenColumns=[];this.table.columnManager.columnsByIndex.forEach(function(l,a){if(l.modules.responsive){if(l.modules.responsive.order&&l.modules.responsive.visible){l.modules.responsive.index=a;o.push(l);if(!l.visible&&"collapse"===t.mode){t.hiddenColumns.push(l)}}}});o=o.reverse();o=o.sort(function(t,o){var l=o.modules.responsive.order-t.modules.responsive.order;return l||o.modules.responsive.index-t.modules.responsive.index});this.columns=o;if("collapse"===this.mode){this.generateCollapsedContent()}for(var l=this.table.columnManager.columnsByIndex,a=Array.isArray(l),n=0,l=a?l:l[Symbol.iterator]();;){var r;if(a){if(n>=l.length)break;r=l[n++]}else{n=l.next();if(n.done)break;r=n.value}var s=r;if("responsiveCollapse"==s.definition.formatter){this.collapseHandleColumn=s;break}}if(this.collapseHandleColumn){if(this.hiddenColumns.length){this.collapseHandleColumn.show()}else{this.collapseHandleColumn.hide()}}};X.prototype.initializeColumn=function(t){var o=t.getDefinition();t.modules.responsive={order:"undefined"==typeof o.responsive?1:o.responsive,visible:!1===o.visible?!1:!0}};X.prototype.initializeRow=function(t){var o;if("calc"!==t.type){o=document.createElement("div");o.classList.add("tabulator-responsive-collapse");t.modules.responsiveLayout={element:o,open:this.collapseStartOpen};if(!this.collapseStartOpen){o.style.display="none"}}};X.prototype.layoutRow=function(t){var o=t.getElement();if(t.modules.responsiveLayout){o.appendChild(t.modules.responsiveLayout.element);this.generateCollapsedRowContent(t)}};X.prototype.updateColumnVisibility=function(t,o){if(t.modules.responsive){t.modules.responsive.visible=o;this.initialize()}};X.prototype.hideColumn=function(t){var o=this.hiddenColumns.length;t.hide(!1,!0);if("collapse"===this.mode){this.hiddenColumns.unshift(t);this.generateCollapsedContent();if(this.collapseHandleColumn&&!o){this.collapseHandleColumn.show()}}};X.prototype.showColumn=function(t){var o;t.show(!1,!0);t.setWidth(t.getWidth());if("collapse"===this.mode){o=this.hiddenColumns.indexOf(t);if(-1<o){this.hiddenColumns.splice(o,1)}this.generateCollapsedContent();if(this.collapseHandleColumn&&!this.hiddenColumns.length){this.collapseHandleColumn.hide()}}};X.prototype.update=function(){var t=this,o=!0;while(o){var l="fitColumns"==t.table.modules.layout.getMode()?t.table.columnManager.getFlexBaseWidth():t.table.columnManager.getWidth(),a=(t.table.options.headerVisible?t.table.columnManager.element.clientWidth:t.table.element.clientWidth)-l;if(0>a){var n=t.columns[t.index];if(n){t.hideColumn(n);t.index++}else{o=!1}}else{var r=t.columns[t.index-1];if(r){if(0<a){if(a>=r.getWidth()){t.showColumn(r);t.index--}else{o=!1}}else{o=!1}}else{o=!1}}if(!t.table.rowManager.activeRowsCount){t.table.rowManager.renderEmptyScroll()}}};X.prototype.generateCollapsedContent=function(){var t=this,o=this.table.rowManager.getDisplayRows();o.forEach(function(o){t.generateCollapsedRowContent(o)})};X.prototype.generateCollapsedRowContent=function(t){var o,l;if(t.modules.responsiveLayout){o=t.modules.responsiveLayout.element;while(o.firstChild){o.removeChild(o.firstChild)}l=this.collapseFormatter(this.generateCollapsedRowData(t));if(l){o.appendChild(l)}}};X.prototype.generateCollapsedRowData=function(t){var o=this,l=t.getData(),a=[],n;this.hiddenColumns.forEach(function(r){var s=r.getFieldValue(l);if(r.definition.title&&r.field){if(r.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters){n={value:!1,data:{},getValue:function(){return s},getData:function(){return l},getElement:function(){return document.createElement("div")},getRow:function(){return t.getComponent()},getColumn:function(){return r.getComponent()}};a.push({field:r.field,title:r.definition.title,value:r.modules.format.formatter.call(o.table.modules.format,n,r.modules.format.params)})}else{a.push({field:r.field,title:r.definition.title,value:s})}}});return a};X.prototype.formatCollapsedData=function(t){var o=document.createElement("table");t.forEach(function(t){var l=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td"),r,s=document.createElement("strong");a.appendChild(s);this.table.modules.localize.bind("columns|"+t.field,function(o){s.innerText=o||t.title});if(t.value instanceof Node){r=document.createElement("div");r.appendChild(t.value);n.appendChild(r)}else{n.innerHTML=t.value}l.appendChild(a);l.appendChild(n);o.appendChild(l)},this);return Object.keys(t).length?o:""};u.prototype.registerModule("responsiveLayout",X);var q=function(t){this.table=t;this.selecting=!1;this.lastClickedRow=!1;this.selectPrev=[];this.selectedRows=[];this.headerCheckboxElement=null};q.prototype.clearSelectionData=function(t){this.selecting=!1;this.lastClickedRow=!1;this.selectPrev=[];this.selectedRows=[];if(!t){this._rowSelectionChanged()}};q.prototype.initializeRow=function(t){var o=this,l=t.getElement(),a=function t(){setTimeout(function(){o.selecting=!1},50);document.body.removeEventListener("mouseup",t)};t.modules.select={selected:!1};if(o.table.options.selectableCheck.call(this.table,t.getComponent())){l.classList.add("tabulator-selectable");l.classList.remove("tabulator-unselectable");if(o.table.options.selectable&&"highlight"!=o.table.options.selectable){if("click"===o.table.options.selectableRangeMode){l.addEventListener("click",function(l){if(l.shiftKey){o.table._clearSelection();o.lastClickedRow=o.lastClickedRow||t;var a=o.table.rowManager.getDisplayRowIndex(o.lastClickedRow),n=o.table.rowManager.getDisplayRowIndex(t),r=a<=n?a:n,s=a>=n?a:n,d=o.table.rowManager.getDisplayRows().slice(0),p=d.splice(r,s-r+1);if(l.ctrlKey||l.metaKey){p.forEach(function(l){if(l!==o.lastClickedRow){if(!0!==o.table.options.selectable&&!o.isRowSelected(t)){if(o.selectedRows.length<o.table.options.selectable){o.toggleRow(l)}}else{o.toggleRow(l)}}});o.lastClickedRow=t}else{o.deselectRows(void 0,!0);if(!0!==o.table.options.selectable){if(p.length>o.table.options.selectable){p=p.slice(0,o.table.options.selectable)}}o.selectRows(p)}o.table._clearSelection()}else if(l.ctrlKey||l.metaKey){o.toggleRow(t);o.lastClickedRow=t}else{o.deselectRows(void 0,!0);o.selectRows(t);o.lastClickedRow=t}})}else{l.addEventListener("click",function(){if(!o.table.modExists("edit")||!o.table.modules.edit.getCurrentCell()){o.table._clearSelection()}if(!o.selecting){o.toggleRow(t)}});l.addEventListener("mousedown",function(l){if(l.shiftKey){o.table._clearSelection();o.selecting=!0;o.selectPrev=[];document.body.addEventListener("mouseup",a);document.body.addEventListener("keyup",a);o.toggleRow(t);return!1}});l.addEventListener("mouseenter",function(){if(o.selecting){o.table._clearSelection();o.toggleRow(t);if(o.selectPrev[1]==t){o.toggleRow(o.selectPrev[0])}}});l.addEventListener("mouseout",function(){if(o.selecting){o.table._clearSelection();o.selectPrev.unshift(t)}})}}}else{l.classList.add("tabulator-unselectable");l.classList.remove("tabulator-selectable")}};q.prototype.toggleRow=function(t){if(this.table.options.selectableCheck.call(this.table,t.getComponent())){if(t.modules.select&&t.modules.select.selected){this._deselectRow(t)}else{this._selectRow(t)}}};q.prototype.selectRows=function(t){var o=this,l;switch("undefined"==typeof t?"undefined":_typeof(t)){case"undefined":this.table.rowManager.rows.forEach(function(t){o._selectRow(t,!0,!0)});this._rowSelectionChanged();break;case"string":l=this.table.rowManager.findRow(t);if(l){this._selectRow(l,!0,!0)}else{this.table.rowManager.getRows(t).forEach(function(t){o._selectRow(t,!0,!0)})}this._rowSelectionChanged();break;default:if(Array.isArray(t)){t.forEach(function(t){o._selectRow(t,!0,!0)});this._rowSelectionChanged()}else{this._selectRow(t,!1,!0)}break;}};q.prototype._selectRow=function(t,o,l){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!l){if(this.selectedRows.length>=this.table.options.selectable){if(this.table.options.selectableRollingSelection){this._deselectRow(this.selectedRows[0])}else{return!1}}}var a=this.table.rowManager.findRow(t);if(a){if(-1==this.selectedRows.indexOf(a)){a.getElement().classList.add("tabulator-selected");if(!a.modules.select){a.modules.select={}}a.modules.select.selected=!0;if(a.modules.select.checkboxEl){a.modules.select.checkboxEl.checked=!0}this.selectedRows.push(a);if(this.table.options.dataTreeSelectPropagate){this.childRowSelection(a,!0)}if(!o){this.table.options.rowSelected.call(this.table,a.getComponent())}this._rowSelectionChanged(o)}}else{if(!o){console.warn("Selection Error - No such row found, ignoring selection:"+t)}}};q.prototype.isRowSelected=function(t){return-1!==this.selectedRows.indexOf(t)};q.prototype.deselectRows=function(t,o){var l=this,a;if("undefined"==typeof t){a=l.selectedRows.length;for(var n=0;n<a;n++){l._deselectRow(l.selectedRows[0],!0)}l._rowSelectionChanged(o)}else{if(Array.isArray(t)){t.forEach(function(t){l._deselectRow(t,!0)});l._rowSelectionChanged(o)}else{l._deselectRow(t,o)}}};q.prototype._deselectRow=function(t,o){var l=this,a=l.table.rowManager.findRow(t),n;if(a){n=l.selectedRows.findIndex(function(t){return t==a});if(-1<n){a.getElement().classList.remove("tabulator-selected");if(!a.modules.select){a.modules.select={}}a.modules.select.selected=!1;if(a.modules.select.checkboxEl){a.modules.select.checkboxEl.checked=!1}l.selectedRows.splice(n,1);if(this.table.options.dataTreeSelectPropagate){this.childRowSelection(a,!1)}if(!o){l.table.options.rowDeselected.call(this.table,a.getComponent())}l._rowSelectionChanged(o)}}else{if(!o){console.warn("Deselection Error - No such row found, ignoring selection:"+t)}}};q.prototype.getSelectedData=function(){var t=[];this.selectedRows.forEach(function(o){t.push(o.getData())});return t};q.prototype.getSelectedRows=function(){var t=[];this.selectedRows.forEach(function(o){t.push(o.getComponent())});return t};q.prototype._rowSelectionChanged=function(t){if(this.headerCheckboxElement){if(0===this.selectedRows.length){this.headerCheckboxElement.checked=!1;this.headerCheckboxElement.indeterminate=!1}else if(this.table.rowManager.rows.length===this.selectedRows.length){this.headerCheckboxElement.checked=!0;this.headerCheckboxElement.indeterminate=!1}else{this.headerCheckboxElement.indeterminate=!0;this.headerCheckboxElement.checked=!1}}if(!t){this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())}};q.prototype.registerRowSelectCheckbox=function(t,o){if(!t._row.modules.select){t._row.modules.select={}}t._row.modules.select.checkboxEl=o};q.prototype.registerHeaderSelectCheckbox=function(t){this.headerCheckboxElement=t};q.prototype.childRowSelection=function(t,o){var l=this.table.modules.dataTree.getChildren(t,!0);if(o){for(var a=l,n=Array.isArray(a),r=0,a=n?a:a[Symbol.iterator]();;){var s;if(n){if(r>=a.length)break;s=a[r++]}else{r=a.next();if(r.done)break;s=r.value}var d=s;this._selectRow(d,!0)}}else{for(var p=l,c=Array.isArray(p),u=0,p=c?p:p[Symbol.iterator]();;){var m;if(c){if(u>=p.length)break;m=p[u++]}else{u=p.next();if(u.done)break;m=u.value}var g=m;this._deselectRow(g,!0)}}};u.prototype.registerModule("selectRow",q);var J=function(t){this.table=t;this.sortList=[];this.changed=!1};J.prototype.initializeColumn=function(t,o){var l=this,a=!1,n,r;switch(_typeof(t.definition.sorter)){case"string":if(l.sorters[t.definition.sorter]){a=l.sorters[t.definition.sorter]}else{console.warn("Sort Error - No such sorter found: ",t.definition.sorter)}break;case"function":a=t.definition.sorter;break;}t.modules.sort={sorter:a,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc",tristate:"undefined"!=typeof t.definition.headerSortTristate?t.definition.headerSortTristate:this.table.options.headerSortTristate};if("undefined"==typeof t.definition.headerSort?!1!==this.table.options.headerSort:!1!==t.definition.headerSort){n=t.getElement();n.classList.add("tabulator-sortable");r=document.createElement("div");r.classList.add("tabulator-col-sorter");if("object"==_typeof(this.table.options.headerSortElement)){r.appendChild(this.table.options.headerSortElement)}else{r.innerHTML=this.table.options.headerSortElement}o.appendChild(r);t.modules.sort.element=r;n.addEventListener("click",function(o){var a="",n=[],r=!1;if(t.modules.sort){if(t.modules.sort.tristate){if("none"==t.modules.sort.dir){a=t.modules.sort.startingDir}else{if(t.modules.sort.dir==t.modules.sort.startingDir){a="asc"==t.modules.sort.dir?"desc":"asc"}else{a="none"}}}else{switch(t.modules.sort.dir){case"asc":a="desc";break;case"desc":a="asc";break;default:a=t.modules.sort.startingDir;}}if(l.table.options.columnHeaderSortMulti&&(o.shiftKey||o.ctrlKey)){n=l.getSort();r=n.findIndex(function(o){return o.field===t.getField()});if(-1<r){n[r].dir=a;if(r!=n.length-1){r=n.splice(r,1)[0];if("none"!=a){n.push(r)}}}else{if("none"!=a){n.push({column:t,dir:a})}}l.setSort(n)}else{if("none"==a){l.clear()}else{l.setSort(t,a)}}l.table.rowManager.sorterRefresh(!l.sortList.length)}})}};J.prototype.hasChanged=function(){var t=this.changed;this.changed=!1;return t};J.prototype.getSort=function(){var t=this,o=[];t.sortList.forEach(function(t){if(t.column){o.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})}});return o};J.prototype.setSort=function(t,o){var l=this,a=[];if(!Array.isArray(t)){t=[{column:t,dir:o}]}t.forEach(function(t){var o=l.table.columnManager.findColumn(t.column);if(o){t.column=o;a.push(t);l.changed=!0}else{console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}});l.sortList=a;if(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort){this.table.modules.persistence.save("sort")}};J.prototype.clear=function(){this.setSort([])};J.prototype.findSorter=function(t){var o=this.table.rowManager.activeRows[0],l="string",a,n;if(o){o=o.getData();a=t.getField();if(a){n=t.getFieldValue(o);switch("undefined"==typeof n?"undefined":_typeof(n)){case"undefined":l="string";break;case"boolean":l="boolean";break;default:if(!isNaN(n)&&""!==n){l="number"}else{if(n.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){l="alphanum"}}break;}}}return this.sorters[l]};J.prototype.sort=function(t){var o=this,l=this.table.options.sortOrderReverse?o.sortList.slice().reverse():o.sortList,a=[],n=[];if(o.table.options.dataSorting){o.table.options.dataSorting.call(o.table,o.getSort())}o.clearColumnHeaders();if(!o.table.options.ajaxSorting){l.forEach(function(t){var l=t.column.modules.sort;if(t.column&&l){if(!l.sorter){l.sorter=o.findSorter(t.column)}t.params="function"==typeof l.params?l.params(t.column.getComponent(),t.dir):l.params;a.push(t)}o.setColumnHeader(t.column,t.dir)});if(a.length){o._sortItems(t,a)}}else{l.forEach(function(t){o.setColumnHeader(t.column,t.dir)})}if(o.table.options.dataSorted){t.forEach(function(t){n.push(t.getComponent())});o.table.options.dataSorted.call(o.table,o.getSort(),n)}};J.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(t){if(t.modules.sort){t.modules.sort.dir="none";t.getElement().setAttribute("aria-sort","none")}})};J.prototype.setColumnHeader=function(t,o){t.modules.sort.dir=o;t.getElement().setAttribute("aria-sort",o)};J.prototype._sortItems=function(t,o){var l=this,n=o.length-1;t.sort(function(t,a){for(var r,s=n,d;0<=s;s--){d=o[s];r=l._sortRow(t,a,d.column,d.dir,d.params);if(0!==r){break}}return r})};J.prototype._sortRow=function(t,o,l,n,r){var s,d,p="asc"==n?t:o,c="asc"==n?o:t;t=l.getFieldValue(p.getData());o=l.getFieldValue(c.getData());t="undefined"!=typeof t?t:"";o="undefined"!=typeof o?o:"";s=p.getComponent();d=c.getComponent();return l.modules.sort.sorter.call(this,t,o,s,d,l.getComponent(),n,r)};J.prototype.sorters={number:function(t,o,l,n,r,s,d){var p=d.alignEmptyValues,c=d.decimalSeparator,u=d.thousandSeparator,m=0;t=t+"";o=o+"";if(u){t=t.split(u).join("");o=o.split(u).join("")}if(c){t=t.split(c).join(".");o=o.split(c).join(".")}t=parseFloat(t);o=parseFloat(o);if(isNaN(t)){m=isNaN(o)?0:-1}else if(isNaN(o)){m=1}else{return t-o}if("top"===p&&"desc"===s||"bottom"===p&&"asc"===s){m*=-1}return m},string:function(t,o,l,a,n,r,s){var d=s.alignEmptyValues,p=0,c;if(!t){p=!o?0:-1}else if(!o){p=1}else{switch(_typeof(s.locale)){case"boolean":if(s.locale){c=this.table.modules.localize.getLocale()}break;case"string":c=s.locale;break;}return(t+"").toLowerCase().localeCompare((o+"").toLowerCase(),c)}if("top"===d&&"desc"===r||"bottom"===d&&"asc"===r){p*=-1}return p},date:function(t,o,l,a,n,r,s){if(!s.format){s.format="DD/MM/YYYY"}return this.sorters.datetime.call(this,t,o,l,a,n,r,s)},time:function(t,o,l,a,n,r,s){if(!s.format){s.format="HH:mm"}return this.sorters.datetime.call(this,t,o,l,a,n,r,s)},datetime:function(t,o,l,n,r,s,d){var p=d.format||"DD/MM/YYYY HH:mm:ss",c=d.alignEmptyValues,u=0;if("undefined"!=typeof moment){t=moment(t,p);o=moment(o,p);if(!t.isValid()){u=!o.isValid()?0:-1}else if(!o.isValid()){u=1}else{return t-o}if("top"===c&&"desc"===s||"bottom"===c&&"asc"===s){u*=-1}return u}else{console.error("Sort Error - 'datetime' sorter is dependant on moment.js")}},boolean:function(t,o){var l=!0===t||"true"===t||"True"===t||1===t?1:0,a=!0===o||"true"===o||"True"===o||1===o?1:0;return l-a},array:function(t,o,l,a,n,r,s){var p=0,c=0,u=s.type||"length",m=s.alignEmptyValues,g=0;function d(t){switch(u){case"length":return t.length;break;case"sum":return t.reduce(function(t,o){return t+o});break;case"max":return Math.max.apply(null,t);break;case"min":return Math.min.apply(null,t);break;case"avg":return t.reduce(function(t,o){return t+o})/t.length;break;}}if(!Array.isArray(t)){m=!Array.isArray(o)?0:-1}else if(!Array.isArray(o)){m=1}else{p=t?d(t):0;c=o?d(o):0;return p-c}if("top"===m&&"desc"===r||"bottom"===m&&"asc"===r){g*=-1}return g},exists:function(t,o){var l="undefined"==typeof t?0:1,a="undefined"==typeof o?0:1;return l-a},alphanum:function(t,o,l,n,r,s,d){var p,c,u,m,g=0,h,f=/(\d+)|(\D+)/g,y=/\d/,w=d.alignEmptyValues,v=0;if(!t&&0!==t){v=!o&&0!==o?0:-1}else if(!o&&0!==o){v=1}else{if(isFinite(t)&&isFinite(o))return t-o;p=(t+"").toLowerCase();c=(o+"").toLowerCase();if(p===c)return 0;if(!(y.test(p)&&y.test(c)))return p>c?1:-1;p=p.match(f);c=c.match(f);h=p.length>c.length?c.length:p.length;while(g<h){u=p[g];m=c[g++];if(u!==m){if(isFinite(u)&&isFinite(m)){if("0"===u.charAt(0))u="."+u;if("0"===m.charAt(0))m="."+m;return u-m}else return u>m?1:-1}}return p.length>c.length}if("top"===w&&"desc"===s||"bottom"===w&&"asc"===s){v*=-1}return v}};u.prototype.registerModule("sort",J);var $=function(t){this.table=t;this.invalidCells=[]};$.prototype.initializeColumn=function(t){var o=this,l=[],a;if(t.definition.validator){if(Array.isArray(t.definition.validator)){t.definition.validator.forEach(function(t){a=o._extractValidator(t);if(a){l.push(a)}})}else{a=this._extractValidator(t.definition.validator);if(a){l.push(a)}}t.modules.validate=l.length?l:!1}};$.prototype._extractValidator=function(t){var o,l,a;switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":a=t.indexOf(":");if(-1<a){o=t.substring(0,a);l=t.substring(a+1)}else{o=t}return this._buildValidator(o,l);break;case"function":return this._buildValidator(t);break;case"object":return this._buildValidator(t.type,t.parameters);break;}};$.prototype._buildValidator=function(t,o){var l="function"==typeof t?t:this.validators[t];if(!l){console.warn("Validator Setup Error - No matching validator found:",t);return!1}else{return{type:"function"==typeof t?"function":t,func:l,params:o}}};$.prototype.validate=function(t,o,l){var a=this,n=[],r=this.invalidCells.indexOf(o);if(t){t.forEach(function(t){if(!t.func.call(a,o.getComponent(),l,t.params)){n.push({type:t.type,parameters:t.params})}})}n=n.length?n:!0;if(!o.modules.validate){o.modules.validate={}}if(!0===n){o.modules.validate.invalid=!1;o.getElement().classList.remove("tabulator-validation-fail");if(-1<r){this.invalidCells.splice(r,1)}}else{o.modules.validate.invalid=!0;if("manual"!==this.table.options.validationMode){o.getElement().classList.add("tabulator-validation-fail")}if(-1==r){this.invalidCells.push(o)}}return n};$.prototype.getInvalidCells=function(){var t=[];this.invalidCells.forEach(function(o){t.push(o.getComponent())});return t};$.prototype.clearValidation=function(t){var o;if(t.modules.validate&&t.modules.validate.invalid){t.getElement().classList.remove("tabulator-validation-fail");t.modules.validate.invalid=!1;o=this.invalidCells.indexOf(t);if(-1<o){this.invalidCells.splice(o,1)}}};$.prototype.validators={integer:function(t,o){if(""===o||null===o||"undefined"==typeof o){return!0}o=+o;return"number"==typeof o&&isFinite(o)&&Math.floor(o)===o},float:function(t,o){if(""===o||null===o||"undefined"==typeof o){return!0}o=+o;return"number"==typeof o&&isFinite(o)&&0!=o%1},numeric:function(t,o){if(""===o||null===o||"undefined"==typeof o){return!0}return!isNaN(o)},string:function(t,o){if(""===o||null===o||"undefined"==typeof o){return!0}return isNaN(o)},max:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}return parseFloat(o)<=l},min:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}return parseFloat(o)>=l},starts:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}return(o+"").toLowerCase().startsWith((l+"").toLowerCase())},ends:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}return(o+"").toLowerCase().endsWith((l+"").toLowerCase())},minLength:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}return(o+"").length>=l},maxLength:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}return(o+"").length<=l},in:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}if("string"==typeof l){l=l.split("|")}return""===o||-1<l.indexOf(o)},regex:function(t,o,l){if(""===o||null===o||"undefined"==typeof o){return!0}var a=new RegExp(l);return a.test(o)},unique:function t(o,l){if(""===l||null===l||"undefined"==typeof l){return!0}var t=!0,a=o.getData(),n=o.getColumn()._getSelf();this.table.rowManager.rows.forEach(function(o){var r=o.getData();if(r!==a){if(l==n.getFieldValue(r)){t=!1}}});return t},required:function(t,o){return""!==o&&null!==o&&"undefined"!=typeof o}};u.prototype.registerModule("validate",$);return u});
//# sourceMappingURL=tabulator.min.js.map
